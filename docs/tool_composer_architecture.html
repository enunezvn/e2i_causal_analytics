<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E2I Tool Composer | Orchestration Architecture</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Primary palette */
            --midnight: #0f1419;
            --deep-blue: #1a2332;
            --slate: #2d3748;
            --steel: #4a5568;
            
            /* Accent colors */
            --cyan: #00d4ff;
            --cyan-dim: #00a3c4;
            --violet: #8b5cf6;
            --violet-dim: #6d28d9;
            --emerald: #10b981;
            --amber: #f59e0b;
            --rose: #f43f5e;
            
            /* Tier colors */
            --tier0: #6366f1;
            --tier1: #8b5cf6;
            --tier2: #06b6d4;
            --tier3: #f59e0b;
            --tier4: #10b981;
            --tier5: #ec4899;
            
            /* Text */
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            
            /* Surfaces */
            --surface-dark: rgba(26, 35, 50, 0.9);
            --surface-card: rgba(45, 55, 72, 0.6);
            --surface-hover: rgba(74, 85, 104, 0.4);
            --glass: rgba(255, 255, 255, 0.05);
            
            /* Shadows */
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 40px rgba(0, 212, 255, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--midnight);
            color: var(--text-primary);
            line-height: 1.7;
            overflow-x: hidden;
        }

        /* Background effects */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            z-index: 0;
        }

        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse 80% 50% at 20% 10%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* Layout */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 1;
        }

        /* Header */
        header {
            padding: 3rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 4rem;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--cyan), var(--violet));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .logo-text {
            font-family: 'Fraunces', serif;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--text-primary), var(--cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .version-badge {
            background: var(--surface-card);
            padding: 0.5rem 1rem;
            border-radius: 100px;
            font-size: 0.85rem;
            color: var(--cyan);
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        /* Hero */
        .hero {
            text-align: center;
            padding: 4rem 0;
            margin-bottom: 4rem;
        }

        .hero h1 {
            font-family: 'Fraunces', serif;
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--cyan) 50%, var(--violet) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto 2rem;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--cyan);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Section styling */
        section {
            margin-bottom: 6rem;
        }

        .section-header {
            margin-bottom: 3rem;
        }

        .section-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--cyan);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 0.75rem;
        }

        .section-label::before {
            content: '';
            width: 24px;
            height: 2px;
            background: var(--cyan);
        }

        h2 {
            font-family: 'Fraunces', serif;
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .section-desc {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 700px;
        }

        /* Cards */
        .card {
            background: var(--surface-card);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: rgba(0, 212, 255, 0.3);
            box-shadow: var(--shadow-glow);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .card h3 {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Overview Grid */
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        /* Pipeline Visualization */
        .pipeline-container {
            background: var(--surface-dark);
            border-radius: 20px;
            padding: 3rem;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .pipeline-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .pipeline-title h3 {
            font-family: 'Fraunces', serif;
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .pipeline-title p {
            color: var(--text-muted);
        }

        .pipeline-flow {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 1rem;
            position: relative;
            flex-wrap: wrap;
        }

        .pipeline-flow::before {
            content: '';
            position: absolute;
            top: 40px;
            left: 10%;
            width: 80%;
            height: 3px;
            background: linear-gradient(90deg, var(--cyan), var(--violet), var(--emerald), var(--amber));
            opacity: 0.5;
            z-index: 0;
        }

        .pipeline-stage {
            flex: 1;
            min-width: 200px;
            max-width: 280px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .stage-number {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            position: relative;
        }

        .stage-number::after {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            border: 2px dashed currentColor;
            opacity: 0.3;
        }

        .stage-1 .stage-number { background: rgba(0, 212, 255, 0.2); color: var(--cyan); }
        .stage-2 .stage-number { background: rgba(139, 92, 246, 0.2); color: var(--violet); }
        .stage-3 .stage-number { background: rgba(16, 185, 129, 0.2); color: var(--emerald); }
        .stage-4 .stage-number { background: rgba(245, 158, 11, 0.2); color: var(--amber); }

        .stage-content h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .stage-content p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .stage-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .badge-fast { background: rgba(16, 185, 129, 0.2); color: var(--emerald); }
        .badge-smart { background: rgba(139, 92, 246, 0.2); color: var(--violet); }

        /* Composer Phases */
        .phases-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0;
            position: relative;
        }

        @media (max-width: 900px) {
            .phases-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 600px) {
            .phases-grid {
                grid-template-columns: 1fr;
            }
        }

        .phase-card {
            padding: 2rem;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
            transition: all 0.3s ease;
        }

        .phase-card:first-child { border-radius: 16px 0 0 16px; }
        .phase-card:last-child { border-radius: 0 16px 16px 0; }

        @media (max-width: 900px) {
            .phase-card:first-child { border-radius: 16px 16px 0 0; }
            .phase-card:last-child { border-radius: 0 0 16px 16px; }
            .phase-card:nth-child(2) { border-radius: 0 16px 0 0; }
            .phase-card:nth-child(3) { border-radius: 0 0 0 16px; }
        }

        .phase-card:hover {
            background: var(--surface-hover);
            z-index: 2;
        }

        .phase-number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 3rem;
            font-weight: 700;
            opacity: 0.15;
            position: absolute;
            top: 1rem;
            right: 1.5rem;
        }

        .phase-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .phase-card h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .phase-card p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .phase-details {
            list-style: none;
        }

        .phase-details li {
            font-size: 0.8rem;
            color: var(--text-muted);
            padding: 0.25rem 0;
            padding-left: 1rem;
            position: relative;
        }

        .phase-details li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: var(--cyan);
        }

        .phase-1 { background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), transparent); }
        .phase-2 { background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), transparent); }
        .phase-3 { background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), transparent); }
        .phase-4 { background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), transparent); }

        /* Routing Decision Tree */
        .decision-tree {
            background: var(--surface-dark);
            border-radius: 20px;
            padding: 3rem;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .tree-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .tree-node {
            background: var(--surface-card);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 1.5rem 2rem;
            text-align: center;
            position: relative;
            max-width: 400px;
        }

        .tree-node.question {
            border-color: var(--cyan);
            background: rgba(0, 212, 255, 0.1);
        }

        .tree-node.question::after {
            content: '?';
            position: absolute;
            top: -12px;
            right: -12px;
            width: 24px;
            height: 24px;
            background: var(--cyan);
            color: var(--midnight);
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tree-branches {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
            position: relative;
        }

        .tree-branches::before {
            content: '';
            position: absolute;
            top: -2rem;
            left: 50%;
            width: 2px;
            height: 2rem;
            background: rgba(255,255,255,0.2);
        }

        .branch {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .branch-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            background: var(--surface-card);
        }

        .branch-label.yes { color: var(--emerald); border: 1px solid var(--emerald); }
        .branch-label.no { color: var(--rose); border: 1px solid var(--rose); }

        .tree-outcome {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .outcome-single { background: rgba(16, 185, 129, 0.2); color: var(--emerald); }
        .outcome-parallel { background: rgba(139, 92, 246, 0.2); color: var(--violet); }
        .outcome-composer { background: rgba(0, 212, 255, 0.2); color: var(--cyan); }
        .outcome-clarify { background: rgba(245, 158, 11, 0.2); color: var(--amber); }

        /* Tool Registry */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .tool-category {
            background: var(--surface-card);
            border-radius: 16px;
            padding: 1.5rem;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .category-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .category-header h4 {
            font-size: 1rem;
            font-weight: 600;
        }

        .tool-list {
            list-style: none;
        }

        .tool-item {
            padding: 0.75rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            background: rgba(0,0,0,0.2);
            transition: all 0.2s ease;
        }

        .tool-item:hover {
            background: rgba(0,0,0,0.4);
        }

        .tool-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .tool-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .tool-deps {
            display: flex;
            gap: 0.25rem;
            margin-top: 0.5rem;
            flex-wrap: wrap;
        }

        .dep-badge {
            font-size: 0.65rem;
            padding: 0.15rem 0.5rem;
            border-radius: 100px;
            background: rgba(0, 212, 255, 0.2);
            color: var(--cyan);
        }

        /* Memory Integration */
        .memory-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 2rem;
        }

        @media (max-width: 800px) {
            .memory-diagram {
                grid-template-columns: 1fr;
            }
        }

        .memory-layer {
            background: var(--surface-card);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .memory-layer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }

        .memory-working::before { background: var(--rose); }
        .memory-episodic::before { background: var(--cyan); }
        .memory-semantic::before { background: var(--violet); }

        .memory-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .memory-layer h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .memory-backend {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .memory-uses {
            list-style: none;
            text-align: left;
        }

        .memory-uses li {
            font-size: 0.85rem;
            color: var(--text-secondary);
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .memory-uses li:last-child {
            border-bottom: none;
        }

        /* Code Examples */
        .code-block {
            background: rgba(0,0,0,0.4);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .code-block pre {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .code-block .keyword { color: var(--violet); }
        .code-block .string { color: var(--emerald); }
        .code-block .comment { color: var(--text-muted); font-style: italic; }
        .code-block .function { color: var(--cyan); }
        .code-block .class { color: var(--amber); }

        /* Flow Diagram */
        .flow-diagram {
            background: var(--surface-dark);
            border-radius: 20px;
            padding: 3rem;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }

        .flow-steps {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .flow-step {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1rem 2rem;
            background: var(--surface-card);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            min-width: 400px;
            max-width: 100%;
        }

        .flow-step-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .flow-step-content {
            text-align: left;
        }

        .flow-step-content h5 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .flow-step-content p {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .flow-arrow {
            font-size: 1.5rem;
            color: var(--text-muted);
        }

        /* Footer */
        footer {
            border-top: 1px solid rgba(255,255,255,0.1);
            padding: 3rem 0;
            margin-top: 4rem;
            text-align: center;
        }

        footer p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: var(--surface-card);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
            font-size: 0.9rem;
        }

        .tab-btn:hover {
            background: var(--surface-hover);
            color: var(--text-primary);
        }

        .tab-btn.active {
            background: var(--cyan);
            color: var(--midnight);
            border-color: var(--cyan);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        .data-table th,
        .data-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .data-table th {
            font-weight: 600;
            color: var(--text-primary);
            background: rgba(0,0,0,0.2);
        }

        .data-table td {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .data-table tr:hover td {
            background: rgba(255,255,255,0.02);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .pipeline-flow::before {
                display: none;
            }

            .pipeline-stage {
                max-width: 100%;
            }

            .flow-step {
                min-width: 100%;
            }

            .tree-branches {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-gradient"></div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">E2I</div>
                    <div class="logo-text">Causal Analytics</div>
                </div>
                <div class="version-badge">v4.2.0 ‚Ä¢ Tool Composer</div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Hero -->
        <section class="hero">
            <h1>Tool Composer<br>Orchestration Architecture</h1>
            <p>Intelligent query routing and multi-tool composition for complex, multi-faceted analytical queries with data dependencies between sub-questions.</p>
            <div class="hero-stats">
                <div class="stat">
                    <div class="stat-value">4</div>
                    <div class="stat-label">Classification Stages</div>
                </div>
                <div class="stat">
                    <div class="stat-value">4</div>
                    <div class="stat-label">Composition Phases</div>
                </div>
                <div class="stat">
                    <div class="stat-value">14</div>
                    <div class="stat-label">Composable Tools</div>
                </div>
                <div class="stat">
                    <div class="stat-value">6</div>
                    <div class="stat-label">Source Agents</div>
                </div>
            </div>
        </section>

        <!-- Overview -->
        <section id="overview">
            <div class="section-header">
                <div class="section-label">System Overview</div>
                <h2>What is Tool Composer?</h2>
                <p class="section-desc">Tool Composer handles multi-faceted queries that span multiple domains and have data dependencies between sub-questions.</p>
            </div>

            <div class="overview-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon" style="background: rgba(0, 212, 255, 0.2); color: var(--cyan);">üéØ</div>
                        <h3>The Problem</h3>
                    </div>
                    <p>Complex queries like "What was the impact of Q3 campaigns, which HCPs responded best, and what if we expanded to the Midwest?" span multiple analytical domains with outputs that feed into subsequent questions.</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon" style="background: rgba(139, 92, 246, 0.2); color: var(--violet);">üîß</div>
                        <h3>The Solution</h3>
                    </div>
                    <p>Tool Composer decomposes queries into atomic sub-questions, builds a dependency-aware execution plan, orchestrates tool execution, and synthesizes results into a coherent response.</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon" style="background: rgba(16, 185, 129, 0.2); color: var(--emerald);">‚ö°</div>
                        <h3>Key Advantage</h3>
                    </div>
                    <p>Unlike simple parallel delegation, Tool Composer respects data dependencies‚Äîensuring causal estimates complete before segmentation analysis begins, enabling proper result chaining.</p>
                </div>
            </div>
        </section>

        <!-- Classification Pipeline -->
        <section id="classifier">
            <div class="section-header">
                <div class="section-label">Classification Pipeline</div>
                <h2>4-Stage Query Classification</h2>
                <p class="section-desc">The Orchestrator classifier determines which routing pattern to use through a hybrid rule-based + LLM pipeline.</p>
            </div>

            <div class="pipeline-container">
                <div class="pipeline-title">
                    <h3>Query ‚Üí Classification ‚Üí Routing Pattern</h3>
                    <p>~10ms for simple queries, ~200-500ms for complex multi-domain queries</p>
                </div>

                <div class="pipeline-flow">
                    <div class="pipeline-stage stage-1">
                        <div class="stage-number">1</div>
                        <div class="stage-content">
                            <h4>Feature Extraction</h4>
                            <p>Extract structural, temporal, entity, and intent features from raw query text</p>
                            <span class="stage-badge badge-fast">~10ms ‚Ä¢ Rule-based</span>
                        </div>
                    </div>

                    <div class="pipeline-stage stage-2">
                        <div class="stage-number">2</div>
                        <div class="stage-content">
                            <h4>Domain Mapping</h4>
                            <p>Map features to agent capability domains with weighted confidence scores</p>
                            <span class="stage-badge badge-fast">~5ms ‚Ä¢ Rule-based</span>
                        </div>
                    </div>

                    <div class="pipeline-stage stage-3">
                        <div class="stage-number">3</div>
                        <div class="stage-content">
                            <h4>Dependency Detection</h4>
                            <p>Identify data dependencies between sub-questions using patterns + optional LLM</p>
                            <span class="stage-badge badge-smart">~200ms ‚Ä¢ Hybrid</span>
                        </div>
                    </div>

                    <div class="pipeline-stage stage-4">
                        <div class="stage-number">4</div>
                        <div class="stage-content">
                            <h4>Pattern Selection</h4>
                            <p>Select optimal routing pattern based on domains, dependencies, and complexity</p>
                            <span class="stage-badge badge-fast">~1ms ‚Ä¢ Deterministic</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="code-block">
                <pre><span class="comment"># Classification Pipeline Flow</span>
<span class="keyword">async def</span> <span class="function">classify</span>(query: <span class="class">str</span>, context: <span class="class">dict</span>) -> <span class="class">ClassificationResult</span>:
    <span class="comment"># Stage 1: Extract features (~10ms)</span>
    features = feature_extractor.extract(query, context)
    
    <span class="comment"># Stage 2: Map to domains (~5ms)</span>
    domain_mapping = domain_mapper.map_domains(features)
    
    <span class="comment"># Stage 3: Detect dependencies (optional LLM ~200ms)</span>
    dependencies = <span class="keyword">await</span> dependency_detector.detect(
        query, features, domain_mapping, use_llm=needs_llm
    )
    
    <span class="comment"># Stage 4: Select routing pattern (~1ms)</span>
    <span class="keyword">return</span> pattern_selector.select(features, domain_mapping, dependencies)</pre>
            </div>
        </section>

        <!-- Routing Decision Tree -->
        <section id="routing">
            <div class="section-header">
                <div class="section-label">Routing Logic</div>
                <h2>How Routing Decisions Are Made</h2>
                <p class="section-desc">The pattern selector follows a decision tree to determine the optimal routing pattern.</p>
            </div>

            <div class="decision-tree">
                <div class="tree-container">
                    <div class="tree-node question">
                        <strong>Is confidence ‚â• 0.5?</strong>
                    </div>
                    
                    <div class="tree-branches">
                        <div class="branch">
                            <span class="branch-label no">NO</span>
                            <div class="tree-outcome outcome-clarify">CLARIFICATION_NEEDED</div>
                        </div>
                        <div class="branch">
                            <span class="branch-label yes">YES</span>
                            <div class="tree-node question">
                                <strong>Multiple domains detected?</strong>
                            </div>
                        </div>
                    </div>

                    <div class="tree-branches" style="margin-top: 2rem;">
                        <div class="branch">
                            <span class="branch-label no">NO (Single Domain)</span>
                            <div class="tree-outcome outcome-single">SINGLE_AGENT</div>
                        </div>
                        <div class="branch">
                            <span class="branch-label yes">YES</span>
                            <div class="tree-node question">
                                <strong>Has data dependencies?</strong>
                            </div>
                        </div>
                    </div>

                    <div class="tree-branches" style="margin-top: 2rem;">
                        <div class="branch">
                            <span class="branch-label no">NO (Independent)</span>
                            <div class="tree-outcome outcome-parallel">PARALLEL_DELEGATION</div>
                        </div>
                        <div class="branch">
                            <span class="branch-label yes">YES (Dependencies)</span>
                            <div class="tree-outcome outcome-composer">TOOL_COMPOSER</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="overview-grid" style="margin-top: 2rem;">
                <div class="card">
                    <h3 style="color: var(--emerald);">SINGLE_AGENT</h3>
                    <p>Query targets one domain. Route directly to the appropriate agent.</p>
                    <div class="code-block" style="margin: 1rem 0 0;">
                        <pre><span class="string">"What was the impact of Q3 campaigns?"</span>
‚Üí causal_impact agent</pre>
                    </div>
                </div>

                <div class="card">
                    <h3 style="color: var(--violet);">PARALLEL_DELEGATION</h3>
                    <p>Multiple domains, but sub-questions are independent.</p>
                    <div class="code-block" style="margin: 1rem 0 0;">
                        <pre><span class="string">"Show Kisqali performance AND flag data issues"</span>
‚Üí gap_analyzer + drift_monitor (parallel)</pre>
                    </div>
                </div>

                <div class="card">
                    <h3 style="color: var(--cyan);">TOOL_COMPOSER</h3>
                    <p>Multiple domains with data dependencies between sub-questions.</p>
                    <div class="code-block" style="margin: 1rem 0 0;">
                        <pre><span class="string">"Which HCPs responded best to Q3 campaigns,
and what if we extended to Midwest?"</span>
‚Üí Tool Composer (sequential tools)</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Composer Phases -->
        <section id="composer">
            <div class="section-header">
                <div class="section-label">Tool Composer</div>
                <h2>4-Phase Composition Workflow</h2>
                <p class="section-desc">When Tool Composer is selected, it orchestrates multi-tool execution through four phases.</p>
            </div>

            <div class="phases-grid">
                <div class="phase-card phase-1">
                    <div class="phase-number">01</div>
                    <div class="phase-icon">üîç</div>
                    <h4>Decompose</h4>
                    <p>Break query into atomic sub-questions, each mappable to a single tool.</p>
                    <ul class="phase-details">
                        <li>Use classifier's pre-decomposition if available</li>
                        <li>Rule-based pattern matching</li>
                        <li>LLM fallback for complex cases</li>
                    </ul>
                </div>

                <div class="phase-card phase-2">
                    <div class="phase-number">02</div>
                    <div class="phase-icon">üìã</div>
                    <h4>Plan</h4>
                    <p>Build execution DAG with tool selection and dependency ordering.</p>
                    <ul class="phase-details">
                        <li>Check episodic memory for similar plans</li>
                        <li>Map sub-questions ‚Üí tools</li>
                        <li>Topological sort for execution order</li>
                        <li>Identify parallel groups</li>
                    </ul>
                </div>

                <div class="phase-card phase-3">
                    <div class="phase-number">03</div>
                    <div class="phase-icon">‚öôÔ∏è</div>
                    <h4>Execute</h4>
                    <p>Run tools respecting dependencies, maximize parallelism.</p>
                    <ul class="phase-details">
                        <li>Execute parallel groups concurrently</li>
                        <li>Pass outputs between dependent tools</li>
                        <li>Handle errors with retry/fallback</li>
                        <li>Store state in Redis</li>
                    </ul>
                </div>

                <div class="phase-card phase-4">
                    <div class="phase-number">04</div>
                    <div class="phase-icon">‚ú®</div>
                    <h4>Synthesize</h4>
                    <p>Combine tool outputs into coherent, user-facing response.</p>
                    <ul class="phase-details">
                        <li>LLM-based narrative synthesis</li>
                        <li>Preserve evidence and citations</li>
                        <li>Store episode in Supabase</li>
                        <li>Return unified response</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- End-to-End Flow -->
        <section id="flow">
            <div class="section-header">
                <div class="section-label">Complete Flow</div>
                <h2>End-to-End Query Processing</h2>
                <p class="section-desc">From user query to synthesized response‚Äîthe complete orchestration flow.</p>
            </div>

            <div class="flow-diagram">
                <div class="flow-steps">
                    <div class="flow-step">
                        <div class="flow-step-icon" style="background: rgba(139, 92, 246, 0.2); color: var(--violet);">üë§</div>
                        <div class="flow-step-content">
                            <h5>User Query</h5>
                            <p>"What was impact of Q3 programs, which HCPs responded best, and what if we expand?"</p>
                        </div>
                    </div>

                    <div class="flow-arrow">‚Üì</div>

                    <div class="flow-step">
                        <div class="flow-step-icon" style="background: rgba(0, 212, 255, 0.2); color: var(--cyan);">üéØ</div>
                        <div class="flow-step-content">
                            <h5>Orchestrator Classifier</h5>
                            <p>4-stage pipeline ‚Üí TOOL_COMPOSER pattern selected</p>
                        </div>
                    </div>

                    <div class="flow-arrow">‚Üì</div>

                    <div class="flow-step">
                        <div class="flow-step-icon" style="background: rgba(245, 158, 11, 0.2); color: var(--amber);">üîç</div>
                        <div class="flow-step-content">
                            <h5>Phase 1: Decompose</h5>
                            <p>Q1: Impact analysis ‚Üí Q2: Segment analysis ‚Üí Q3: Counterfactual simulation</p>
                        </div>
                    </div>

                    <div class="flow-arrow">‚Üì</div>

                    <div class="flow-step">
                        <div class="flow-step-icon" style="background: rgba(16, 185, 129, 0.2); color: var(--emerald);">üìã</div>
                        <div class="flow-step-content">
                            <h5>Phase 2: Plan</h5>
                            <p>causal_effect_estimator ‚Üí cate_analyzer ‚Üí counterfactual_simulator</p>
                        </div>
                    </div>

                    <div class="flow-arrow">‚Üì</div>

                    <div class="flow-step">
                        <div class="flow-step-icon" style="background: rgba(244, 63, 94, 0.2); color: var(--rose);">‚öôÔ∏è</div>
                        <div class="flow-step-content">
                            <h5>Phase 3: Execute</h5>
                            <p>Run tools in dependency order, pass outputs between steps</p>
                        </div>
                    </div>

                    <div class="flow-arrow">‚Üì</div>

                    <div class="flow-step">
                        <div class="flow-step-icon" style="background: rgba(139, 92, 246, 0.2); color: var(--violet);">‚ú®</div>
                        <div class="flow-step-content">
                            <h5>Phase 4: Synthesize</h5>
                            <p>Combine all tool outputs into unified narrative response</p>
                        </div>
                    </div>

                    <div class="flow-arrow">‚Üì</div>

                    <div class="flow-step">
                        <div class="flow-step-icon" style="background: rgba(0, 212, 255, 0.2); color: var(--cyan);">üí¨</div>
                        <div class="flow-step-content">
                            <h5>User Response</h5>
                            <p>"Q3 programs drove a 12.3% lift in adoption. High-volume oncologists showed 2.1x response..."</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tool Registry -->
        <section id="tools">
            <div class="section-header">
                <div class="section-label">Tool Registry</div>
                <h2>14 Composable Tools</h2>
                <p class="section-desc">Tools exposed by 6 agents for composition. Each tool has defined inputs, outputs, and dependencies.</p>
            </div>

            <div class="tools-grid">
                <!-- Causal Impact -->
                <div class="tool-category">
                    <div class="category-header">
                        <div class="category-icon" style="background: rgba(0, 212, 255, 0.2); color: var(--cyan);">üìä</div>
                        <h4>Causal Impact</h4>
                    </div>
                    <ul class="tool-list">
                        <li class="tool-item">
                            <div class="tool-name">causal_effect_estimator</div>
                            <div class="tool-desc">Estimates ATE with confidence intervals using DoWhy/EconML</div>
                            <div class="tool-deps">
                                <span class="dep-badge">ROOT TOOL</span>
                            </div>
                        </li>
                        <li class="tool-item">
                            <div class="tool-name">refutation_runner</div>
                            <div class="tool-desc">Runs DoWhy refutation tests on causal estimates</div>
                            <div class="tool-deps">
                                <span class="dep-badge">‚Üê causal_effect_estimator</span>
                            </div>
                        </li>
                        <li class="tool-item">
                            <div class="tool-name">sensitivity_analyzer</div>
                            <div class="tool-desc">E-value sensitivity analysis for unmeasured confounding</div>
                            <div class="tool-deps">
                                <span class="dep-badge">‚Üê causal_effect_estimator</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Heterogeneous Optimizer -->
                <div class="tool-category">
                    <div class="category-header">
                        <div class="category-icon" style="background: rgba(139, 92, 246, 0.2); color: var(--violet);">üéØ</div>
                        <h4>Heterogeneous Optimizer</h4>
                    </div>
                    <ul class="tool-list">
                        <li class="tool-item">
                            <div class="tool-name">cate_analyzer</div>
                            <div class="tool-desc">Computes CATE by segment using CausalForest</div>
                            <div class="tool-deps">
                                <span class="dep-badge">‚Üê causal_effect_estimator</span>
                            </div>
                        </li>
                        <li class="tool-item">
                            <div class="tool-name">segment_ranker</div>
                            <div class="tool-desc">Ranks segments by effect, ROI, or uplift</div>
                            <div class="tool-deps">
                                <span class="dep-badge">‚Üê cate_analyzer</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Gap Analyzer -->
                <div class="tool-category">
                    <div class="category-header">
                        <div class="category-icon" style="background: rgba(16, 185, 129, 0.2); color: var(--emerald);">üìà</div>
                        <h4>Gap Analyzer</h4>
                    </div>
                    <ul class="tool-list">
                        <li class="tool-item">
                            <div class="tool-name">gap_calculator</div>
                            <div class="tool-desc">Calculates performance gaps by entity</div>
                            <div class="tool-deps">
                                <span class="dep-badge">ROOT TOOL</span>
                            </div>
                        </li>
                        <li class="tool-item">
                            <div class="tool-name">roi_estimator</div>
                            <div class="tool-desc">Estimates ROI of closing gaps</div>
                            <div class="tool-deps">
                                <span class="dep-badge">‚Üê gap_calculator</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Experiment Designer -->
                <div class="tool-category">
                    <div class="category-header">
                        <div class="category-icon" style="background: rgba(245, 158, 11, 0.2); color: var(--amber);">üß™</div>
                        <h4>Experiment Designer</h4>
                    </div>
                    <ul class="tool-list">
                        <li class="tool-item">
                            <div class="tool-name">power_calculator</div>
                            <div class="tool-desc">Statistical power and sample size calculations</div>
                            <div class="tool-deps">
                                <span class="dep-badge">‚Üê causal_effect_estimator</span>
                                <span class="dep-badge">‚Üê cate_analyzer</span>
                            </div>
                        </li>
                        <li class="tool-item">
                            <div class="tool-name">counterfactual_simulator</div>
                            <div class="tool-desc">What-if scenario simulation</div>
                            <div class="tool-deps">
                                <span class="dep-badge">‚Üê causal_effect_estimator</span>
                                <span class="dep-badge">‚Üê cate_analyzer</span>
                                <span class="dep-badge">‚Üê gap_calculator</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Prediction Synthesizer -->
                <div class="tool-category">
                    <div class="category-header">
                        <div class="category-icon" style="background: rgba(236, 72, 153, 0.2); color: var(--tier5);">üîÆ</div>
                        <h4>Prediction Synthesizer</h4>
                    </div>
                    <ul class="tool-list">
                        <li class="tool-item">
                            <div class="tool-name">risk_scorer</div>
                            <div class="tool-desc">Scores entities by predicted risk</div>
                            <div class="tool-deps">
                                <span class="dep-badge">ROOT TOOL</span>
                            </div>
                        </li>
                        <li class="tool-item">
                            <div class="tool-name">propensity_estimator</div>
                            <div class="tool-desc">Propensity scores for treatment analysis</div>
                            <div class="tool-deps">
                                <span class="dep-badge">ROOT TOOL</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Drift Monitor -->
                <div class="tool-category">
                    <div class="category-header">
                        <div class="category-icon" style="background: rgba(244, 63, 94, 0.2); color: var(--rose);">üì°</div>
                        <h4>Drift Monitor</h4>
                    </div>
                    <ul class="tool-list">
                        <li class="tool-item">
                            <div class="tool-name">psi_calculator</div>
                            <div class="tool-desc">Population Stability Index for drift</div>
                            <div class="tool-deps">
                                <span class="dep-badge">ROOT TOOL</span>
                            </div>
                        </li>
                        <li class="tool-item">
                            <div class="tool-name">distribution_comparator</div>
                            <div class="tool-desc">Distribution comparison tests</div>
                            <div class="tool-deps">
                                <span class="dep-badge">ROOT TOOL</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Memory Integration -->
        <section id="memory">
            <div class="section-header">
                <div class="section-label">Tri-Memory Integration</div>
                <h2>Memory Architecture</h2>
                <p class="section-desc">Tool Composer integrates with the tri-memory system for state management, learning, and entity resolution.</p>
            </div>

            <div class="memory-diagram">
                <div class="memory-layer memory-working">
                    <div class="memory-icon">‚ö°</div>
                    <h4>Working Memory</h4>
                    <div class="memory-backend">Redis ‚Ä¢ TTL: 30min</div>
                    <ul class="memory-uses">
                        <li>Composition state tracking</li>
                        <li>Phase progress (DECOMPOSING ‚Üí EXECUTING)</li>
                        <li>Step-by-step results</li>
                        <li>Error recovery checkpoints</li>
                    </ul>
                </div>

                <div class="memory-layer memory-episodic">
                    <div class="memory-icon">üìö</div>
                    <h4>Episodic Memory</h4>
                    <div class="memory-backend">Supabase pgvector</div>
                    <ul class="memory-uses">
                        <li>composer_episodes table</li>
                        <li>Vector similarity for similar plans</li>
                        <li>Successful tool chains</li>
                        <li>User feedback for learning</li>
                    </ul>
                </div>

                <div class="memory-layer memory-semantic">
                    <div class="memory-icon">üß†</div>
                    <h4>Semantic Memory</h4>
                    <div class="memory-backend">FalkorDB Graph</div>
                    <ul class="memory-uses">
                        <li>Tool capability graph</li>
                        <li>Entity resolution (HCP IDs)</li>
                        <li>Discovered relationships</li>
                        <li>Domain knowledge enrichment</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Key Features -->
        <section id="features">
            <div class="section-header">
                <div class="section-label">Key Features</div>
                <h2>Architecture Highlights</h2>
            </div>

            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('dependency')">Dependency Handling</button>
                <button class="tab-btn" onclick="showTab('learning')">Episodic Learning</button>
                <button class="tab-btn" onclick="showTab('fallback')">Error Recovery</button>
                <button class="tab-btn" onclick="showTab('performance')">Performance</button>
            </div>

            <div id="dependency" class="tab-content active">
                <div class="card">
                    <h3>Dependency-Aware Execution</h3>
                    <p style="margin-bottom: 1.5rem;">Tool Composer detects and respects data dependencies between sub-questions, ensuring outputs flow correctly.</p>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Dependency Type</th>
                                <th>Pattern</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>REFERENCE_CHAIN</strong></td>
                                <td>Pronouns like "that", "those", "them"</td>
                                <td>"...and which of <em>those</em> HCPs..."</td>
                            </tr>
                            <tr>
                                <td><strong>CONDITIONAL</strong></td>
                                <td>"if X then Y" logic</td>
                                <td>"If the impact is positive, what if we expand?"</td>
                            </tr>
                            <tr>
                                <td><strong>LOGICAL_SEQUENCE</strong></td>
                                <td>Natural ordering required</td>
                                <td>Cause ‚Üí Effect ‚Üí Intervention</td>
                            </tr>
                            <tr>
                                <td><strong>ENTITY_TRANSFORMATION</strong></td>
                                <td>Entity filtered by earlier step</td>
                                <td>"Top segments" ‚Üí use in counterfactual</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="learning" class="tab-content">
                <div class="card">
                    <h3>Learning from Experience</h3>
                    <p style="margin-bottom: 1.5rem;">Tool Composer stores successful compositions in episodic memory and uses them to optimize future planning.</p>
                    
                    <div class="code-block">
                        <pre><span class="comment"># Finding similar past compositions</span>
similar = <span class="keyword">await</span> find_similar_compositions(
    query_embedding,
    limit=<span class="string">5</span>,
    min_similarity=<span class="string">0.7</span>
)

<span class="comment"># If found, reuse successful execution plan</span>
<span class="keyword">if</span> similar <span class="keyword">and</span> similar[<span class="string">0</span>].success:
    plan = adapt_plan(similar[<span class="string">0</span>].tool_plan, current_context)
    plan.estimated_from_cache = <span class="class">True</span></pre>
                    </div>
                </div>
            </div>

            <div id="fallback" class="tab-content">
                <div class="card">
                    <h3>Robust Error Recovery</h3>
                    <p style="margin-bottom: 1.5rem;">Multi-level fallback chains ensure graceful degradation when tools fail.</p>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Level</th>
                                <th>Strategy</th>
                                <th>When Used</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Retry with exponential backoff</td>
                                <td>Transient errors (timeout, rate limit)</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Retry with modified parameters</td>
                                <td>Parameter validation errors</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Alternative tool substitution</td>
                                <td>Tool-specific failures</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Skip step with limitation note</td>
                                <td>Non-critical step failure</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Fall back to single-agent</td>
                                <td>Composition infrastructure failure</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="performance" class="tab-content">
                <div class="card">
                    <h3>Performance Optimization</h3>
                    <p style="margin-bottom: 1.5rem;">Tool Composer maximizes throughput through intelligent parallelization and caching.</p>
                    
                    <div class="overview-grid">
                        <div style="background: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 12px;">
                            <h4 style="color: var(--cyan); margin-bottom: 0.5rem;">Parallel Execution</h4>
                            <p style="font-size: 0.9rem; color: var(--text-secondary);">Independent tools execute concurrently. Only dependent tools wait for predecessors.</p>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 12px;">
                            <h4 style="color: var(--violet); margin-bottom: 0.5rem;">Hybrid Classification</h4>
                            <p style="font-size: 0.9rem; color: var(--text-secondary);">70% of queries handled by fast rule-based layer (~10ms). LLM only for complex cases.</p>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 12px;">
                            <h4 style="color: var(--emerald); margin-bottom: 0.5rem;">Plan Caching</h4>
                            <p style="font-size: 0.9rem; color: var(--text-secondary);">Similar queries reuse successful plans from episodic memory, skipping planning phase.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Summary -->
        <section id="summary">
            <div class="section-header">
                <div class="section-label">Summary</div>
                <h2>When to Use Each Pattern</h2>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Pattern</th>
                        <th>Use When</th>
                        <th>Example Query</th>
                        <th>Latency</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span style="color: var(--emerald); font-weight: 600;">SINGLE_AGENT</span></td>
                        <td>Query targets one analytical domain</td>
                        <td>"What was the impact of Q3 campaigns?"</td>
                        <td>500ms - 3s</td>
                    </tr>
                    <tr>
                        <td><span style="color: var(--violet); font-weight: 600;">PARALLEL_DELEGATION</span></td>
                        <td>Multiple domains, independent sub-questions</td>
                        <td>"Show performance AND flag data issues"</td>
                        <td>1s - 5s</td>
                    </tr>
                    <tr>
                        <td><span style="color: var(--cyan); font-weight: 600;">TOOL_COMPOSER</span></td>
                        <td>Multiple domains with data dependencies</td>
                        <td>"Which HCPs responded best, then simulate expansion"</td>
                        <td>3s - 15s</td>
                    </tr>
                    <tr>
                        <td><span style="color: var(--amber); font-weight: 600;">CLARIFICATION_NEEDED</span></td>
                        <td>Query too ambiguous to classify</td>
                        <td>"Tell me about that thing from before"</td>
                        <td>~100ms</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>E2I Causal Analytics ‚Ä¢ Tool Composer Architecture v4.2.0 ‚Ä¢ December 2024</p>
        </div>
    </footer>

    <script>
        function showTab(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Deactivate all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
            
            // Activate clicked button
            event.target.classList.add('active');
        }

        // Add smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Add intersection observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(section);
        });
    </script>
</body>
</html>
