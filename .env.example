# =============================================================================
# E2I Causal Analytics - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# IMPORTANT: Use Unix line endings (LF), not Windows (CRLF)
# To fix: sed -i 's/\r$//' .env
# =============================================================================

# -----------------------------------------------------------------------------
# LLM Provider Configuration
# -----------------------------------------------------------------------------
# Switch between providers: "anthropic" (default) or "openai"
LLM_PROVIDER=anthropic

# Anthropic API (required if LLM_PROVIDER=anthropic)
ANTHROPIC_API_KEY=sk-ant-...
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# OpenAI API (required if LLM_PROVIDER=openai)
OPENAI_API_KEY=sk-proj-...

# -----------------------------------------------------------------------------
# Supabase Configuration (Required)
# -----------------------------------------------------------------------------
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_KEY=eyJ...
SUPABASE_JWT_SECRET=your-jwt-secret

# Legacy aliases (for backward compatibility)
SUPABASE_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6382
REDIS_PASSWORD=
REDIS_SOCKET_TIMEOUT=3.0
REDIS_MAX_CONNECTIONS=10

# Celery (uses Redis)
CELERY_BROKER_URL=redis://localhost:6382/1
CELERY_RESULT_BACKEND=redis://localhost:6382/2

# -----------------------------------------------------------------------------
# FalkorDB (Graph Database)
# -----------------------------------------------------------------------------
FALKORDB_HOST=localhost
FALKORDB_PORT=6381
FALKORDB_GRAPH_NAME=e2i_causal
FALKORDB_URL=redis://localhost:6381
FALKORDB_PASSWORD=          # Required in production (min 32 chars)

# -----------------------------------------------------------------------------
# Observability - Opik
# -----------------------------------------------------------------------------
OPIK_ENABLED=true
OPIK_API_KEY=
OPIK_WORKSPACE=default
OPIK_PROJECT_NAME=e2i-causal-analytics
OPIK_ENDPOINT=
OPIK_URL_OVERRIDE=
OPIK_USE_LOCAL=false
OPIK_SAMPLE_RATE=1.0
OPIK_ALWAYS_SAMPLE_ERRORS=true

# -----------------------------------------------------------------------------
# Observability - MLflow
# -----------------------------------------------------------------------------
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_ARTIFACT_URI=

# -----------------------------------------------------------------------------
# BentoML Model Serving
# -----------------------------------------------------------------------------
BENTOML_SERVICE_URL=http://localhost:3000
BENTOML_TIMEOUT=10.0
BENTOML_MAX_RETRIES=3
BENTOML_MAX_CONNECTIONS=20
BENTOML_ENABLE_TRACING=true

# Individual model endpoints (optional overrides)
CHURN_MODEL_URL=http://localhost:3000
CONVERSION_MODEL_URL=http://localhost:3001
CAUSAL_MODEL_URL=http://localhost:3002

# Model client settings
MODEL_CLIENT_TIMEOUT=5.0
MODEL_CLIENT_MAX_RETRIES=3
MODEL_CLIENT_MAX_CONNECTIONS=10
MODEL_CLIENT_ENABLE_TRACING=true

# -----------------------------------------------------------------------------
# Environment & Runtime
# -----------------------------------------------------------------------------
# Options: development, staging, production
ENVIRONMENT=development

# E2I-specific environment: local_pilot, aws_production
E2I_ENVIRONMENT=local_pilot

# Optional config path override
E2I_CONFIG_PATH=

# Use mock models for testing
E2I_USE_MOCK_MODELS=false

# -----------------------------------------------------------------------------
# API & Security
# -----------------------------------------------------------------------------
# CORS allowed origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# Rate limiting
RATE_LIMIT_DEFAULT=100
RATE_LIMIT_WINDOW=60

# HSTS (only enable in production with HTTPS)
ENABLE_HSTS=false

# -----------------------------------------------------------------------------
# DigitalOcean (Infrastructure)
# -----------------------------------------------------------------------------
DIGITALOCEAN_TOKEN=

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
WORKER_TYPE=default

# -----------------------------------------------------------------------------
# Monitoring - Prometheus (optional)
# -----------------------------------------------------------------------------
PROMETHEUS_URL=http://localhost:9090

# -----------------------------------------------------------------------------
# Drift Monitor
# -----------------------------------------------------------------------------
DRIFT_MONITOR_CONNECTOR=

# -----------------------------------------------------------------------------
# Observability - Grafana
# -----------------------------------------------------------------------------
GRAFANA_ADMIN_PASSWORD=     # Required - Grafana admin password

# -----------------------------------------------------------------------------
# Database Monitoring
# -----------------------------------------------------------------------------
SUPABASE_DB_URL=            # PostgreSQL connection string for postgres-exporter
# Format: postgresql://user:password@db.your-project.supabase.co:5432/postgres?sslmode=require

# -----------------------------------------------------------------------------
# Alerting
# -----------------------------------------------------------------------------
ALERTMANAGER_WEBHOOK_URL=   # Generic webhook for alert notifications (Slack, Discord, etc.)

# -----------------------------------------------------------------------------
# Opik (REQUIRED for opik overlay)
# -----------------------------------------------------------------------------
OPIK_MYSQL_ROOT_PASSWORD=   # Required - Opik MySQL root password
OPIK_MYSQL_PASSWORD=        # Required - Opik MySQL user password
OPIK_REDIS_PASSWORD=        # Required - Opik Redis password
OPIK_CLICKHOUSE_PASSWORD=   # Required - Opik ClickHouse password
OPIK_MINIO_ROOT_USER=       # Required - Opik MinIO access key
OPIK_MINIO_ROOT_PASSWORD=   # Required - Opik MinIO secret key

# -----------------------------------------------------------------------------
# Flower / Redis Commander (REQUIRED for dev-tools profile)
# -----------------------------------------------------------------------------
FLOWER_USER=                # Required - Flower dashboard username
FLOWER_PASSWORD=            # Required - Flower dashboard password
