# Tier 1-5 Agent Test Results

**Generated**: 2026-01-29T00:51:14.328427

## Test Configuration

- **Tiers Tested**: 2
- **Agents Tested**: all
- **Tier0 Cache**: scripts/tier0_output_cache/latest.pkl
- **Observability**: skipped
- **Timeout**: 180.0s per agent

## Results

```

======================================================================
TIER 1-5 AGENT TESTING FRAMEWORK
======================================================================
  Loading tier0 state from cache: scripts/tier0_output_cache/latest.pkl
Tier0 Experiment ID: tier0_e2e_e480790c
Data Source Validation: Enabled
Agents to Test: 3
Agents: causal_impact, gap_analyzer, heterogeneous_optimizer

Tier0 Data:
  eligible_df: 600 rows x 14 columns
  trained_model: LogisticRegression
  feature_importance: 3 features
  validation_metrics: ['accuracy', 'precision', 'recall', 'f1_score', 'f1_macro', 'f1_weighted', 'precision_class_0', 'precision_class_1', 'recall_class_0', 'recall_class_1', 'roc_auc', 'pr_auc', 'brier_score']
üèÉ View run analysis_20260129_005059 at: http://localhost:5000/#/experiments/219/runs/8965aca1230248c1b8754d5b1412278e
üß™ View experiment at: http://localhost:5000/#/experiments/219

======================================================================
AGENT: CAUSAL_IMPACT (Tier 2 - Causal Analytics)
======================================================================

  üì• Input Summary:
    ‚Ä¢ query: What is the causal effect of hcp_visits on discont...
    ‚Ä¢ query_id: 28d4bc1b-3765-4cfd-b6d7-ef217ba833c8
    ‚Ä¢ treatment_var: hcp_visits
    ‚Ä¢ outcome_var: discontinuation_flag
    ‚Ä¢ confounders_count: 2
    ‚Ä¢ data_source: patient_journeys
    ‚Ä¢ experiment_id: tier0_e2e_e480790c
    ‚Ä¢ data_rows: 600
    ‚Ä¢ data_columns: 14

  ‚öôÔ∏è  Processing:
    ‚úÖ Agent causal_impact instantiated
    ‚úÖ Input validation passed
    ‚úÖ Agent execution completed
    ‚ùå Contract validation (CausalImpactOutput)
    ‚úÖ Quality gate validation

  üîç Validation Checks:
    ‚Ä¢ Required fields present: ‚úÖ PASS
        Expected: 19 required fields
        Actual:   19/19 present
    ‚Ä¢ Type validation: ‚ùå FAIL
        Expected: no type errors
        Actual:   1 type errors
    ‚Ä¢ Quality gate: ‚úÖ PASS
        Expected: 5 checks pass
        Actual:   5/5 passed
    ‚Ä¢ Overall result: ‚úÖ PASS
        Expected: success
        Actual:   PASS

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    execution_time            9.6538          -               -         
    agent_tier                2               -               -         
    required_fields           19/19           -               -         
    optional_fields           12/29           -               -         
    contract_valid            False           True            ‚ùå         
    confidence                0.7650          -               -         
    p_value                   0.0010          -               -         

  üí° CAUSAL_IMPACT Analysis:
    ‚Ä¢ Average Treatment Effect (ATE): N/A
    ‚Ä¢ Statistical significance: p=0.0010

  üìã Key Output Fields:
    status: completed
    executive_summary: Analysis identified a statistically significant positive causal effect (ATE: 0.2988) using CausalFor...
    query_id: 28d4bc1b-3765-4cfd-b6d7-ef217ba833c8
    causal_narrative: The causal analysis using CausalForestDML estimates an average treatment effect (ATE) of 0.30 (95% C...
    ate_estimate: 0.2988
    confidence_interval: (0.20075573212524708, 0.39675573212524706)
    ... and 25 more fields

  üìä Quality Gate:
    ‚Ä¢ Checks: 5/5 passed
    ‚Ä¢ Required output fields: status
    ‚Ä¢ QUALITY GATE: ‚úÖ PASS

  ‚ö†Ô∏è  Type Errors:
    ‚Ä¢ mechanism_explanation: expected <class 'str'>, got None

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - causal_impact completed successfully (9.7s)
  ------------------------------------------------------------
üèÉ View run gap_analysis_20260129_005109 at: http://localhost:5000/#/experiments/220/runs/deafbca87f60405188ecff4400e81ae3
üß™ View experiment at: http://localhost:5000/#/experiments/220

======================================================================
AGENT: GAP_ANALYZER (Tier 2 - Causal Analytics)
======================================================================

  üì• Input Summary:
    ‚Ä¢ query: Identify performance gaps and ROI opportunities
    ‚Ä¢ metrics_count: 3
    ‚Ä¢ segments_count: 3
    ‚Ä¢ brand: Kisqali
    ‚Ä¢ time_period: current_quarter
    ‚Ä¢ gap_type: vs_potential
    ‚Ä¢ tier0_data_rows: 600
    ‚Ä¢ tier0_data_columns: 14

  ‚öôÔ∏è  Processing:
    ‚úÖ Agent gap_analyzer instantiated
    ‚úÖ Input validation passed
    ‚úÖ Agent execution completed
    ‚úÖ Contract validation (GapAnalyzerOutput)
    ‚úÖ Quality gate validation

  üîç Validation Checks:
    ‚Ä¢ Required fields present: ‚úÖ PASS
        Expected: 14 required fields
        Actual:   14/14 present
    ‚Ä¢ Type validation: ‚úÖ PASS
        Expected: no type errors
        Actual:   all types valid
    ‚Ä¢ Quality gate: ‚úÖ PASS
        Expected: 5 checks pass
        Actual:   5/5 passed
    ‚Ä¢ Overall result: ‚úÖ PASS
        Expected: success
        Actual:   PASS

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    execution_time            1.6888          -               -         
    agent_tier                2               -               -         
    required_fields           14/14           -               -         
    optional_fields           1/7             -               -         
    contract_valid            True            True            ‚úÖ         
    confidence                0.9000          -               -         

  üí° GAP_ANALYZER Analysis:
    ‚Ä¢ Identified N/A performance gaps
    ‚Ä¢ Total opportunity value: 796.1618

  üìã Key Output Fields:
    executive_summary: Identified 10 ROI opportunities across 3 segments with total addressable value of $235,620. Top oppo...
    prioritized_opportunities: [10 items]
      [0]: {'rank': 1, 'gap': {'gap_id': 'age_group_50-65_trx_vs_potential', 'metric': 'trx', 'segment': 'age_group', 'segment_value': '50-65', 'current_value': 203.0, 'target_value': 284.2, 'gap_size': 81.19999999999999, 'gap_percentage': 28.57142857142857, 'gap_type': 'vs_potential'}, 'roi_estimate': {'gap_id': 'age_group_50-65_trx_vs_potential', 'estimated_revenue_impact': 24156.999999999993, 'estimated_cost_to_close': 12500.0, 'expected_roi': 0.9325599999999994, 'risk_adjusted_roi': 0.8393039999999995, 'payback_period_months': 6, 'confidence_interval': {'lower_bound': -0.3168749104916077, 'median': 1.1561526529943924, 'upper_bound': 13.807896563636849, 'probability_positive': 0.548, 'probability_target': 0.122}, 'attribution_level': 'shared', 'attribution_rate': 0.35, 'total_risk_adjustment': 0.09999999999999998, 'value_by_driver': {'trx_lift': 69019.99999999999}, 'confidence': 0.548, 'assumptions': ['Value driver: trx_lift', 'Unit value: $850/TRx', 'Attribution level: shared (35%)', 'Risk adjustment applied based on low-to-medium risk factors', 'Bootstrap CI from 1,000 Monte Carlo simulations', 'Market conditions assumed stable']}, 'recommended_action': 'Launch targeted sampling campa...'}...
    quick_wins: []
    strategic_bets: []
    total_addressable_value: 235620.0000
    total_gap_value: 796.1618
    ... and 9 more fields

  üìä Quality Gate:
    ‚Ä¢ Checks: 5/5 passed
    ‚Ä¢ Required output fields: executive_summary
    ‚Ä¢ QUALITY GATE: ‚úÖ PASS

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - gap_analyzer completed successfully (1.7s)
  ------------------------------------------------------------
üèÉ View run cate_analysis_20260129_005111 at: http://localhost:5000/#/experiments/218/runs/eb893a9aa02048cab0f9b09b0d3afe19
üß™ View experiment at: http://localhost:5000/#/experiments/218

======================================================================
AGENT: HETEROGENEOUS_OPTIMIZER (Tier 2 - Causal Analytics)
======================================================================

  üì• Input Summary:
    ‚Ä¢ query: Analyze heterogeneous treatment effects of hcp_vis...
    ‚Ä¢ treatment_var: hcp_visits
    ‚Ä¢ outcome_var: discontinuation_flag
    ‚Ä¢ segment_vars_count: 3
    ‚Ä¢ effect_modifiers_count: 3
    ‚Ä¢ data_source: patient_journeys
    ‚Ä¢ filters: None
    ‚Ä¢ tier0_data_rows: 600
    ‚Ä¢ tier0_data_columns: 14

  ‚öôÔ∏è  Processing:
    ‚úÖ Agent heterogeneous_optimizer instantiated
    ‚úÖ Input validation passed
    ‚úÖ Agent execution completed
    ‚úÖ Contract validation (HeterogeneousOptimizerOutput)
    ‚úÖ Quality gate validation

  üîç Validation Checks:
    ‚Ä¢ Required fields present: ‚úÖ PASS
        Expected: 6 required fields
        Actual:   6/6 present
    ‚Ä¢ Type validation: ‚úÖ PASS
        Expected: no type errors
        Actual:   all types valid
    ‚Ä¢ Quality gate: ‚úÖ PASS
        Expected: 4 checks pass
        Actual:   4/4 passed
    ‚Ä¢ Overall result: ‚úÖ PASS
        Expected: success
        Actual:   PASS

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    execution_time            3.5061          -               -         
    agent_tier                2               -               -         
    required_fields           6/6             -               -         
    optional_fields           11/33           -               -         
    contract_valid            True            True            ‚úÖ         
    overall_ate               0.0000          -               -         
    heterogeneity_score       0.0000          -               -         
    confidence                0.7000          -               -         

  üí° HETEROGENEOUS_OPTIMIZER Analysis:
    ‚Ä¢ Heterogeneity score: 0.0000
    ‚Ä¢ Analyzed N/A patient segments

  üìã Key Output Fields:
    overall_ate: 0.0000
    heterogeneity_score: 0.0000
    executive_summary: Heterogeneous effect analysis complete. Overall treatment effect: 0.000. Limited heterogeneity detec...
    status: completed
    high_responders: []
    low_responders: []
    ... and 14 more fields

  üìä Quality Gate:
    ‚Ä¢ Checks: 4/4 passed
    ‚Ä¢ Required output fields: status
    ‚Ä¢ QUALITY GATE: ‚úÖ PASS

  ‚ö†Ô∏è  Warnings (1):
    ‚Ä¢ Extra fields not in contract: ['feature_importance', 'estimation_laten...

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - heterogeneous_optimizer completed successfully (3.5s)
  ------------------------------------------------------------

======================================================================
TEST SUMMARY
======================================================================

TIER RESULTS:
------------------------------------------------------------

  Tier 2 - Causal Analytics: ALL PASSED
    ‚úì causal_impact (9.65s)
    ‚úì gap_analyzer (1.69s)
    ‚úì heterogeneous_optimizer (3.51s)

------------------------------------------------------------

OVERALL: [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100.0%
  Total Agents: 3
  Passed: 3
  Failed: 0
  Total Time: 19.52s
  Avg Time/Agent: 6.51s

QUALITY GATES:
  Passed: 3/3
  Failed: 0/3

CONTRACT VALIDATION:
  Valid Contracts: 2/3
  Total Type Errors: 1

OBSERVABILITY:
  Traces Created: 0
  Traces Verified: 0
```
