{
  "openapi": "3.1.0",
  "info": {
    "title": "E2I Causal Analytics Platform",
    "description": "21-Agent architecture for causal inference, ML interpretability, and digital twin generation",
    "version": "4.2.1",
    "contact": {
      "name": "E2I Causal Analytics Team",
      "email": "support@eznomics.site"
    },
    "license": {
      "name": "Proprietary"
    }
  },
  "paths": {
    "/": {
      "get": {
        "tags": [
          "Root"
        ],
        "summary": "Root",
        "description": "Root endpoint with API information.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Root  Get"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health Check",
        "description": "Health check endpoint for container orchestration.\n\nUsed by:\n- Docker Compose healthcheck\n- Kubernetes liveness/readiness probes\n- Load balancers",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Health Check Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/healthz": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Healthz",
        "description": "Kubernetes-style health check (alias for /health).",
        "operationId": "healthz_healthz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response Healthz Healthz Get"
                }
              }
            }
          }
        }
      }
    },
    "/health/bentoml": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Bentoml Health Check",
        "description": "Detailed health check for BentoML model serving endpoints.\n\nReturns health status for each configured model endpoint.",
        "operationId": "bentoml_health_check_health_bentoml_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Bentoml Health Check Health Bentoml Get"
                }
              }
            }
          }
        }
      }
    },
    "/ready": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Readiness Check",
        "description": "Readiness check - determines if service can accept traffic.\n\nChecks:\n- Redis connectivity (required)\n- Supabase connectivity (required)\n- FalkorDB connectivity (optional)\n\nReturns:\n    200 if ready to serve requests\n    503 if required dependencies are unavailable",
        "operationId": "readiness_check_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Readiness Check Ready Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/explain/predict": {
      "post": {
        "tags": [
          "Model Interpretability"
        ],
        "summary": "Get prediction with real-time SHAP explanation",
        "description": "Returns a model prediction along with SHAP-based feature explanations.\n\n    **Use Cases:**\n    - Field rep needs to explain why a patient was flagged\n    - HCP wants to understand recommendation reasoning\n    - Regulatory audit requires decision documentation\n\n    **Performance:**\n    - TreeExplainer: ~50-150ms (tree-based models)\n    - KernelExplainer: ~500-2000ms (other models)\n\n    **Compliance:**\n    - Set `store_for_audit=True` to persist explanation for regulatory review",
        "operationId": "explain_prediction",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExplainRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExplainResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/explain/predict/batch": {
      "post": {
        "tags": [
          "Model Interpretability"
        ],
        "summary": "Batch predictions with SHAP explanations",
        "description": "Process up to 50 patients in a single request. Useful for pre-computing explanations.",
        "operationId": "explain_batch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchExplainRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchExplainResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/explain/history/{patient_id}": {
      "get": {
        "tags": [
          "Model Interpretability"
        ],
        "summary": "Get explanation history for a patient",
        "description": "Retrieve past explanations for audit or review purposes.",
        "operationId": "get_explanation_history",
        "parameters": [
          {
            "name": "patient_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Patient Id"
            }
          },
          {
            "name": "model_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/ModelType"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Model Type"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Explanation History"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/explain/models": {
      "get": {
        "tags": [
          "Model Interpretability"
        ],
        "summary": "List available models for explanation",
        "description": "Returns models that support real-time SHAP explanations.",
        "operationId": "list_explainable_models",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response List Explainable Models"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/explain/health": {
      "get": {
        "tags": [
          "Model Interpretability"
        ],
        "summary": "Health check for interpretability service",
        "description": "Health check endpoint for the interpretability service.",
        "operationId": "health_check",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Health Check"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/memory/search": {
      "post": {
        "tags": [
          "Memory System"
        ],
        "summary": "Search memory systems",
        "description": "Execute hybrid search across memory systems.\n\nCombines:\n- Dense retrieval (vector similarity via episodic/procedural)\n- Sparse retrieval (BM25-like full-text search)\n- Graph retrieval (FalkorDB semantic traversal)\n\nUses Reciprocal Rank Fusion for result combining.",
        "operationId": "search_memory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MemorySearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemorySearchResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/memory/episodic": {
      "post": {
        "tags": [
          "Memory System"
        ],
        "summary": "Create episodic memory",
        "description": "Insert a new episodic memory.\n\nCreates an embedding and stores in Supabase with pgvector.\nUsed to capture significant interactions for future retrieval.",
        "operationId": "create_episodic_memory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EpisodicMemoryInput"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodicMemoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/memory/episodic/{memory_id}": {
      "get": {
        "tags": [
          "Memory System"
        ],
        "summary": "Get episodic memory",
        "description": "Retrieve a specific episodic memory by ID.",
        "operationId": "get_episodic_memory",
        "parameters": [
          {
            "name": "memory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Memory Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodicMemoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/memory/procedural/feedback": {
      "post": {
        "tags": [
          "Memory System"
        ],
        "summary": "Record procedural feedback",
        "description": "Record outcome feedback for a procedural memory.\n\nUpdates the procedure's success rate based on the outcome.\nUsed by Feedback Learner for continuous improvement.",
        "operationId": "record_procedural_feedback",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProceduralFeedbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProceduralFeedbackResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/memory/semantic/paths": {
      "get": {
        "tags": [
          "Memory System"
        ],
        "summary": "Query semantic paths",
        "description": "Query semantic graph for causal paths.\n\nTraverses FalkorDB semantic memory to find:\n- Causal chains impacting KPIs\n- Entity relationships\n- Influence networks",
        "operationId": "query_semantic_paths",
        "parameters": [
          {
            "name": "kpi_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Kpi Name"
            }
          },
          {
            "name": "start_entity_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start Entity Id"
            }
          },
          {
            "name": "relationship_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "causal_path",
              "title": "Relationship Type"
            }
          },
          {
            "name": "max_depth",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 3,
              "title": "Max Depth"
            }
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.5,
              "title": "Min Confidence"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SemanticPathResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/memory/stats": {
      "get": {
        "tags": [
          "Memory System"
        ],
        "summary": "Get memory statistics",
        "description": "Get statistics about the memory systems.\n\nReturns counts and metrics for each memory type:\n- Episodic: total memories, recent 24h count\n- Procedural: total procedures, average success rate\n- Semantic: total entities (nodes), total relationships",
        "operationId": "get_memory_stats",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Memory Stats"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/cognitive/query": {
      "post": {
        "tags": [
          "Cognitive Workflow"
        ],
        "summary": "Process cognitive query",
        "description": "Process a query through the full cognitive workflow.\n\nWorkflow phases:\n1. **Summarize**: Compress working memory context\n2. **Investigate**: Retrieve relevant memories via hybrid search\n3. **Execute**: Route to appropriate agent and process\n4. **Reflect**: Store outcomes and record learning signals\n\nReturns response with evidence trail and confidence score.",
        "operationId": "process_cognitive_query",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CognitiveQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CognitiveQueryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/cognitive/session/{session_id}": {
      "get": {
        "tags": [
          "Cognitive Workflow"
        ],
        "summary": "Get cognitive session",
        "description": "Get the current state of a cognitive session.\n\nReturns:\n- Session context (user, brand, state)\n- Message history\n- Accumulated evidence trail\n- Memory retrieval statistics",
        "operationId": "get_cognitive_session",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Cognitive Workflow"
        ],
        "summary": "Delete cognitive session",
        "description": "Delete a cognitive session and its associated data.",
        "operationId": "delete_cognitive_session",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete Cognitive Session"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/cognitive/session": {
      "post": {
        "tags": [
          "Cognitive Workflow"
        ],
        "summary": "Create cognitive session",
        "description": "Create a new cognitive session.\n\nSessions maintain:\n- Working memory context\n- Message history\n- Evidence accumulation\n- Learning signals\n\nSessions expire after 1 hour of inactivity.",
        "operationId": "create_cognitive_session",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateSessionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/cognitive/rag": {
      "post": {
        "tags": [
          "Cognitive Workflow"
        ],
        "summary": "Cognitive RAG search",
        "description": "Execute DSPy-enhanced 4-phase cognitive RAG workflow.\n\nThis endpoint provides LLM-powered multi-hop reasoning through:\n\n**Phase 1 - Summarizer**:\n- Query rewriting for optimal retrieval\n- Entity extraction (brands, regions, KPIs)\n- Intent classification\n\n**Phase 2 - Investigator**:\n- Multi-hop evidence gathering\n- Adaptive retrieval across episodic, semantic, procedural memory\n- Evidence relevance scoring\n\n**Phase 3 - Agent**:\n- Evidence synthesis into coherent response\n- Agent routing for specialized processing\n- Visualization configuration\n\n**Phase 4 - Reflector**:\n- Memory worthiness assessment\n- Fact extraction for long-term storage\n- DSPy training signal collection\n\n**Performance**: Typical latency < 2s for simple queries.\n\n**Requirements**: ANTHROPIC_API_KEY environment variable must be set.\n\nReturns:\n    CognitiveRAGResponse with synthesized response, evidence trail,\n    and optimization signals.",
        "operationId": "cognitive_rag_search",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CognitiveRAGRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CognitiveRAGResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/nodes": {
      "get": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "List graph nodes",
        "description": "List nodes in the knowledge graph with filtering and pagination.\n\nSupports filtering by:\n- Entity types (HCP, Brand, Patient, etc.)\n- Text search across node names and properties",
        "operationId": "list_graph_nodes",
        "parameters": [
          {
            "name": "entity_types",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated entity types",
              "title": "Entity Types"
            },
            "description": "Comma-separated entity types"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "maxLength": 500
                },
                {
                  "type": "null"
                }
              ],
              "description": "Text search",
              "title": "Search"
            },
            "description": "Text search"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum results",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/NodeSortField",
              "description": "Sort field",
              "default": "created_at"
            },
            "description": "Sort field"
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/SortOrder",
              "description": "Sort order",
              "default": "desc"
            },
            "description": "Sort order"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListNodesResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/nodes/{node_id}": {
      "get": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Get node by ID",
        "description": "Get a specific node by ID.\n\nReturns full node details including all properties.",
        "operationId": "get_graph_node",
        "parameters": [
          {
            "name": "node_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Node Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GraphNode"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/nodes/{node_id}/network": {
      "get": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Get node relationship network",
        "description": "Get the relationship network around a node.\n\nReturns all connected nodes within max_depth hops, grouped by type.\nSupports Patient and HCP nodes with specialized network discovery.",
        "operationId": "get_node_network",
        "parameters": [
          {
            "name": "node_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Node Id"
            }
          },
          {
            "name": "max_depth",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 5,
              "minimum": 1,
              "description": "Maximum traversal depth",
              "default": 2,
              "title": "Max Depth"
            },
            "description": "Maximum traversal depth"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NodeNetworkResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/relationships": {
      "get": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "List graph relationships",
        "description": "List relationships in the knowledge graph with filtering.\n\nSupports filtering by:\n- Relationship types (CAUSES, IMPACTS, PRESCRIBES, etc.)\n- Source/target node IDs\n- Minimum confidence threshold",
        "operationId": "list_graph_relationships",
        "parameters": [
          {
            "name": "relationship_types",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated relationship types",
              "title": "Relationship Types"
            },
            "description": "Comma-separated relationship types"
          },
          {
            "name": "source_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by source node",
              "title": "Source Id"
            },
            "description": "Filter by source node"
          },
          {
            "name": "target_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by target node",
              "title": "Target Id"
            },
            "description": "Filter by target node"
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum confidence",
              "title": "Min Confidence"
            },
            "description": "Minimum confidence"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum results",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListRelationshipsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/traverse": {
      "post": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Traverse graph from node",
        "description": "Traverse the graph from a starting node.\n\nReturns a subgraph containing:\n- All nodes within max_depth hops\n- All relationships connecting them\n- Paths from start to discovered nodes",
        "operationId": "traverse_graph",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TraverseRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TraverseResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/causal-chains": {
      "post": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Query causal chains",
        "description": "Query causal chains in the knowledge graph.\n\nFinds chains of CAUSES/IMPACTS relationships connecting:\n- Entities to KPIs\n- Source to target entities\n- Upstream drivers to downstream outcomes",
        "operationId": "query_causal_chains",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CausalChainRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CausalChainResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/query": {
      "post": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Execute openCypher query",
        "description": "Execute an openCypher query against the graph.\n\nSupports:\n- MATCH, RETURN, WHERE clauses\n- Parameterized queries\n- Read-only enforcement (default)\n\nUse FalkorDB Browser at http://localhost:3030 for interactive queries.",
        "operationId": "execute_cypher_query",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CypherQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CypherQueryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/episodes": {
      "post": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Add knowledge episode",
        "description": "Add a knowledge episode to the graph.\n\nGraphiti automatically:\n- Extracts entities (HCP, Brand, Patient, etc.)\n- Discovers relationships\n- Links to existing graph nodes\n- Tracks temporal validity",
        "operationId": "add_graph_episode",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddEpisodeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddEpisodeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/search": {
      "post": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Search knowledge graph",
        "description": "Natural language search across the knowledge graph.\n\nUses Graphiti's semantic search to find relevant:\n- Entities matching the query\n- Related facts and relationships\n- Historical episodes",
        "operationId": "search_graph",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchGraphRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchGraphResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/stats": {
      "get": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Get graph statistics",
        "description": "Get knowledge graph statistics.\n\nReturns counts for:\n- Total nodes and relationships\n- Breakdown by entity/relationship type\n- Episode and community counts",
        "operationId": "get_graph_stats",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GraphStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/health": {
      "get": {
        "tags": [
          "Knowledge Graph"
        ],
        "summary": "Graph service health check",
        "description": "Health check for graph services.\n\nReturns status of:\n- Graphiti service\n- FalkorDB connection\n- WebSocket connections",
        "operationId": "graph_health_check",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Graph Health Check"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/rag/search": {
      "post": {
        "tags": [
          "Hybrid RAG"
        ],
        "summary": "Execute hybrid search",
        "description": "Perform hybrid search across vector, fulltext, and graph backends.\n\n    **Search Modes:**\n    - `hybrid`: Use all backends with RRF fusion (recommended)\n    - `vector`: Semantic similarity search only\n    - `fulltext`: Keyword-based search only\n    - `graph`: Graph traversal only\n\n    **Features:**\n    - Automatic entity extraction from natural language\n    - Reciprocal Rank Fusion for result combination\n    - Graph boost for results with causal connections\n    - Graceful degradation if backends fail\n\n    **Example queries:**\n    - \"Why did Kisqali TRx drop in the West during Q3?\"\n    - \"Compare Remibrutinib conversion rates across regions\"\n    - \"What caused the adoption decline for Fabhalta?\"",
        "operationId": "execute_hybrid_search",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/rag/graph/{entity}": {
      "get": {
        "tags": [
          "Hybrid RAG"
        ],
        "summary": "Get causal subgraph",
        "description": "Retrieve the causal subgraph centered on a specific entity.\n\n    Returns nodes and edges for visualization with Cytoscape.js.\n\n    **Entity types:**\n    - Brands: Kisqali, Remibrutinib, Fabhalta\n    - KPIs: trx, nrx, conversion_rate, market_share\n    - Regions: northeast, south, midwest, west\n    - Agents: causal_impact, drift_monitor, gap_analyzer",
        "operationId": "get_causal_subgraph",
        "parameters": [
          {
            "name": "entity",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Entity"
            }
          },
          {
            "name": "depth",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 5,
              "minimum": 1,
              "description": "Traversal depth",
              "default": 2,
              "title": "Depth"
            },
            "description": "Traversal depth"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum nodes",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum nodes"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CausalSubgraphResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/rag/causal-path": {
      "get": {
        "tags": [
          "Hybrid RAG"
        ],
        "summary": "Find causal paths",
        "description": "Find causal paths between two entities in the knowledge graph.\n\n    Useful for understanding causal chains like:\n    - Why did a KPI drop?\n    - What connects a brand to a region's performance?\n    - How are different agents related?",
        "operationId": "find_causal_paths",
        "parameters": [
          {
            "name": "source",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Source entity",
              "title": "Source"
            },
            "description": "Source entity"
          },
          {
            "name": "target",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Target entity",
              "title": "Target"
            },
            "description": "Target entity"
          },
          {
            "name": "max_depth",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10,
              "minimum": 1,
              "description": "Maximum path length",
              "default": 5,
              "title": "Max Depth"
            },
            "description": "Maximum path length"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CausalPathResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/rag/entities": {
      "get": {
        "tags": [
          "Hybrid RAG"
        ],
        "summary": "Extract entities from query",
        "description": "Extract domain-specific entities from a natural language query.\n\n    Useful for:\n    - Query understanding before search\n    - Building graph queries\n    - Debugging entity extraction",
        "operationId": "extract_query_entities",
        "parameters": [
          {
            "name": "query",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 1000,
              "description": "Query to analyze",
              "title": "Query"
            },
            "description": "Query to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractedEntitiesResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/rag/health": {
      "get": {
        "tags": [
          "Hybrid RAG"
        ],
        "summary": "RAG backend health",
        "description": "Get health status of all RAG backends.\n\n    Shows:\n    - Overall system health\n    - Per-backend status (vector, fulltext, graph)\n    - Circuit breaker states\n    - Recent errors",
        "operationId": "get_rag_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/rag/stats": {
      "get": {
        "tags": [
          "Hybrid RAG"
        ],
        "summary": "RAG usage statistics",
        "description": "Get usage statistics for the RAG system.",
        "operationId": "get_rag_stats",
        "parameters": [
          {
            "name": "hours",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 168,
              "minimum": 1,
              "description": "Hours to look back",
              "default": 24,
              "title": "Hours"
            },
            "description": "Hours to look back"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Rag Stats"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/drift/detect": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Trigger drift detection",
        "description": "Trigger drift detection for a model.\n\nRuns data, model, and concept drift detection based on request parameters.\nBy default runs asynchronously via Celery.\n\nArgs:\n    request: Drift detection parameters\n    background_tasks: FastAPI background tasks\n    async_mode: If True, returns immediately with task ID\n\nReturns:\n    Detection results or task ID for async polling",
        "operationId": "trigger_drift_detection",
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run detection asynchronously",
              "default": true,
              "title": "Async Mode"
            },
            "description": "Run detection asynchronously"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TriggerDriftDetectionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriftDetectionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/drift/status/{task_id}": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Get drift detection status",
        "description": "Get status of an async drift detection task.\n\nArgs:\n    task_id: Celery task ID\n\nReturns:\n    Task status and results if complete",
        "operationId": "get_drift_detection_status",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Drift Detection Status"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/drift/latest/{model_id}": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Get latest drift status",
        "description": "Get the latest drift status for a model.\n\nArgs:\n    model_id: Model version/ID\n    limit: Maximum drift results to return\n\nReturns:\n    Latest drift detection results",
        "operationId": "get_latest_drift_status",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Max results per type",
              "default": 10,
              "title": "Limit"
            },
            "description": "Max results per type"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriftDetectionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/drift/history/{model_id}": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Get drift history",
        "description": "Get drift detection history for a model.\n\nArgs:\n    model_id: Model version/ID\n    feature_name: Optional feature filter\n    days: Number of days to look back\n    limit: Maximum records to return\n\nReturns:\n    Historical drift records",
        "operationId": "get_drift_history",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          },
          {
            "name": "feature_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by feature",
              "title": "Feature Name"
            },
            "description": "Filter by feature"
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 1,
              "description": "Days of history",
              "default": 30,
              "title": "Days"
            },
            "description": "Days of history"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Max records",
              "default": 100,
              "title": "Limit"
            },
            "description": "Max records"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriftHistoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/alerts": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "List drift alerts",
        "description": "List drift alerts.\n\nArgs:\n    model_id: Optional model filter\n    status: Optional status filter\n    severity: Optional severity filter\n    limit: Maximum alerts to return\n\nReturns:\n    List of alerts matching criteria",
        "operationId": "list_drift_alerts",
        "parameters": [
          {
            "name": "model_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by model",
              "title": "Model Id"
            },
            "description": "Filter by model"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/AlertStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "severity",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/DriftSeverity"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by severity",
              "title": "Severity"
            },
            "description": "Filter by severity"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Max alerts",
              "default": 50,
              "title": "Limit"
            },
            "description": "Max alerts"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/alerts/{alert_id}": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Get alert details",
        "description": "Get a specific alert by ID.\n\nArgs:\n    alert_id: Alert UUID\n\nReturns:\n    Alert details",
        "operationId": "get_drift_alert",
        "parameters": [
          {
            "name": "alert_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Alert Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertItem"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/alerts/{alert_id}/action": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Update alert status",
        "description": "Perform an action on an alert (acknowledge, resolve, snooze).\n\nArgs:\n    alert_id: Alert UUID\n    request: Action to perform\n\nReturns:\n    Updated alert",
        "operationId": "update_drift_alert",
        "parameters": [
          {
            "name": "alert_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Alert Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AlertActionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertItem"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/runs": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "List monitoring runs",
        "description": "List monitoring runs.\n\nArgs:\n    model_id: Optional model filter\n    days: Number of days to look back\n    limit: Maximum runs to return\n\nReturns:\n    List of monitoring runs",
        "operationId": "list_monitoring_runs",
        "parameters": [
          {
            "name": "model_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by model",
              "title": "Model Id"
            },
            "description": "Filter by model"
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 90,
              "minimum": 1,
              "description": "Days of history",
              "default": 7,
              "title": "Days"
            },
            "description": "Days of history"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Max runs",
              "default": 50,
              "title": "Limit"
            },
            "description": "Max runs"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MonitoringRunsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/health/{model_id}": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Get model health summary",
        "description": "Get overall health summary for a model.\n\nAggregates drift status, alerts, and performance metrics.\n\nArgs:\n    model_id: Model version/ID\n\nReturns:\n    Health summary with recommendations",
        "operationId": "get_model_health_summary",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ModelHealthSummary"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/performance/record": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Record model performance",
        "description": "Record model performance metrics.\n\nCalculates and persists standard ML metrics (accuracy, precision, recall, F1, AUC).\n\nArgs:\n    request: Performance data including predictions and actuals\n    async_mode: If True, processes asynchronously via Celery\n\nReturns:\n    Recorded performance metrics",
        "operationId": "record_model_performance",
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously",
              "default": true,
              "title": "Async Mode"
            },
            "description": "Run asynchronously"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecordPerformanceRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PerformanceRecordResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/performance/{model_id}/trend": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Get performance trend",
        "description": "Get performance trend for a model.\n\nAnalyzes metric trends over time and detects degradation.\n\nArgs:\n    model_id: Model version/ID\n    metric_name: Metric to analyze (accuracy, precision, recall, f1_score, auc_roc)\n    days: Number of days to look back\n\nReturns:\n    Performance trend analysis",
        "operationId": "get_model_performance_trend",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          },
          {
            "name": "metric_name",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Metric to analyze",
              "default": "accuracy",
              "title": "Metric Name"
            },
            "description": "Metric to analyze"
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 90,
              "minimum": 1,
              "description": "Days of history",
              "default": 30,
              "title": "Days"
            },
            "description": "Days of history"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PerformanceTrendResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/performance/{model_id}/alerts": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Get performance alerts",
        "description": "Check for performance-related alerts.\n\nAnalyzes all tracked metrics for degradation.\n\nArgs:\n    model_id: Model version/ID\n\nReturns:\n    List of performance alerts",
        "operationId": "get_model_performance_alerts",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PerformanceAlertsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/performance/{model_id}/compare/{other_model_id}": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Compare model performance",
        "description": "Compare performance between two model versions.\n\nArgs:\n    model_id: First model version\n    other_model_id: Second model version\n    metric_name: Metric to compare\n\nReturns:\n    Comparison results",
        "operationId": "compare_model_performance",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          },
          {
            "name": "other_model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Other Model Id"
            }
          },
          {
            "name": "metric_name",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Metric to compare",
              "default": "accuracy",
              "title": "Metric Name"
            },
            "description": "Metric to compare"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Compare Model Performance"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/sweep/production": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Trigger production model sweep",
        "description": "Trigger drift detection sweep for all production models.\n\nQueues Celery tasks for each production model.\n\nArgs:\n    time_window: Time window for drift comparison\n\nReturns:\n    Summary of queued tasks",
        "operationId": "trigger_production_model_sweep",
        "parameters": [
          {
            "name": "time_window",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Time window for comparison",
              "default": "7d",
              "title": "Time Window"
            },
            "description": "Time window for comparison"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Trigger Production Model Sweep"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/retraining/evaluate/{model_id}": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Evaluate retraining need",
        "description": "Evaluate whether a model needs retraining.\n\nAnalyzes drift scores, performance trends, and other factors.\n\nArgs:\n    model_id: Model version/ID\n\nReturns:\n    Retraining decision with reasoning",
        "operationId": "evaluate_model_retraining_need",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetrainingDecisionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/retraining/trigger/{model_id}": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Trigger model retraining",
        "description": "Trigger model retraining.\n\nCreates a retraining job and optionally auto-approves it.\n\nArgs:\n    model_id: Model version/ID\n    request: Retraining parameters\n    triggered_by: User or system triggering retraining\n\nReturns:\n    Created retraining job",
        "operationId": "trigger_model_retraining",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          },
          {
            "name": "triggered_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "User triggering retraining",
              "default": "api_user",
              "title": "Triggered By"
            },
            "description": "User triggering retraining"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TriggerRetrainingRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetrainingJobResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/retraining/status/{job_id}": {
      "get": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Get retraining job status",
        "description": "Get status of a retraining job.\n\nArgs:\n    job_id: Retraining job ID\n\nReturns:\n    Retraining job details",
        "operationId": "get_retraining_job_status",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetrainingJobResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/retraining/{job_id}/complete": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Complete retraining job",
        "description": "Mark a retraining job as complete.\n\nArgs:\n    job_id: Retraining job ID\n    request: Completion details\n\nReturns:\n    Updated retraining job",
        "operationId": "complete_retraining_job",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompleteRetrainingRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetrainingJobResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/retraining/{job_id}/rollback": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Rollback retraining job",
        "description": "Rollback a completed retraining.\n\nReverts to previous model version.\n\nArgs:\n    job_id: Retraining job ID\n    request: Rollback reason\n\nReturns:\n    Updated retraining job",
        "operationId": "rollback_retraining_job",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RollbackRetrainingRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetrainingJobResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/retraining/sweep": {
      "post": {
        "tags": [
          "Model Monitoring"
        ],
        "summary": "Evaluate all models for retraining",
        "description": "Evaluate retraining need for all production models.\n\nQueues evaluation tasks for each production model.\n\nReturns:\n    Summary of queued tasks",
        "operationId": "trigger_retraining_sweep",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Trigger Retraining Sweep"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/experiments/{experiment_id}/randomize": {
      "post": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Randomize units to variants",
        "description": "Randomize units to experiment variants.\n\nSupports simple, stratified, and block randomization methods.\n\nArgs:\n    experiment_id: Experiment ID\n    request: Randomization parameters and units\n\nReturns:\n    Assignment results for all units",
        "operationId": "randomize_experiment_units",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RandomizeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RandomizeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/assignments": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Get experiment assignments",
        "description": "Get experiment assignments.\n\nArgs:\n    experiment_id: Experiment ID\n    variant: Optional variant filter\n    unit_type: Optional unit type filter\n    limit: Maximum assignments to return\n    offset: Pagination offset\n\nReturns:\n    List of assignments",
        "operationId": "get_experiment_assignments",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "variant",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by variant",
              "title": "Variant"
            },
            "description": "Filter by variant"
          },
          {
            "name": "unit_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by unit type",
              "title": "Unit Type"
            },
            "description": "Filter by unit type"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Max assignments",
              "default": 100,
              "title": "Limit"
            },
            "description": "Max assignments"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Offset for pagination",
              "default": 0,
              "title": "Offset"
            },
            "description": "Offset for pagination"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Experiment Assignments"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/enroll": {
      "post": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Enroll unit in experiment",
        "description": "Enroll a unit in an experiment.\n\nThe unit must already be assigned to a variant.\n\nArgs:\n    experiment_id: Experiment ID\n    request: Enrollment details\n\nReturns:\n    Enrollment result",
        "operationId": "enroll_experiment_unit",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EnrollUnitRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnrollmentResult"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/enrollments/{enrollment_id}": {
      "delete": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Withdraw unit from experiment",
        "description": "Withdraw a unit from an experiment.\n\nArgs:\n    experiment_id: Experiment ID\n    enrollment_id: Enrollment ID\n    request: Withdrawal details\n\nReturns:\n    Confirmation of withdrawal",
        "operationId": "withdraw_experiment_unit",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "enrollment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Enrollment Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WithdrawRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Withdraw Experiment Unit"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/enrollments": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Get enrollment statistics",
        "description": "Get enrollment statistics for an experiment.\n\nArgs:\n    experiment_id: Experiment ID\n\nReturns:\n    Enrollment statistics",
        "operationId": "get_experiment_enrollment_stats",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnrollmentStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/interim-analysis": {
      "post": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Trigger interim analysis",
        "description": "Trigger an interim analysis for an experiment.\n\nUses O'Brien-Fleming alpha spending for multiple comparisons.\n\nArgs:\n    experiment_id: Experiment ID\n    request: Analysis parameters\n    background_tasks: FastAPI background tasks\n    async_mode: If True, runs asynchronously\n\nReturns:\n    Interim analysis results",
        "operationId": "trigger_experiment_interim_analysis",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously",
              "default": false,
              "title": "Async Mode"
            },
            "description": "Run asynchronously"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TriggerInterimAnalysisRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InterimAnalysisResult"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/interim-analyses": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "List interim analyses",
        "description": "List all interim analyses for an experiment.\n\nArgs:\n    experiment_id: Experiment ID\n\nReturns:\n    List of interim analysis results",
        "operationId": "list_experiment_interim_analyses",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response List Experiment Interim Analyses"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/results": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Get experiment results",
        "description": "Get experiment results.\n\nArgs:\n    experiment_id: Experiment ID\n    analysis_type: Type of analysis (interim or final)\n    analysis_method: Analysis method (ITT or per-protocol)\n    recompute: If True, recomputes results\n\nReturns:\n    Experiment analysis results",
        "operationId": "get_experiment_results",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "analysis_type",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/AnalysisType",
              "default": "final"
            }
          },
          {
            "name": "analysis_method",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/AnalysisMethod",
              "default": "itt"
            }
          },
          {
            "name": "recompute",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Force recomputation",
              "default": false,
              "title": "Recompute"
            },
            "description": "Force recomputation"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExperimentResults"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/results/segments": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Get segment results",
        "description": "Get heterogeneous treatment effects by segment.\n\nArgs:\n    experiment_id: Experiment ID\n    segments: List of segment dimensions to analyze\n\nReturns:\n    Treatment effects by segment",
        "operationId": "get_experiment_segment_results",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "segments",
            "in": "query",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Segments to analyze",
              "default": [
                "region",
                "specialty"
              ],
              "title": "Segments"
            },
            "description": "Segments to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Experiment Segment Results"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/srm-checks": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Get SRM check history",
        "description": "Get SRM check history for an experiment.\n\nArgs:\n    experiment_id: Experiment ID\n    limit: Maximum checks to return\n\nReturns:\n    SRM check history",
        "operationId": "get_experiment_srm_checks",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Max checks",
              "default": 10,
              "title": "Limit"
            },
            "description": "Max checks"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Experiment Srm Checks"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/srm-check": {
      "post": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Run SRM check",
        "description": "Run an SRM check for an experiment.\n\nArgs:\n    experiment_id: Experiment ID\n\nReturns:\n    SRM check result",
        "operationId": "run_experiment_srm_check",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SRMCheckResult"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/fidelity": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Get fidelity comparisons",
        "description": "Get Digital Twin fidelity comparisons for an experiment.\n\nArgs:\n    experiment_id: Experiment ID\n    limit: Maximum comparisons to return\n\nReturns:\n    Fidelity comparison history",
        "operationId": "get_experiment_fidelity_comparisons",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Max comparisons",
              "default": 10,
              "title": "Limit"
            },
            "description": "Max comparisons"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Experiment Fidelity Comparisons"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/fidelity/{twin_simulation_id}": {
      "post": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Update fidelity comparison",
        "description": "Update fidelity comparison with latest experiment results.\n\nArgs:\n    experiment_id: Experiment ID\n    twin_simulation_id: Digital Twin simulation ID\n\nReturns:\n    Updated fidelity comparison",
        "operationId": "update_experiment_fidelity_comparison",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "twin_simulation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Twin Simulation Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FidelityComparison"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/monitor": {
      "post": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Trigger experiment monitoring",
        "description": "Trigger experiment monitoring sweep.\n\nChecks all active experiments (or specified ones) for health issues.\n\nArgs:\n    request: Monitoring parameters\n    background_tasks: FastAPI background tasks\n    async_mode: If True, runs asynchronously\n\nReturns:\n    Monitoring results with alerts",
        "operationId": "trigger_experiment_monitoring_sweep",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously",
              "default": false,
              "title": "Async Mode"
            },
            "description": "Run asynchronously"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TriggerMonitorRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MonitorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/health": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Get experiment health",
        "description": "Get health status for a single experiment.\n\nArgs:\n    experiment_id: Experiment ID\n\nReturns:\n    Experiment health summary",
        "operationId": "get_experiment_health_summary",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExperimentHealthSummary"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments/{experiment_id}/alerts": {
      "get": {
        "tags": [
          "A/B Testing"
        ],
        "summary": "Get experiment alerts",
        "description": "Get alerts for an experiment.\n\nArgs:\n    experiment_id: Experiment ID\n    severity: Optional severity filter\n    limit: Maximum alerts to return\n\nReturns:\n    List of alerts",
        "operationId": "get_experiment_alerts",
        "parameters": [
          {
            "name": "experiment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experiment Id"
            }
          },
          {
            "name": "severity",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/AlertSeverity"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by severity",
              "title": "Severity"
            },
            "description": "Filter by severity"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Max alerts",
              "default": 50,
              "title": "Limit"
            },
            "description": "Max alerts"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Experiment Alerts"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/gaps/analyze": {
      "post": {
        "tags": [
          "Gap Analysis"
        ],
        "summary": "Run gap analysis",
        "description": "Analyze performance gaps for a brand across segments and calculate ROI.",
        "operationId": "run_gap_analysis",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously (returns immediately with ID)",
              "default": true,
              "title": "Async Mode"
            },
            "description": "Run asynchronously (returns immediately with ID)"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RunGapAnalysisRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GapAnalysisResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/gaps/{analysis_id}": {
      "get": {
        "tags": [
          "Gap Analysis"
        ],
        "summary": "Get gap analysis results",
        "description": "Retrieve results of a gap analysis by ID.",
        "operationId": "get_gap_analysis",
        "parameters": [
          {
            "name": "analysis_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Analysis Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GapAnalysisResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/gaps/opportunities": {
      "get": {
        "tags": [
          "Gap Analysis"
        ],
        "summary": "List prioritized opportunities",
        "description": "List all identified opportunities across analyses.",
        "operationId": "list_opportunities",
        "parameters": [
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by brand",
              "title": "Brand"
            },
            "description": "Filter by brand"
          },
          {
            "name": "min_roi",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum ROI threshold",
              "title": "Min Roi"
            },
            "description": "Minimum ROI threshold"
          },
          {
            "name": "difficulty",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/ImplementationDifficulty"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by difficulty",
              "title": "Difficulty"
            },
            "description": "Filter by difficulty"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum results"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpportunityListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/gaps/health": {
      "get": {
        "tags": [
          "Gap Analysis"
        ],
        "summary": "Gap analysis service health",
        "description": "Check health status of the gap analysis service.",
        "operationId": "get_gap_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GapHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/segments/analyze": {
      "post": {
        "tags": [
          "Segment Analysis"
        ],
        "summary": "Run segment analysis",
        "description": "Analyze treatment effect heterogeneity across segments using CATE/uplift modeling.",
        "operationId": "run_segment_analysis",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously (returns immediately with ID)",
              "default": true,
              "title": "Async Mode"
            },
            "description": "Run asynchronously (returns immediately with ID)"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RunSegmentAnalysisRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentAnalysisResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/segments/{analysis_id}": {
      "get": {
        "tags": [
          "Segment Analysis"
        ],
        "summary": "Get segment analysis results",
        "description": "Retrieve results of a segment analysis by ID.",
        "operationId": "get_segment_analysis",
        "parameters": [
          {
            "name": "analysis_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Analysis Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentAnalysisResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/segments/policies": {
      "get": {
        "tags": [
          "Segment Analysis"
        ],
        "summary": "List targeting recommendations",
        "description": "List all targeting policy recommendations.",
        "operationId": "list_policies",
        "parameters": [
          {
            "name": "min_lift",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum expected lift threshold",
              "title": "Min Lift"
            },
            "description": "Minimum expected lift threshold"
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum confidence threshold",
              "title": "Min Confidence"
            },
            "description": "Minimum confidence threshold"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum results"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/segments/health": {
      "get": {
        "tags": [
          "Segment Analysis"
        ],
        "summary": "Segment analysis service health",
        "description": "Check health status of the segment analysis service.",
        "operationId": "get_segment_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/resources/optimize": {
      "post": {
        "tags": [
          "Resource Optimization"
        ],
        "summary": "Run resource optimization",
        "description": "Optimize resource allocation across entities.",
        "operationId": "run_optimization",
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously (returns immediately with ID)",
              "default": true,
              "title": "Async Mode"
            },
            "description": "Run asynchronously (returns immediately with ID)"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RunOptimizationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OptimizationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/resources/{optimization_id}": {
      "get": {
        "tags": [
          "Resource Optimization"
        ],
        "summary": "Get optimization results",
        "description": "Retrieve results of an optimization by ID.",
        "operationId": "get_optimization",
        "parameters": [
          {
            "name": "optimization_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Optimization Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OptimizationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/resources/scenarios": {
      "get": {
        "tags": [
          "Resource Optimization"
        ],
        "summary": "List scenario analyses",
        "description": "List scenario analyses from all optimizations.",
        "operationId": "list_scenarios",
        "parameters": [
          {
            "name": "min_roi",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum ROI threshold",
              "title": "Min Roi"
            },
            "description": "Minimum ROI threshold"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum results"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScenarioListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/resources/health": {
      "get": {
        "tags": [
          "Resource Optimization"
        ],
        "summary": "Resource optimization service health",
        "description": "Check health status of the resource optimization service.",
        "operationId": "get_resource_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResourceHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/learn": {
      "post": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Run feedback learning cycle",
        "description": "Process accumulated feedback and extract improvement patterns.",
        "operationId": "run_feedback_learning_cycle",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously (returns immediately with ID)",
              "default": true,
              "title": "Async Mode"
            },
            "description": "Run asynchronously (returns immediately with ID)"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RunLearningRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LearningResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/{batch_id}": {
      "get": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Get learning results",
        "description": "Retrieve results of a learning cycle by batch ID.",
        "operationId": "get_feedback_learning_results",
        "parameters": [
          {
            "name": "batch_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Batch Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LearningResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/process": {
      "post": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Process feedback items",
        "description": "Process specific feedback items and detect patterns.",
        "operationId": "process_feedback_items",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProcessFeedbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LearningResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/feedback/patterns": {
      "get": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "List detected patterns",
        "description": "List all detected patterns with optional filtering.",
        "operationId": "list_feedback_patterns",
        "parameters": [
          {
            "name": "severity",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/PatternSeverity"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by severity",
              "title": "Severity"
            },
            "description": "Filter by severity"
          },
          {
            "name": "pattern_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/PatternType"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by type",
              "title": "Pattern Type"
            },
            "description": "Filter by type"
          },
          {
            "name": "agent",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by affected agent",
              "title": "Agent"
            },
            "description": "Filter by affected agent"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Maximum results",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatternListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/updates": {
      "get": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "List knowledge updates",
        "description": "List all proposed and applied knowledge updates.",
        "operationId": "list_knowledge_updates",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/UpdateStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "update_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/UpdateType"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by type",
              "title": "Update Type"
            },
            "description": "Filter by type"
          },
          {
            "name": "agent",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by target agent",
              "title": "Agent"
            },
            "description": "Filter by target agent"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Maximum results",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/updates/{update_id}/apply": {
      "post": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Apply knowledge update",
        "description": "Apply a proposed knowledge update to the system.",
        "operationId": "apply_knowledge_update",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "update_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Update Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplyUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeUpdate"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/updates/{update_id}/rollback": {
      "post": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Rollback knowledge update",
        "description": "Rollback a previously applied knowledge update.",
        "operationId": "rollback_knowledge_update",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "update_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Update Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeUpdate"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/health": {
      "get": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Feedback learning service health",
        "description": "Check health status of the feedback learning service.",
        "operationId": "get_feedback_service_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/trace": {
      "post": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Record feedback for Opik trace (G23)",
        "description": "Record user feedback and associate it with an Opik trace for observability.",
        "operationId": "record_opik_trace_feedback",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TraceFeedbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TraceFeedbackResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/agent/{agent_name}/stats": {
      "get": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Get agent feedback statistics (G23)",
        "description": "Get aggregated feedback statistics for an agent.",
        "operationId": "get_agent_feedback_stats",
        "parameters": [
          {
            "name": "agent_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Agent Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentFeedbackStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/agent/{agent_name}/signals": {
      "get": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Get GEPA optimization signals (G23)",
        "description": "Get feedback-derived optimization signals for GEPA prompt improvement.",
        "operationId": "get_gepa_optimization_signals",
        "parameters": [
          {
            "name": "agent_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Agent Name"
            }
          },
          {
            "name": "min_feedback_count",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Minimum feedback required",
              "default": 5,
              "title": "Min Feedback Count"
            },
            "description": "Minimum feedback required"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OptimizationSignalsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/agent/{agent_name}/gepa-batch": {
      "get": {
        "tags": [
          "Feedback Learning"
        ],
        "summary": "Get GEPA training batch (G23)",
        "description": "Get a batch of feedback examples for GEPA training.",
        "operationId": "get_gepa_training_batch",
        "parameters": [
          {
            "name": "agent_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Agent Name"
            }
          },
          {
            "name": "batch_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Batch size",
              "default": 50,
              "title": "Batch Size"
            },
            "description": "Batch size"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Gepa Training Batch"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/check": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Run health check",
        "description": "Run a health check with specified scope.",
        "operationId": "run_health_check",
        "parameters": [
          {
            "name": "scope",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/CheckScope",
              "description": "Check scope",
              "default": "full"
            },
            "description": "Check scope"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthScoreResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/quick": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Quick health check",
        "description": "Run a quick health check (<1s target).",
        "operationId": "quick_health_check",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthScoreResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/full": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Full health check",
        "description": "Run a comprehensive health check (<5s target).",
        "operationId": "full_health_check",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthScoreResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/components": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Component health",
        "description": "Check health of system components.",
        "operationId": "get_component_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ComponentHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/models": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Model health",
        "description": "Check health of deployed ML models.",
        "operationId": "get_model_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ModelHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/pipelines": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Pipeline health",
        "description": "Check health of data pipelines.",
        "operationId": "get_pipeline_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PipelineHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/agents": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Agent health",
        "description": "Check health of system agents.",
        "operationId": "get_agent_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/history": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Health check history",
        "description": "Get history of health checks.",
        "operationId": "get_health_history",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum records to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum records to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthHistoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/health-score/status": {
      "get": {
        "tags": [
          "Health Score"
        ],
        "summary": "Service status",
        "description": "Get health score service status.",
        "operationId": "get_health_service_status",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthServiceStatus"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/digital-twin/health": {
      "get": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "Digital Twin service health",
        "description": "Health check for Digital Twin service.\n\nReturns:\n    Service health status including model availability and simulation stats.",
        "operationId": "get_digital_twin_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DigitalTwinHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/digital-twin/simulate": {
      "post": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "Run twin simulation",
        "description": "Run a digital twin simulation for an intervention.\n\nSimulates the intervention on a population of digital twins\nand returns predicted Average Treatment Effect (ATE) with recommendation.\n\nArgs:\n    request: Simulation parameters including intervention config\n\nReturns:\n    Simulation results with recommendation (deploy/skip/refine)",
        "operationId": "run_digital_twin_simulation",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SimulateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimulationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/digital-twin/simulations": {
      "get": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "List simulations",
        "description": "List simulation results with filtering and pagination.\n\nArgs:\n    brand: Optional brand filter\n    model_id: Optional model ID filter\n    status: Optional status filter\n    page: Page number (1-indexed)\n    page_size: Results per page\n\nReturns:\n    Paginated list of simulations",
        "operationId": "list_twin_simulations",
        "parameters": [
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/BrandEnum"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by brand",
              "title": "Brand"
            },
            "description": "Filter by brand"
          },
          {
            "name": "model_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by model ID",
              "title": "Model Id"
            },
            "description": "Filter by model ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/SimulationStatusEnum"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Page size",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Page size"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimulationListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/digital-twin/simulations/{simulation_id}": {
      "get": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "Get simulation details",
        "description": "Get detailed information about a simulation.\n\nArgs:\n    simulation_id: Simulation UUID\n\nReturns:\n    Detailed simulation result including heterogeneous effects",
        "operationId": "get_twin_simulation",
        "parameters": [
          {
            "name": "simulation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Simulation Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimulationDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/digital-twin/validate": {
      "post": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "Validate simulation fidelity",
        "description": "Validate a simulation against actual experiment results.\n\nUpdates the fidelity record with actual outcomes and calculates\nprediction error and fidelity grade.\n\nArgs:\n    request: Validation data including actual ATE\n\nReturns:\n    Updated fidelity record with grade",
        "operationId": "validate_twin_simulation",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateFidelityRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FidelityRecordResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/digital-twin/models": {
      "get": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "List twin models",
        "description": "List trained twin generator models.\n\nArgs:\n    brand: Optional brand filter\n    twin_type: Optional twin type filter\n\nReturns:\n    List of active models",
        "operationId": "list_twin_models",
        "parameters": [
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/BrandEnum"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by brand",
              "title": "Brand"
            },
            "description": "Filter by brand"
          },
          {
            "name": "twin_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/TwinTypeEnum"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by twin type",
              "title": "Twin Type"
            },
            "description": "Filter by twin type"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ModelListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/digital-twin/models/{model_id}": {
      "get": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "Get twin model details",
        "description": "Get detailed information about a twin model.\n\nArgs:\n    model_id: Model UUID\n\nReturns:\n    Model details including performance metrics",
        "operationId": "get_twin_model",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TwinModelDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/digital-twin/models/{model_id}/fidelity": {
      "get": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "Get Model Fidelity",
        "description": "Get fidelity validation history for a model.\n\nArgs:\n    model_id: Model UUID\n    limit: Maximum records to return\n    validated_only: If True, only return records with actual results\n\nReturns:\n    Fidelity history with grade distribution",
        "operationId": "get_model_fidelity_api_digital_twin_models__model_id__fidelity_get",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Max records",
              "default": 20,
              "title": "Limit"
            },
            "description": "Max records"
          },
          {
            "name": "validated_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Only show validated records",
              "default": false,
              "title": "Validated Only"
            },
            "description": "Only show validated records"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FidelityHistoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/digital-twin/models/{model_id}/fidelity/report": {
      "get": {
        "tags": [
          "Digital Twin"
        ],
        "summary": "Get Fidelity Report",
        "description": "Get aggregated fidelity report for a model.\n\nAnalyzes fidelity trends and provides degradation warnings.\n\nArgs:\n    model_id: Model UUID\n    lookback_days: Number of days to look back for analysis\n\nReturns:\n    Fidelity report with trend analysis",
        "operationId": "get_fidelity_report_api_digital_twin_models__model_id__fidelity_report_get",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          },
          {
            "name": "lookback_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 7,
              "description": "Days to analyze",
              "default": 90,
              "title": "Lookback Days"
            },
            "description": "Days to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FidelityReportResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/models/predict/{model_name}": {
      "post": {
        "tags": [
          "Model Predictions"
        ],
        "summary": "Make a single prediction",
        "description": "Call a BentoML model endpoint for prediction",
        "operationId": "predict_single",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "model_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Name"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PredictionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PredictionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Model not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Model service unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/models/predict/{model_name}/batch": {
      "post": {
        "tags": [
          "Model Predictions"
        ],
        "summary": "Make batch predictions",
        "description": "Call a BentoML model endpoint for multiple predictions",
        "operationId": "predict_batch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "model_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Name"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchPredictionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchPredictionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Model not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Model service unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/models/{model_name}/health": {
      "get": {
        "tags": [
          "Model Predictions"
        ],
        "summary": "Check model health",
        "description": "Check the health status of a specific BentoML model service",
        "operationId": "get_prediction_model_health",
        "parameters": [
          {
            "name": "model_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/src__api__routes__predictions__ModelHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Model not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Model service unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/models/{model_name}/info": {
      "get": {
        "tags": [
          "Model Predictions"
        ],
        "summary": "Get model metadata",
        "description": "Get metadata and configuration for a deployed model",
        "operationId": "get_model_info",
        "parameters": [
          {
            "name": "model_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Model Info"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Model not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Model service unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/models/status": {
      "get": {
        "tags": [
          "Model Predictions"
        ],
        "summary": "Get all models status",
        "description": "Get health status of all registered BentoML model services",
        "operationId": "get_models_status",
        "parameters": [
          {
            "name": "models",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Specific models to check. If not provided, checks all registered models.",
              "title": "Models"
            },
            "description": "Specific models to check. If not provided, checks all registered models."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ModelsStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Model not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Model service unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/kpis": {
      "get": {
        "tags": [
          "KPIs"
        ],
        "summary": "List all KPIs",
        "description": "Get a list of all available KPIs with optional filtering",
        "operationId": "list_kpis",
        "parameters": [
          {
            "name": "workstream",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by workstream (e.g., ws1_data_quality)",
              "title": "Workstream"
            },
            "description": "Filter by workstream (e.g., ws1_data_quality)"
          },
          {
            "name": "causal_library",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by causal library (dowhy, econml, causalml, networkx)",
              "title": "Causal Library"
            },
            "description": "Filter by causal library (dowhy, econml, causalml, networkx)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KPIListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "KPI not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/kpis/workstreams": {
      "get": {
        "tags": [
          "KPIs"
        ],
        "summary": "List workstreams",
        "description": "Get a list of all available KPI workstreams",
        "operationId": "list_workstreams",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkstreamListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "KPI not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/kpis/health": {
      "get": {
        "tags": [
          "KPIs"
        ],
        "summary": "KPI system health",
        "description": "Check the health of the KPI calculation system",
        "operationId": "kpi_health_check",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KPIHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "KPI not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/kpis/{kpi_id}/metadata": {
      "get": {
        "tags": [
          "KPIs"
        ],
        "summary": "Get KPI metadata",
        "description": "Get metadata and definition for a specific KPI",
        "operationId": "get_kpi_metadata",
        "parameters": [
          {
            "name": "kpi_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Kpi Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KPIMetadataResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "KPI not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/kpis/{kpi_id}": {
      "get": {
        "tags": [
          "KPIs"
        ],
        "summary": "Get KPI value",
        "description": "Calculate and return the current value for a KPI",
        "operationId": "get_kpi_value",
        "parameters": [
          {
            "name": "kpi_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Kpi Id"
            }
          },
          {
            "name": "use_cache",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Use cached value if available",
              "default": true,
              "title": "Use Cache"
            },
            "description": "Use cached value if available"
          },
          {
            "name": "force_refresh",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Force recalculation",
              "default": false,
              "title": "Force Refresh"
            },
            "description": "Force recalculation"
          },
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Brand filter",
              "title": "Brand"
            },
            "description": "Brand filter"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KPIResultResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "KPI not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/kpis/calculate": {
      "post": {
        "tags": [
          "KPIs"
        ],
        "summary": "Calculate single KPI",
        "description": "Calculate a single KPI with full context options",
        "operationId": "calculate_kpi",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KPICalculationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KPIResultResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "KPI not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/kpis/batch": {
      "post": {
        "tags": [
          "KPIs"
        ],
        "summary": "Batch calculate KPIs",
        "description": "Calculate multiple KPIs in a single request",
        "operationId": "calculate_batch_kpis",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchKPICalculationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchKPICalculationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "KPI not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/kpis/invalidate": {
      "post": {
        "tags": [
          "KPIs"
        ],
        "summary": "Invalidate KPI cache",
        "description": "Invalidate cached KPI values",
        "operationId": "invalidate_kpi_cache",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CacheInvalidationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CacheInvalidationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "KPI not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/causal/hierarchical/analyze": {
      "post": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "Run hierarchical CATE analysis",
        "description": "Run hierarchical CATE analysis (EconML within CausalML segments).\n\nThis endpoint performs Pattern 4 from multi-library synergies:\n- Segments data using uplift scores (quantile, k-means, threshold)\n- Estimates CATE within each segment using EconML\n- Aggregates segment CATEs with nested confidence intervals\n- Computes heterogeneity statistics (I\u00b2, \u03c4\u00b2)\n\nArgs:\n    request: Hierarchical analysis configuration\n    background_tasks: FastAPI background tasks\n    async_mode: If True, runs analysis asynchronously\n\nReturns:\n    HierarchicalAnalysisResponse with segment-level CATE results",
        "operationId": "run_hierarchical_analysis",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously",
              "default": false,
              "title": "Async Mode"
            },
            "description": "Run asynchronously"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HierarchicalAnalysisRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HierarchicalAnalysisResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/causal/hierarchical/{analysis_id}": {
      "get": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "Get hierarchical analysis results",
        "description": "Get results of a hierarchical analysis by ID.\n\nArgs:\n    analysis_id: Unique analysis identifier\n\nReturns:\n    HierarchicalAnalysisResponse with analysis results",
        "operationId": "get_hierarchical_analysis",
        "parameters": [
          {
            "name": "analysis_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Analysis Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HierarchicalAnalysisResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/causal/route": {
      "post": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "Route causal query to library",
        "description": "Route a causal query to the appropriate library.\n\nUses NLP classification to determine the best causal library:\n- \"Does X cause Y?\" \u2192 DoWhy (causal identification)\n- \"How does effect vary?\" \u2192 EconML (heterogeneous effects)\n- \"Who should we target?\" \u2192 CausalML (uplift modeling)\n- \"How does impact flow?\" \u2192 NetworkX (system dependencies)\n\nArgs:\n    request: Query routing request\n\nReturns:\n    RouteQueryResponse with recommended library and estimators",
        "operationId": "route_causal_query",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RouteQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RouteQueryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/causal/pipeline/sequential": {
      "post": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "Run sequential multi-library pipeline",
        "description": "Run sequential multi-library pipeline.\n\nExecutes causal analysis stages in sequence:\nNetworkX \u2192 DoWhy \u2192 EconML \u2192 CausalML\n\nEach stage can pass results to the next for validation and refinement.\n\nArgs:\n    request: Pipeline configuration\n    background_tasks: FastAPI background tasks\n    async_mode: If True, runs asynchronously\n\nReturns:\n    SequentialPipelineResponse with stage results and consensus",
        "operationId": "run_sequential_pipeline",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "async_mode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Run asynchronously",
              "default": false,
              "title": "Async Mode"
            },
            "description": "Run asynchronously"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SequentialPipelineRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SequentialPipelineResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/causal/pipeline/parallel": {
      "post": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "Run parallel multi-library analysis",
        "description": "Run parallel multi-library analysis.\n\nExecutes multiple causal libraries simultaneously and computes\nconsensus results weighted by confidence.\n\nArgs:\n    request: Parallel pipeline configuration\n\nReturns:\n    ParallelPipelineResponse with library results and consensus",
        "operationId": "run_parallel_pipeline",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ParallelPipelineRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ParallelPipelineResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/causal/pipeline/{pipeline_id}": {
      "get": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "Get pipeline status",
        "description": "Get status of a pipeline execution.\n\nArgs:\n    pipeline_id: Unique pipeline identifier\n\nReturns:\n    Pipeline status and results",
        "operationId": "get_pipeline_status",
        "parameters": [
          {
            "name": "pipeline_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Pipeline Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Pipeline Status"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/causal/validate": {
      "post": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "Run cross-library validation",
        "description": "Run cross-library validation (DoWhy \u2194 CausalML).\n\nCompares effect estimates between libraries to validate results.\n\nArgs:\n    request: Cross-validation configuration\n\nReturns:\n    CrossValidationResponse with agreement metrics",
        "operationId": "run_cross_validation",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CrossValidationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CrossValidationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/causal/estimators": {
      "get": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "List available estimators",
        "description": "List available causal estimators.\n\nArgs:\n    library: Optional filter by library\n\nReturns:\n    EstimatorListResponse with estimator information",
        "operationId": "list_estimators",
        "parameters": [
          {
            "name": "library",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/CausalLibrary"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by library",
              "title": "Library"
            },
            "description": "Filter by library"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EstimatorListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/causal/health": {
      "get": {
        "tags": [
          "Causal Inference"
        ],
        "summary": "Causal engine health check",
        "description": "Health check for causal inference engine.\n\nReturns:\n    CausalHealthResponse with component status",
        "operationId": "causal_health_check",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CausalHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit/workflow/{workflow_id}": {
      "get": {
        "tags": [
          "Audit Chain"
        ],
        "summary": "Get workflow audit entries",
        "description": "Retrieve all audit chain entries for a specific workflow, ordered by sequence number.",
        "operationId": "get_workflow_entries",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Workflow Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum entries to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum entries to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of entries to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of entries to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AuditEntryResponse"
                  },
                  "title": "Response Get Workflow Entries"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit/workflow/{workflow_id}/verify": {
      "get": {
        "tags": [
          "Audit Chain"
        ],
        "summary": "Verify chain integrity",
        "description": "Verify the cryptographic integrity of a workflow's audit chain.",
        "operationId": "verify_workflow_chain",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Workflow Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChainVerificationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit/workflow/{workflow_id}/summary": {
      "get": {
        "tags": [
          "Audit Chain"
        ],
        "summary": "Get workflow summary",
        "description": "Get a summary of a workflow including agents involved and aggregated metrics.",
        "operationId": "get_workflow_summary",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Workflow Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowSummaryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit/recent": {
      "get": {
        "tags": [
          "Audit Chain"
        ],
        "summary": "Get recent workflows",
        "description": "Get a list of recent audit workflows with basic info.",
        "operationId": "get_recent_workflows",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum workflows to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum workflows to return"
          },
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by brand",
              "title": "Brand"
            },
            "description": "Filter by brand"
          },
          {
            "name": "agent_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by agent name",
              "title": "Agent Name"
            },
            "description": "Filter by agent name"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RecentWorkflowResponse"
                  },
                  "title": "Response Get Recent Workflows"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/analytics/dashboard": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get analytics dashboard data",
        "description": "Retrieve comprehensive analytics including agent metrics, latency trends, and query volumes.",
        "operationId": "get_analytics_dashboard",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(1d|7d|30d|90d)$",
              "description": "Time period: 1d, 7d, 30d, 90d",
              "default": "7d",
              "title": "Period"
            },
            "description": "Time period: 1d, 7d, 30d, 90d"
          },
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by brand",
              "title": "Brand"
            },
            "description": "Filter by brand"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalyticsDashboardResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/analytics/agents/{agent_name}": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get metrics for a specific agent",
        "description": "Retrieve detailed performance metrics for a single agent.",
        "operationId": "get_agent_metrics",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "agent_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Agent Name"
            }
          },
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(1d|7d|30d|90d)$",
              "default": "7d",
              "title": "Period"
            }
          },
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Brand"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentMetrics"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/analytics/agents/{agent_name}/trend": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get performance trend for an agent",
        "description": "Retrieve latency trend over time for a specific agent.",
        "operationId": "get_agent_trend",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "agent_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Agent Name"
            }
          },
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(1d|7d|30d|90d)$",
              "default": "7d",
              "title": "Period"
            }
          },
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Brand"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentPerformanceTrend"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/analytics/summary": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get quick metrics summary",
        "description": "Get a quick summary of query execution metrics.",
        "operationId": "get_metrics_summary",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(1h|6h|24h|7d)$",
              "default": "24h",
              "title": "Period"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryMetricsSummary"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/status": {
      "get": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Get CopilotKit status",
        "description": "Get CopilotKit integration status.",
        "operationId": "get_copilotkit_status",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Copilotkit Status"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/chat/stream": {
      "post": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Stream chatbot response",
        "description": "Stream chatbot response as Server-Sent Events (SSE).\n\nReturns an SSE stream with events:\n- session_id: The conversation session ID\n- text: Response text chunks\n- conversation_title: Auto-generated conversation title\n- tool_call: Tool invocation notifications\n- done: Stream completion signal\n- error: Error messages\n\nNote: request_id is optional. If not provided, it's extracted from the\nX-Request-ID header via TracingMiddleware (Phase 1 G08).\n\nUsage:\n    POST /api/copilotkit/chat/stream\n    Content-Type: application/json\n    X-Request-ID: optional-tracking-id  // Optional, auto-generated if not set\n\n    {\n        \"query\": \"What is the TRx for Kisqali?\",\n        \"user_id\": \"user-uuid\",\n        \"request_id\": \"req-123\",  // Optional, falls back to X-Request-ID header\n        \"session_id\": \"\",  // Optional, generated if empty\n        \"brand_context\": \"Kisqali\"  // Optional\n    }",
        "operationId": "stream_chat",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/chat": {
      "post": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Non-streaming chatbot",
        "description": "Non-streaming chatbot endpoint.\n\nReturns the complete response in a single JSON object with dispatch observability.\n\nUsage:\n    POST /api/copilotkit/chat\n    Content-Type: application/json\n\n    {\n        \"query\": \"Show agent status\",\n        \"user_id\": \"user-uuid\",\n        \"request_id\": \"req-456\",\n        \"session_id\": \"\"\n    }\n\nResponse includes dispatch observability fields:\n    - orchestrator_used: Whether the orchestrator processed this query\n    - agents_dispatched: List of agents that were dispatched\n    - routed_agent: Primary agent routed for this query\n    - response_confidence: Orchestrator response confidence (0.0-1.0)\n    - execution_time_ms: Total execution time in milliseconds\n    - intent: Classified intent type\n    - intent_confidence: Intent classification confidence (0.0-1.0)\n    - routing_rationale: Explanation for why this agent was selected (Phase 4)\n\nNote: request_id is optional. If not provided, it's extracted from the\nX-Request-ID header via TracingMiddleware (Phase 1 G08).",
        "operationId": "chat",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/feedback": {
      "post": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Submit message feedback",
        "description": "Submit feedback (thumbs up/down) for a chatbot message.\n\nThis endpoint allows users to rate assistant responses for quality\nimprovement and prompt optimization.\n\nUsage:\n    POST /api/copilotkit/feedback\n    Content-Type: application/json\n\n    {\n        \"message_id\": 123,\n        \"session_id\": \"user-uuid~timestamp\",\n        \"rating\": \"thumbs_up\",\n        \"comment\": \"Great response!\",\n        \"query_text\": \"What is TRx performance?\",\n        \"response_preview\": \"The TRx performance...\",\n        \"agent_name\": \"tool_composer\",\n        \"tools_used\": [\"query_kpi\"]\n    }",
        "operationId": "submit_feedback",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeedbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/feedback/stats": {
      "get": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Get feedback statistics",
        "description": "Get feedback statistics for analytics.\n\nUsage:\n    GET /api/copilotkit/feedback/stats?agent_name=tool_composer&days=30",
        "operationId": "get_feedback_stats",
        "parameters": [
          {
            "name": "agent_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Agent Name"
            }
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 30,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Feedback Stats"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/analytics/usage": {
      "get": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Get usage analytics",
        "description": "Get chatbot usage analytics summary.\n\nUsage:\n    GET /api/copilotkit/analytics/usage?days=7\n\nReturns usage statistics including:\n- Total queries\n- Average response time\n- Query type distribution\n- Tool usage patterns",
        "operationId": "get_usage_analytics",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 7,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Usage Analytics"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/analytics/agents": {
      "get": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Get agent analytics",
        "description": "Get agent performance analytics.\n\nUsage:\n    GET /api/copilotkit/analytics/agents?agent_name=tool_composer&days=30\n\nReturns performance metrics by agent:\n- Query count\n- Average response time\n- Error rate\n- Tool invocation patterns",
        "operationId": "get_agent_analytics",
        "parameters": [
          {
            "name": "agent_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Agent Name"
            }
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 30,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Agent Analytics"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/analytics/errors": {
      "get": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Get error analytics",
        "description": "Get recent error analytics for debugging.\n\nUsage:\n    GET /api/copilotkit/analytics/errors?limit=20\n\nReturns recent errors with:\n- Error type\n- Error message\n- Session context\n- Timestamp",
        "operationId": "get_error_analytics",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Error Analytics"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/copilotkit/analytics/hourly": {
      "get": {
        "tags": [
          "copilotkit"
        ],
        "summary": "Get hourly usage pattern",
        "description": "Get hourly usage pattern for capacity planning.\n\nUsage:\n    GET /api/copilotkit/analytics/hourly?days=7\n\nReturns usage distribution by hour of day.",
        "operationId": "get_hourly_pattern",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 7,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Hourly Pattern"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/status": {
      "get": {
        "tags": [
          "Agent Orchestration"
        ],
        "summary": "Get all agents status",
        "description": "Get status of all agents in the orchestration system.\n\nReturns the current status of all 18 agents across 6 tiers,\nincluding their capabilities and activity timestamps.",
        "operationId": "get_agent_status",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "tags": [
          "Metrics"
        ],
        "summary": "Metrics Endpoint",
        "description": "Prometheus metrics endpoint.\n\nReturns metrics in Prometheus text format for scraping.\nIncludes:\n- API request counts and latencies\n- Error rates by type\n- Agent invocation counts\n- Component health status\n\nReturns:\n    Response with Prometheus-formatted metrics",
        "operationId": "metrics_endpoint_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response"
          }
        }
      }
    },
    "/metrics/health": {
      "get": {
        "tags": [
          "Metrics"
        ],
        "summary": "Metrics Health",
        "description": "Check if metrics collection is operational.\n\nReturns:\n    Health status of the metrics subsystem",
        "operationId": "metrics_health_metrics_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Metrics Health Metrics Health Get"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AddEpisodeRequest": {
        "properties": {
          "content": {
            "type": "string",
            "maxLength": 10000,
            "minLength": 1,
            "title": "Content",
            "description": "Episode content text"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source of the episode (agent name or 'user')"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID for context"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Additional metadata"
          },
          "extract_entities": {
            "type": "boolean",
            "title": "Extract Entities",
            "description": "Automatically extract entities/relationships",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "content",
          "source"
        ],
        "title": "AddEpisodeRequest",
        "description": "Request for adding a knowledge episode.",
        "example": {
          "content": "Dr. Smith prescribed Kisqali for the patient with HR+/HER2- breast cancer, resulting in improved TRx in the Northeast region.",
          "metadata": {
            "query_type": "prescription_analysis"
          },
          "session_id": "sess_abc123",
          "source": "orchestrator"
        }
      },
      "AddEpisodeResponse": {
        "properties": {
          "episode_id": {
            "type": "string",
            "title": "Episode Id",
            "description": "Created episode ID"
          },
          "extracted_entities": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Extracted Entities",
            "description": "Entities extracted from content"
          },
          "extracted_relationships": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Extracted Relationships",
            "description": "Relationships extracted from content"
          },
          "content_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Summary",
            "description": "Brief content summary"
          },
          "processing_latency_ms": {
            "type": "number",
            "title": "Processing Latency Ms",
            "description": "Processing latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "episode_id",
          "processing_latency_ms"
        ],
        "title": "AddEpisodeResponse",
        "description": "Response for adding a knowledge episode.",
        "example": {
          "content_summary": "HCP prescription event for breast cancer treatment.",
          "episode_id": "ep_abc123",
          "extracted_entities": [
            {
              "name": "Dr. Smith",
              "type": "HCP"
            },
            {
              "name": "Kisqali",
              "type": "Brand"
            }
          ],
          "extracted_relationships": [
            {
              "source": "Dr. Smith",
              "target": "Kisqali",
              "type": "PRESCRIBES"
            }
          ],
          "processing_latency_ms": 210.5
        }
      },
      "AgentFeedbackStatsResponse": {
        "properties": {
          "agent_name": {
            "type": "string",
            "title": "Agent Name",
            "description": "Agent name"
          },
          "total_feedback": {
            "type": "integer",
            "title": "Total Feedback",
            "description": "Total feedback count"
          },
          "average_score": {
            "type": "number",
            "title": "Average Score",
            "description": "Average feedback score"
          },
          "positive_ratio": {
            "type": "number",
            "title": "Positive Ratio",
            "description": "Ratio of positive feedback"
          },
          "positive_count": {
            "type": "integer",
            "title": "Positive Count",
            "description": "Positive feedback count"
          },
          "negative_count": {
            "type": "integer",
            "title": "Negative Count",
            "description": "Negative feedback count"
          },
          "by_type": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "By Type",
            "description": "Count by feedback type"
          },
          "by_category": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "By Category",
            "description": "Count by category"
          },
          "score_trend": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "title": "Score Trend",
            "description": "Recent score trend"
          },
          "last_feedback_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Feedback Time",
            "description": "Last feedback time"
          }
        },
        "type": "object",
        "required": [
          "agent_name",
          "total_feedback",
          "average_score",
          "positive_ratio",
          "positive_count",
          "negative_count",
          "by_type",
          "by_category",
          "score_trend"
        ],
        "title": "AgentFeedbackStatsResponse",
        "description": "Response with agent feedback statistics."
      },
      "AgentHealth": {
        "properties": {
          "agent_name": {
            "type": "string",
            "title": "Agent Name",
            "description": "Agent identifier"
          },
          "tier": {
            "type": "integer",
            "title": "Tier",
            "description": "Agent tier (0-5)"
          },
          "available": {
            "type": "boolean",
            "title": "Available",
            "description": "Whether agent is available"
          },
          "avg_latency_ms": {
            "type": "integer",
            "title": "Avg Latency Ms",
            "description": "Average response latency",
            "default": 0
          },
          "success_rate": {
            "type": "number",
            "title": "Success Rate",
            "description": "Success rate (0-1)",
            "default": 1.0
          },
          "last_invocation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Invocation",
            "description": "Last invocation timestamp"
          },
          "invocations_24h": {
            "type": "integer",
            "title": "Invocations 24H",
            "description": "Invocations in last 24 hours",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "agent_name",
          "tier",
          "available"
        ],
        "title": "AgentHealth",
        "description": "Agent availability status."
      },
      "AgentHealthResponse": {
        "properties": {
          "agent_health_score": {
            "type": "number",
            "title": "Agent Health Score",
            "description": "Aggregate score (0-1)"
          },
          "total_agents": {
            "type": "integer",
            "title": "Total Agents",
            "description": "Total agents checked"
          },
          "available_count": {
            "type": "integer",
            "title": "Available Count",
            "description": "Available agent count"
          },
          "unavailable_count": {
            "type": "integer",
            "title": "Unavailable Count",
            "description": "Unavailable agent count"
          },
          "agents": {
            "items": {
              "$ref": "#/components/schemas/AgentHealth"
            },
            "type": "array",
            "title": "Agents",
            "description": "Agent details"
          },
          "by_tier": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "By Tier",
            "description": "Agent count by tier"
          },
          "check_latency_ms": {
            "type": "integer",
            "title": "Check Latency Ms",
            "description": "Check duration"
          }
        },
        "type": "object",
        "required": [
          "agent_health_score",
          "total_agents",
          "available_count",
          "unavailable_count",
          "agents",
          "by_tier",
          "check_latency_ms"
        ],
        "title": "AgentHealthResponse",
        "description": "Response for agent health check."
      },
      "AgentInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Agent identifier"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Human-readable agent name"
          },
          "tier": {
            "type": "integer",
            "maximum": 5.0,
            "minimum": 0.0,
            "title": "Tier",
            "description": "Agent tier (0-5)"
          },
          "status": {
            "$ref": "#/components/schemas/AgentStatusEnum",
            "description": "Current agent status"
          },
          "last_activity": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Activity",
            "description": "ISO timestamp of last activity"
          },
          "capabilities": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Capabilities",
            "description": "Agent capabilities"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "tier",
          "status"
        ],
        "title": "AgentInfo",
        "description": "Information about a single agent."
      },
      "AgentMetrics": {
        "properties": {
          "agent_name": {
            "type": "string",
            "title": "Agent Name"
          },
          "agent_tier": {
            "type": "integer",
            "title": "Agent Tier"
          },
          "total_invocations": {
            "type": "integer",
            "title": "Total Invocations",
            "default": 0
          },
          "successful_invocations": {
            "type": "integer",
            "title": "Successful Invocations",
            "default": 0
          },
          "failed_invocations": {
            "type": "integer",
            "title": "Failed Invocations",
            "default": 0
          },
          "success_rate": {
            "type": "number",
            "title": "Success Rate",
            "default": 0.0
          },
          "avg_latency_ms": {
            "type": "number",
            "title": "Avg Latency Ms",
            "default": 0.0
          },
          "p50_latency_ms": {
            "type": "number",
            "title": "P50 Latency Ms",
            "default": 0.0
          },
          "p95_latency_ms": {
            "type": "number",
            "title": "P95 Latency Ms",
            "default": 0.0
          },
          "p99_latency_ms": {
            "type": "number",
            "title": "P99 Latency Ms",
            "default": 0.0
          },
          "min_latency_ms": {
            "type": "number",
            "title": "Min Latency Ms",
            "default": 0.0
          },
          "max_latency_ms": {
            "type": "number",
            "title": "Max Latency Ms",
            "default": 0.0
          },
          "avg_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Confidence"
          }
        },
        "type": "object",
        "required": [
          "agent_name",
          "agent_tier"
        ],
        "title": "AgentMetrics",
        "description": "Performance metrics for a single agent."
      },
      "AgentPerformanceTrend": {
        "properties": {
          "agent_name": {
            "type": "string",
            "title": "Agent Name"
          },
          "data_points": {
            "items": {
              "$ref": "#/components/schemas/TimeSeriesPoint"
            },
            "type": "array",
            "title": "Data Points"
          },
          "period": {
            "type": "string",
            "title": "Period"
          }
        },
        "type": "object",
        "required": [
          "agent_name",
          "data_points",
          "period"
        ],
        "title": "AgentPerformanceTrend",
        "description": "Performance trend for a specific agent over time."
      },
      "AgentStatusEnum": {
        "type": "string",
        "enum": [
          "active",
          "idle",
          "processing",
          "error"
        ],
        "title": "AgentStatusEnum",
        "description": "Agent status values."
      },
      "AgentStatusResponse": {
        "properties": {
          "agents": {
            "items": {
              "$ref": "#/components/schemas/AgentInfo"
            },
            "type": "array",
            "title": "Agents",
            "description": "List of all agents with their status"
          },
          "total_agents": {
            "type": "integer",
            "title": "Total Agents",
            "description": "Total number of agents"
          },
          "active_count": {
            "type": "integer",
            "title": "Active Count",
            "description": "Number of active agents"
          },
          "processing_count": {
            "type": "integer",
            "title": "Processing Count",
            "description": "Number of processing agents"
          },
          "error_count": {
            "type": "integer",
            "title": "Error Count",
            "description": "Number of agents in error state"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Response timestamp"
          }
        },
        "type": "object",
        "required": [
          "agents",
          "total_agents",
          "active_count",
          "processing_count",
          "error_count",
          "timestamp"
        ],
        "title": "AgentStatusResponse",
        "description": "Response containing status of all agents."
      },
      "AggregationMethod": {
        "type": "string",
        "enum": [
          "variance_weighted",
          "sample_weighted",
          "equal",
          "bootstrap"
        ],
        "title": "AggregationMethod",
        "description": "Aggregation methods for nested CI."
      },
      "AlertAction": {
        "type": "string",
        "enum": [
          "acknowledge",
          "resolve",
          "snooze"
        ],
        "title": "AlertAction",
        "description": "Actions that can be taken on alerts."
      },
      "AlertActionRequest": {
        "properties": {
          "action": {
            "$ref": "#/components/schemas/AlertAction",
            "description": "Action to take on the alert"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "User performing the action"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Optional notes about the action"
          },
          "snooze_until": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Snooze Until",
            "description": "Snooze until this time (for snooze action)"
          }
        },
        "type": "object",
        "required": [
          "action"
        ],
        "title": "AlertActionRequest",
        "description": "Request to update an alert.",
        "example": {
          "action": "acknowledge",
          "notes": "Investigating the drift issue",
          "user_id": "user_123"
        }
      },
      "AlertItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version"
          },
          "alert_type": {
            "type": "string",
            "title": "Alert Type"
          },
          "severity": {
            "type": "string",
            "title": "Severity"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "status": {
            "$ref": "#/components/schemas/AlertStatus"
          },
          "triggered_at": {
            "type": "string",
            "format": "date-time",
            "title": "Triggered At"
          },
          "acknowledged_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Acknowledged At"
          },
          "acknowledged_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Acknowledged By"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved At"
          },
          "resolved_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved By"
          }
        },
        "type": "object",
        "required": [
          "id",
          "model_version",
          "alert_type",
          "severity",
          "title",
          "description",
          "status",
          "triggered_at"
        ],
        "title": "AlertItem",
        "description": "Alert record."
      },
      "AlertListResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "active_count": {
            "type": "integer",
            "title": "Active Count"
          },
          "alerts": {
            "items": {
              "$ref": "#/components/schemas/AlertItem"
            },
            "type": "array",
            "title": "Alerts"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "active_count",
          "alerts"
        ],
        "title": "AlertListResponse",
        "description": "Response for alert listing."
      },
      "AlertSeverity": {
        "type": "string",
        "enum": [
          "critical",
          "warning",
          "info"
        ],
        "title": "AlertSeverity",
        "description": "Alert severity levels."
      },
      "AlertStatus": {
        "type": "string",
        "enum": [
          "active",
          "acknowledged",
          "resolved",
          "snoozed"
        ],
        "title": "AlertStatus",
        "description": "Alert status values."
      },
      "AllocationResult": {
        "properties": {
          "entity_id": {
            "type": "string",
            "title": "Entity Id",
            "description": "Entity identifier"
          },
          "entity_type": {
            "type": "string",
            "title": "Entity Type",
            "description": "Entity type"
          },
          "current_allocation": {
            "type": "number",
            "title": "Current Allocation",
            "description": "Current allocation"
          },
          "optimized_allocation": {
            "type": "number",
            "title": "Optimized Allocation",
            "description": "Optimized allocation"
          },
          "change": {
            "type": "number",
            "title": "Change",
            "description": "Change from current"
          },
          "change_percentage": {
            "type": "number",
            "title": "Change Percentage",
            "description": "Change percentage"
          },
          "expected_impact": {
            "type": "number",
            "title": "Expected Impact",
            "description": "Expected outcome impact"
          }
        },
        "type": "object",
        "required": [
          "entity_id",
          "entity_type",
          "current_allocation",
          "optimized_allocation",
          "change",
          "change_percentage",
          "expected_impact"
        ],
        "title": "AllocationResult",
        "description": "Optimized allocation result for an entity."
      },
      "AllocationTarget": {
        "properties": {
          "entity_id": {
            "type": "string",
            "title": "Entity Id",
            "description": "Entity identifier"
          },
          "entity_type": {
            "type": "string",
            "title": "Entity Type",
            "description": "Entity type (hcp, territory, region)"
          },
          "current_allocation": {
            "type": "number",
            "title": "Current Allocation",
            "description": "Current allocation amount"
          },
          "min_allocation": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Allocation",
            "description": "Minimum allowed allocation"
          },
          "max_allocation": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Allocation",
            "description": "Maximum allowed allocation"
          },
          "expected_response": {
            "type": "number",
            "title": "Expected Response",
            "description": "Response coefficient",
            "default": 1.0
          }
        },
        "type": "object",
        "required": [
          "entity_id",
          "entity_type",
          "current_allocation"
        ],
        "title": "AllocationTarget",
        "description": "Target entity for resource allocation."
      },
      "AnalysisMethod": {
        "type": "string",
        "enum": [
          "itt",
          "per_protocol"
        ],
        "title": "AnalysisMethod",
        "description": "Analysis methods."
      },
      "AnalysisStatus": {
        "type": "string",
        "enum": [
          "pending",
          "estimating",
          "analyzing",
          "optimizing",
          "completed",
          "failed"
        ],
        "title": "AnalysisStatus",
        "description": "Status of segment analysis."
      },
      "AnalysisType": {
        "type": "string",
        "enum": [
          "interim",
          "final"
        ],
        "title": "AnalysisType",
        "description": "Analysis types."
      },
      "AnalyticsDashboardResponse": {
        "properties": {
          "summary": {
            "$ref": "#/components/schemas/QueryMetricsSummary"
          },
          "agent_metrics": {
            "items": {
              "$ref": "#/components/schemas/AgentMetrics"
            },
            "type": "array",
            "title": "Agent Metrics"
          },
          "latency_trend": {
            "items": {
              "$ref": "#/components/schemas/TimeSeriesPoint"
            },
            "type": "array",
            "title": "Latency Trend"
          },
          "query_volume_trend": {
            "items": {
              "$ref": "#/components/schemas/TimeSeriesPoint"
            },
            "type": "array",
            "title": "Query Volume Trend"
          },
          "latency_breakdown": {
            "$ref": "#/components/schemas/LatencyBreakdown"
          },
          "generated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Generated At"
          }
        },
        "type": "object",
        "required": [
          "summary",
          "agent_metrics",
          "latency_trend",
          "query_volume_trend",
          "latency_breakdown"
        ],
        "title": "AnalyticsDashboardResponse",
        "description": "Complete analytics dashboard response."
      },
      "ApplyUpdateRequest": {
        "properties": {
          "update_id": {
            "type": "string",
            "title": "Update Id",
            "description": "Update identifier to apply"
          },
          "force": {
            "type": "boolean",
            "title": "Force",
            "description": "Force apply even if not approved",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "update_id"
        ],
        "title": "ApplyUpdateRequest",
        "description": "Request to apply a knowledge update."
      },
      "AssignmentResult": {
        "properties": {
          "assignment_id": {
            "type": "string",
            "title": "Assignment Id"
          },
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "unit_id": {
            "type": "string",
            "title": "Unit Id"
          },
          "unit_type": {
            "type": "string",
            "title": "Unit Type"
          },
          "variant": {
            "type": "string",
            "title": "Variant"
          },
          "assigned_at": {
            "type": "string",
            "format": "date-time",
            "title": "Assigned At"
          },
          "randomization_method": {
            "type": "string",
            "title": "Randomization Method"
          },
          "stratification_key": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stratification Key"
          },
          "block_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Block Id"
          }
        },
        "type": "object",
        "required": [
          "assignment_id",
          "experiment_id",
          "unit_id",
          "unit_type",
          "variant",
          "assigned_at",
          "randomization_method"
        ],
        "title": "AssignmentResult",
        "description": "Result of a single assignment."
      },
      "AuditEntryResponse": {
        "properties": {
          "entry_id": {
            "type": "string",
            "format": "uuid",
            "title": "Entry Id"
          },
          "workflow_id": {
            "type": "string",
            "format": "uuid",
            "title": "Workflow Id"
          },
          "sequence_number": {
            "type": "integer",
            "title": "Sequence Number"
          },
          "agent_name": {
            "type": "string",
            "title": "Agent Name"
          },
          "agent_tier": {
            "type": "integer",
            "title": "Agent Tier"
          },
          "action_type": {
            "type": "string",
            "title": "Action Type"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "duration_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Ms"
          },
          "validation_passed": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validation Passed"
          },
          "confidence_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence Score"
          },
          "refutation_results": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Refutation Results"
          },
          "previous_entry_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Previous Entry Id"
          },
          "previous_hash": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Previous Hash"
          },
          "entry_hash": {
            "type": "string",
            "title": "Entry Hash"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          }
        },
        "type": "object",
        "required": [
          "entry_id",
          "workflow_id",
          "sequence_number",
          "agent_name",
          "agent_tier",
          "action_type",
          "created_at",
          "entry_hash"
        ],
        "title": "AuditEntryResponse",
        "description": "Response model for a single audit chain entry."
      },
      "BackendHealthStatus": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "healthy/degraded/unhealthy/unknown"
          },
          "latency_ms": {
            "type": "number",
            "title": "Latency Ms",
            "description": "Last check latency"
          },
          "last_check": {
            "type": "string",
            "format": "date-time",
            "title": "Last Check",
            "description": "Last health check time"
          },
          "consecutive_failures": {
            "type": "integer",
            "title": "Consecutive Failures",
            "description": "Consecutive failure count",
            "default": 0
          },
          "circuit_breaker_state": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Circuit Breaker State",
            "description": "Circuit breaker state"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Last error message"
          }
        },
        "type": "object",
        "required": [
          "status",
          "latency_ms",
          "last_check"
        ],
        "title": "BackendHealthStatus",
        "description": "Health status for a single backend."
      },
      "BatchExplainRequest": {
        "properties": {
          "requests": {
            "items": {
              "$ref": "#/components/schemas/ExplainRequest"
            },
            "type": "array",
            "maxItems": 50,
            "title": "Requests",
            "description": "Up to 50 patients per batch"
          },
          "parallel": {
            "type": "boolean",
            "title": "Parallel",
            "description": "Process in parallel",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "requests"
        ],
        "title": "BatchExplainRequest",
        "description": "Batch explanation request for multiple patients."
      },
      "BatchExplainResponse": {
        "properties": {
          "batch_id": {
            "type": "string",
            "title": "Batch Id"
          },
          "total_requests": {
            "type": "integer",
            "title": "Total Requests"
          },
          "successful": {
            "type": "integer",
            "title": "Successful"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          },
          "explanations": {
            "items": {
              "$ref": "#/components/schemas/ExplainResponse"
            },
            "type": "array",
            "title": "Explanations"
          },
          "errors": {
            "items": {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            },
            "type": "array",
            "title": "Errors"
          },
          "total_time_ms": {
            "type": "number",
            "title": "Total Time Ms"
          }
        },
        "type": "object",
        "required": [
          "batch_id",
          "total_requests",
          "successful",
          "failed",
          "explanations",
          "errors",
          "total_time_ms"
        ],
        "title": "BatchExplainResponse",
        "description": "Batch explanation response."
      },
      "BatchKPICalculationRequest": {
        "properties": {
          "kpi_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kpi Ids",
            "description": "List of specific KPI IDs to calculate. If None, uses workstream.",
            "examples": [
              [
                "WS1-DQ-001",
                "WS1-DQ-002",
                "WS1-MP-001"
              ]
            ]
          },
          "workstream": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workstream",
            "description": "Calculate all KPIs for this workstream",
            "examples": [
              "ws1_data_quality",
              "ws2_triggers"
            ]
          },
          "use_cache": {
            "type": "boolean",
            "title": "Use Cache",
            "description": "Whether to use cached results if available",
            "default": true
          },
          "context": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/KPICalculationContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Calculation context for all KPIs"
          }
        },
        "type": "object",
        "title": "BatchKPICalculationRequest",
        "description": "Request schema for batch KPI calculation.",
        "example": {
          "kpi_ids": [
            "WS1-DQ-001",
            "WS1-DQ-002",
            "WS1-MP-001"
          ],
          "use_cache": true
        }
      },
      "BatchKPICalculationResponse": {
        "properties": {
          "workstream": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workstream",
            "description": "Workstream if specified"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/KPIResultResponse"
            },
            "type": "array",
            "title": "Results",
            "description": "List of KPI results"
          },
          "calculated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Calculated At",
            "description": "Batch calculation timestamp"
          },
          "total_kpis": {
            "type": "integer",
            "title": "Total Kpis",
            "description": "Total number of KPIs requested"
          },
          "successful": {
            "type": "integer",
            "title": "Successful",
            "description": "Number of successful calculations"
          },
          "failed": {
            "type": "integer",
            "title": "Failed",
            "description": "Number of failed calculations"
          }
        },
        "type": "object",
        "required": [
          "calculated_at",
          "total_kpis",
          "successful",
          "failed"
        ],
        "title": "BatchKPICalculationResponse",
        "description": "Response schema for batch KPI calculation.",
        "example": {
          "calculated_at": "2026-02-06T12:00:00Z",
          "failed": 1,
          "successful": 4,
          "total_kpis": 5,
          "workstream": "ws1_data_quality"
        }
      },
      "BatchPredictionRequest": {
        "properties": {
          "instances": {
            "items": {
              "$ref": "#/components/schemas/PredictionRequest"
            },
            "type": "array",
            "maxItems": 1000,
            "minItems": 1,
            "title": "Instances",
            "description": "List of prediction requests"
          }
        },
        "type": "object",
        "required": [
          "instances"
        ],
        "title": "BatchPredictionRequest",
        "description": "Request schema for batch predictions."
      },
      "BatchPredictionResponse": {
        "properties": {
          "model_name": {
            "type": "string",
            "title": "Model Name",
            "description": "Name of the model used"
          },
          "predictions": {
            "items": {
              "$ref": "#/components/schemas/PredictionResponse"
            },
            "type": "array",
            "title": "Predictions",
            "description": "List of prediction results"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of predictions"
          },
          "success_count": {
            "type": "integer",
            "title": "Success Count",
            "description": "Number of successful predictions"
          },
          "failed_count": {
            "type": "integer",
            "title": "Failed Count",
            "description": "Number of failed predictions"
          },
          "total_latency_ms": {
            "type": "number",
            "title": "Total Latency Ms",
            "description": "Total processing time"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Batch processing timestamp"
          }
        },
        "type": "object",
        "required": [
          "model_name",
          "predictions",
          "total_count",
          "success_count",
          "failed_count",
          "total_latency_ms",
          "timestamp"
        ],
        "title": "BatchPredictionResponse",
        "description": "Response schema for batch predictions."
      },
      "BrandEnum": {
        "type": "string",
        "enum": [
          "Remibrutinib",
          "Fabhalta",
          "Kisqali"
        ],
        "title": "BrandEnum",
        "description": "Pharmaceutical brands."
      },
      "CATEResult": {
        "properties": {
          "segment_name": {
            "type": "string",
            "title": "Segment Name",
            "description": "Segment dimension name"
          },
          "segment_value": {
            "type": "string",
            "title": "Segment Value",
            "description": "Segment value"
          },
          "cate_estimate": {
            "type": "number",
            "title": "Cate Estimate",
            "description": "Conditional Average Treatment Effect"
          },
          "cate_ci_lower": {
            "type": "number",
            "title": "Cate Ci Lower",
            "description": "95% CI lower bound"
          },
          "cate_ci_upper": {
            "type": "number",
            "title": "Cate Ci Upper",
            "description": "95% CI upper bound"
          },
          "sample_size": {
            "type": "integer",
            "title": "Sample Size",
            "description": "Number of observations in segment"
          },
          "statistical_significance": {
            "type": "boolean",
            "title": "Statistical Significance",
            "description": "Whether effect is statistically significant"
          }
        },
        "type": "object",
        "required": [
          "segment_name",
          "segment_value",
          "cate_estimate",
          "cate_ci_lower",
          "cate_ci_upper",
          "sample_size",
          "statistical_significance"
        ],
        "title": "CATEResult",
        "description": "CATE estimation result for a segment."
      },
      "CacheInvalidationRequest": {
        "properties": {
          "kpi_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kpi Id",
            "description": "Specific KPI ID to invalidate (optional)"
          },
          "workstream": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workstream",
            "description": "Invalidate all KPIs for this workstream (optional)"
          },
          "invalidate_all": {
            "type": "boolean",
            "title": "Invalidate All",
            "description": "Invalidate all cached KPIs (use with caution)",
            "default": false
          }
        },
        "type": "object",
        "title": "CacheInvalidationRequest",
        "description": "Request schema for cache invalidation.",
        "example": {
          "kpi_id": "WS1-DQ-001"
        }
      },
      "CacheInvalidationResponse": {
        "properties": {
          "invalidated_count": {
            "type": "integer",
            "title": "Invalidated Count",
            "description": "Number of cache entries invalidated"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "invalidated_count",
          "message"
        ],
        "title": "CacheInvalidationResponse",
        "description": "Response schema for cache invalidation.",
        "example": {
          "invalidated_count": 3,
          "message": "Invalidated 3 cache entries for workstream ws1_data_quality"
        }
      },
      "CausalChainRequest": {
        "properties": {
          "kpi_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kpi Name",
            "description": "Target KPI name"
          },
          "source_entity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Entity Id",
            "description": "Source entity for chain"
          },
          "target_entity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Entity Id",
            "description": "Target entity for chain"
          },
          "min_effect_size": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Effect Size",
            "description": "Minimum causal effect size"
          },
          "min_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Min Confidence",
            "description": "Minimum confidence",
            "default": 0.5
          },
          "max_chain_length": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Max Chain Length",
            "description": "Maximum chain length",
            "default": 4
          }
        },
        "type": "object",
        "title": "CausalChainRequest",
        "description": "Request for causal chain queries.",
        "example": {
          "kpi_name": "TRx",
          "max_chain_length": 3,
          "min_confidence": 0.6
        }
      },
      "CausalChainResponse": {
        "properties": {
          "chains": {
            "items": {
              "$ref": "#/components/schemas/GraphPath"
            },
            "type": "array",
            "title": "Chains",
            "description": "Discovered causal chains"
          },
          "total_chains": {
            "type": "integer",
            "title": "Total Chains",
            "description": "Number of chains found"
          },
          "strongest_chain": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/GraphPath"
              },
              {
                "type": "null"
              }
            ],
            "description": "Highest confidence chain"
          },
          "aggregate_effect": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Aggregate Effect",
            "description": "Aggregate causal effect"
          },
          "query_latency_ms": {
            "type": "number",
            "title": "Query Latency Ms",
            "description": "Query latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "chains",
          "total_chains",
          "query_latency_ms"
        ],
        "title": "CausalChainResponse",
        "description": "Response for causal chain queries.",
        "example": {
          "aggregate_effect": 0.72,
          "chains": [],
          "query_latency_ms": 45.2,
          "total_chains": 3
        }
      },
      "CausalHealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Overall health status",
            "examples": [
              "healthy",
              "degraded",
              "unhealthy"
            ]
          },
          "libraries_available": {
            "additionalProperties": {
              "type": "boolean"
            },
            "type": "object",
            "title": "Libraries Available",
            "description": "Availability of each library"
          },
          "estimators_loaded": {
            "type": "integer",
            "title": "Estimators Loaded",
            "description": "Number of estimators loaded"
          },
          "pipeline_orchestrator_ready": {
            "type": "boolean",
            "title": "Pipeline Orchestrator Ready",
            "description": "Whether pipeline orchestrator is ready"
          },
          "hierarchical_analyzer_ready": {
            "type": "boolean",
            "title": "Hierarchical Analyzer Ready",
            "description": "Whether hierarchical analyzer is ready"
          },
          "last_analysis": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Analysis",
            "description": "Timestamp of last analysis"
          },
          "analysis_count_24h": {
            "type": "integer",
            "title": "Analysis Count 24H",
            "description": "Analyses run in last 24 hours",
            "default": 0
          },
          "average_latency_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Average Latency Ms",
            "description": "Average analysis latency"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if unhealthy"
          }
        },
        "type": "object",
        "required": [
          "status",
          "libraries_available",
          "estimators_loaded",
          "pipeline_orchestrator_ready",
          "hierarchical_analyzer_ready"
        ],
        "title": "CausalHealthResponse",
        "description": "Response for causal engine health check.",
        "example": {
          "analysis_count_24h": 42,
          "average_latency_ms": 3200,
          "estimators_loaded": 14,
          "hierarchical_analyzer_ready": true,
          "libraries_available": {
            "causalml": true,
            "dowhy": true,
            "econml": true,
            "networkx": true
          },
          "pipeline_orchestrator_ready": true,
          "status": "healthy"
        }
      },
      "CausalLibrary": {
        "type": "string",
        "enum": [
          "dowhy",
          "econml",
          "causalml",
          "networkx"
        ],
        "title": "CausalLibrary",
        "description": "Supported causal inference libraries."
      },
      "CausalPathResponse": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source entity"
          },
          "target": {
            "type": "string",
            "title": "Target",
            "description": "Target entity"
          },
          "paths": {
            "items": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "type": "array",
            "title": "Paths",
            "description": "List of paths (node sequences)"
          },
          "shortest_path_length": {
            "type": "integer",
            "title": "Shortest Path Length",
            "description": "Length of shortest path"
          },
          "total_paths": {
            "type": "integer",
            "title": "Total Paths",
            "description": "Number of paths found"
          },
          "query_time_ms": {
            "type": "number",
            "title": "Query Time Ms",
            "description": "Query time in milliseconds"
          }
        },
        "type": "object",
        "required": [
          "source",
          "target",
          "paths",
          "shortest_path_length",
          "total_paths",
          "query_time_ms"
        ],
        "title": "CausalPathResponse",
        "description": "Causal path between two entities."
      },
      "CausalSubgraphResponse": {
        "properties": {
          "entity": {
            "type": "string",
            "title": "Entity",
            "description": "Center entity of the subgraph"
          },
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/src__api__routes__rag__GraphNode"
            },
            "type": "array",
            "title": "Nodes",
            "description": "Graph nodes"
          },
          "edges": {
            "items": {
              "$ref": "#/components/schemas/GraphEdge"
            },
            "type": "array",
            "title": "Edges",
            "description": "Graph edges"
          },
          "depth": {
            "type": "integer",
            "title": "Depth",
            "description": "Traversal depth"
          },
          "node_count": {
            "type": "integer",
            "title": "Node Count",
            "description": "Total node count"
          },
          "edge_count": {
            "type": "integer",
            "title": "Edge Count",
            "description": "Total edge count"
          },
          "query_time_ms": {
            "type": "number",
            "title": "Query Time Ms",
            "description": "Query time in milliseconds"
          }
        },
        "type": "object",
        "required": [
          "entity",
          "nodes",
          "edges",
          "depth",
          "node_count",
          "edge_count",
          "query_time_ms"
        ],
        "title": "CausalSubgraphResponse",
        "description": "Causal subgraph for visualization."
      },
      "ChainVerificationResponse": {
        "properties": {
          "workflow_id": {
            "type": "string",
            "format": "uuid",
            "title": "Workflow Id"
          },
          "is_valid": {
            "type": "boolean",
            "title": "Is Valid"
          },
          "entries_checked": {
            "type": "integer",
            "title": "Entries Checked"
          },
          "first_invalid_entry": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "First Invalid Entry"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "verified_at": {
            "type": "string",
            "format": "date-time",
            "title": "Verified At"
          }
        },
        "type": "object",
        "required": [
          "workflow_id",
          "is_valid",
          "entries_checked",
          "verified_at"
        ],
        "title": "ChainVerificationResponse",
        "description": "Response model for chain verification result."
      },
      "ChatRequest": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "User's query text"
          },
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "User UUID"
          },
          "request_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Request Id",
            "description": "Unique request identifier (auto-extracted from X-Request-ID header if not provided)"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID (generated if not provided)"
          },
          "brand_context": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand Context",
            "description": "Brand filter (Kisqali, Fabhalta, Remibrutinib)"
          },
          "region_context": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region Context",
            "description": "Region filter (US, EU, APAC)"
          }
        },
        "type": "object",
        "required": [
          "query",
          "user_id"
        ],
        "title": "ChatRequest",
        "description": "Request schema for chatbot endpoints.\n\nNote: request_id is optional - if not provided, it will be extracted from\nthe X-Request-ID header via TracingMiddleware (Phase 1 G08)."
      },
      "ChatResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "response": {
            "type": "string",
            "title": "Response"
          },
          "conversation_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Title"
          },
          "agent_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Name"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "orchestrator_used": {
            "type": "boolean",
            "title": "Orchestrator Used",
            "default": false
          },
          "agents_dispatched": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Agents Dispatched",
            "default": []
          },
          "routed_agent": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Routed Agent"
          },
          "response_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Response Confidence"
          },
          "execution_time_ms": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Time Ms"
          },
          "intent": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Intent"
          },
          "intent_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Intent Confidence"
          },
          "routing_rationale": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Routing Rationale"
          }
        },
        "type": "object",
        "required": [
          "success",
          "session_id",
          "response"
        ],
        "title": "ChatResponse",
        "description": "Response schema for non-streaming chatbot endpoint."
      },
      "CheckScope": {
        "type": "string",
        "enum": [
          "full",
          "quick",
          "models",
          "pipelines",
          "agents"
        ],
        "title": "CheckScope",
        "description": "Scope of health check."
      },
      "CognitivePhase": {
        "type": "string",
        "enum": [
          "summarize",
          "investigate",
          "execute",
          "reflect",
          "complete"
        ],
        "title": "CognitivePhase",
        "description": "Phases of the cognitive workflow."
      },
      "CognitiveQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Query",
            "description": "User query"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Existing session ID to continue"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "User identifier"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Brand context (Kisqali, Fabhalta, Remibrutinib)"
          },
          "region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "Region context"
          },
          "query_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/QueryType"
              },
              {
                "type": "null"
              }
            ],
            "description": "Type of query (auto-detected if not specified)"
          },
          "include_evidence": {
            "type": "boolean",
            "title": "Include Evidence",
            "description": "Include evidence trail in response",
            "default": true
          },
          "max_memory_results": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Max Memory Results",
            "description": "Max memory results to retrieve",
            "default": 10
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "CognitiveQueryRequest",
        "description": "Request for full cognitive query processing.",
        "example": {
          "brand": "Kisqali",
          "include_evidence": true,
          "query": "Why did TRx drop 15% in northeast region last quarter?",
          "query_type": "causal",
          "region": "northeast"
        }
      },
      "CognitiveQueryResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "description": "Session identifier"
          },
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query"
          },
          "response": {
            "type": "string",
            "title": "Response",
            "description": "Generated response"
          },
          "query_type": {
            "$ref": "#/components/schemas/QueryType",
            "description": "Detected or specified query type"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Response confidence"
          },
          "agent_used": {
            "type": "string",
            "title": "Agent Used",
            "description": "Primary agent that handled the query"
          },
          "evidence": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/EvidenceItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Evidence",
            "description": "Evidence trail"
          },
          "phases_completed": {
            "items": {
              "$ref": "#/components/schemas/CognitivePhase"
            },
            "type": "array",
            "title": "Phases Completed",
            "description": "Workflow phases completed"
          },
          "processing_time_ms": {
            "type": "number",
            "title": "Processing Time Ms",
            "description": "Total processing time in ms"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "query",
          "response",
          "query_type",
          "confidence",
          "agent_used",
          "phases_completed",
          "processing_time_ms"
        ],
        "title": "CognitiveQueryResponse",
        "description": "Response from cognitive query processing."
      },
      "CognitiveRAGRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Query",
            "description": "Natural language query"
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Id",
            "description": "Conversation/session ID for context continuity"
          },
          "conversation_history": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation History",
            "description": "Compressed conversation history"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "CognitiveRAGRequest",
        "description": "Request for DSPy-enhanced cognitive RAG search.",
        "example": {
          "conversation_id": "session-abc-123",
          "query": "Why did Kisqali adoption increase in the Northeast last quarter?"
        }
      },
      "CognitiveRAGResponse": {
        "properties": {
          "response": {
            "type": "string",
            "title": "Response",
            "description": "Synthesized natural language response"
          },
          "evidence": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Evidence",
            "description": "Evidence pieces gathered"
          },
          "hop_count": {
            "type": "integer",
            "title": "Hop Count",
            "description": "Number of retrieval hops performed",
            "default": 0
          },
          "visualization_config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Visualization Config",
            "description": "Chart configuration if applicable"
          },
          "routed_agents": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Routed Agents",
            "description": "Agents recommended for further processing"
          },
          "entities": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Entities",
            "description": "Extracted entities"
          },
          "intent": {
            "type": "string",
            "title": "Intent",
            "description": "Detected query intent",
            "default": ""
          },
          "rewritten_query": {
            "type": "string",
            "title": "Rewritten Query",
            "description": "DSPy-optimized query rewrite",
            "default": ""
          },
          "dspy_signals": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Dspy Signals",
            "description": "Training signals for optimization"
          },
          "worth_remembering": {
            "type": "boolean",
            "title": "Worth Remembering",
            "description": "Whether this exchange should be stored in long-term memory",
            "default": false
          },
          "latency_ms": {
            "type": "number",
            "title": "Latency Ms",
            "description": "Total processing time in milliseconds"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if processing failed"
          }
        },
        "type": "object",
        "required": [
          "response",
          "latency_ms"
        ],
        "title": "CognitiveRAGResponse",
        "description": "Response from DSPy-enhanced cognitive RAG search.",
        "example": {
          "entities": [
            "Kisqali",
            "Northeast"
          ],
          "evidence": [
            {
              "content": "Northeast TRx up 15%...",
              "source": "agent_activities"
            }
          ],
          "hop_count": 2,
          "intent": "causal",
          "latency_ms": 1250.5,
          "response": "Kisqali adoption increased 15% in the Northeast due to increased oncologist engagement and successful speaker programs."
        }
      },
      "CompleteRetrainingRequest": {
        "properties": {
          "performance_after": {
            "type": "number",
            "title": "Performance After",
            "description": "Performance metric after retraining"
          },
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether retraining was successful",
            "default": true
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Additional notes"
          }
        },
        "type": "object",
        "required": [
          "performance_after"
        ],
        "title": "CompleteRetrainingRequest",
        "description": "Request to mark retraining as complete.",
        "example": {
          "notes": "Model retrained with expanded dataset",
          "performance_after": 0.92,
          "success": true
        }
      },
      "ComponentHealth": {
        "properties": {
          "component_name": {
            "type": "string",
            "title": "Component Name",
            "description": "Component identifier"
          },
          "status": {
            "$ref": "#/components/schemas/ComponentStatus",
            "description": "Component status"
          },
          "latency_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latency Ms",
            "description": "Check latency in ms"
          },
          "last_check": {
            "type": "string",
            "title": "Last Check",
            "description": "Last check timestamp"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error message if unhealthy"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional details"
          }
        },
        "type": "object",
        "required": [
          "component_name",
          "status",
          "last_check"
        ],
        "title": "ComponentHealth",
        "description": "Status of a system component."
      },
      "ComponentHealthResponse": {
        "properties": {
          "component_health_score": {
            "type": "number",
            "title": "Component Health Score",
            "description": "Aggregate score (0-1)"
          },
          "total_components": {
            "type": "integer",
            "title": "Total Components",
            "description": "Total components checked"
          },
          "healthy_count": {
            "type": "integer",
            "title": "Healthy Count",
            "description": "Healthy component count"
          },
          "degraded_count": {
            "type": "integer",
            "title": "Degraded Count",
            "description": "Degraded component count"
          },
          "unhealthy_count": {
            "type": "integer",
            "title": "Unhealthy Count",
            "description": "Unhealthy component count"
          },
          "components": {
            "items": {
              "$ref": "#/components/schemas/ComponentHealth"
            },
            "type": "array",
            "title": "Components",
            "description": "Component details"
          },
          "check_latency_ms": {
            "type": "integer",
            "title": "Check Latency Ms",
            "description": "Check duration"
          }
        },
        "type": "object",
        "required": [
          "component_health_score",
          "total_components",
          "healthy_count",
          "degraded_count",
          "unhealthy_count",
          "components",
          "check_latency_ms"
        ],
        "title": "ComponentHealthResponse",
        "description": "Response for component health check."
      },
      "ComponentStatus": {
        "type": "string",
        "enum": [
          "healthy",
          "degraded",
          "unhealthy",
          "unknown"
        ],
        "title": "ComponentStatus",
        "description": "Status of a system component."
      },
      "ConfidenceInterval": {
        "properties": {
          "lower_bound": {
            "type": "number",
            "title": "Lower Bound",
            "description": "2.5th percentile"
          },
          "median": {
            "type": "number",
            "title": "Median",
            "description": "50th percentile"
          },
          "upper_bound": {
            "type": "number",
            "title": "Upper Bound",
            "description": "97.5th percentile"
          },
          "probability_positive": {
            "type": "number",
            "title": "Probability Positive",
            "description": "P(ROI > 1x)"
          },
          "probability_target": {
            "type": "number",
            "title": "Probability Target",
            "description": "P(ROI > target)"
          }
        },
        "type": "object",
        "required": [
          "lower_bound",
          "median",
          "upper_bound",
          "probability_positive",
          "probability_target"
        ],
        "title": "ConfidenceInterval",
        "description": "Bootstrap confidence interval for ROI estimates."
      },
      "Constraint": {
        "properties": {
          "constraint_type": {
            "$ref": "#/components/schemas/ConstraintType",
            "description": "Type of constraint"
          },
          "value": {
            "type": "number",
            "title": "Value",
            "description": "Constraint value"
          },
          "scope": {
            "$ref": "#/components/schemas/ConstraintScope",
            "description": "Constraint scope",
            "default": "global"
          }
        },
        "type": "object",
        "required": [
          "constraint_type",
          "value"
        ],
        "title": "Constraint",
        "description": "Optimization constraint."
      },
      "ConstraintScope": {
        "type": "string",
        "enum": [
          "global",
          "regional",
          "entity"
        ],
        "title": "ConstraintScope",
        "description": "Scope of constraints."
      },
      "ConstraintType": {
        "type": "string",
        "enum": [
          "budget",
          "capacity",
          "min_coverage",
          "max_frequency"
        ],
        "title": "ConstraintType",
        "description": "Types of optimization constraints."
      },
      "CreateSessionRequest": {
        "properties": {
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "User identifier"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Brand context"
          },
          "region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "Region context"
          },
          "initial_context": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Initial Context",
            "description": "Initial context"
          }
        },
        "type": "object",
        "title": "CreateSessionRequest",
        "description": "Request to create a new cognitive session."
      },
      "CreateSessionResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "description": "Created session ID"
          },
          "state": {
            "$ref": "#/components/schemas/SessionState",
            "default": "active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At",
            "description": "Session expiration time"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "expires_at"
        ],
        "title": "CreateSessionResponse",
        "description": "Response for session creation."
      },
      "CrossValidationRequest": {
        "properties": {
          "treatment_var": {
            "type": "string",
            "title": "Treatment Var",
            "description": "Treatment variable"
          },
          "outcome_var": {
            "type": "string",
            "title": "Outcome Var",
            "description": "Outcome variable"
          },
          "covariates": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Covariates",
            "description": "Covariate variables"
          },
          "data_source": {
            "type": "string",
            "title": "Data Source",
            "description": "Data source",
            "default": "mock_data"
          },
          "primary_library": {
            "$ref": "#/components/schemas/CausalLibrary",
            "description": "Primary library for validation"
          },
          "validation_library": {
            "$ref": "#/components/schemas/CausalLibrary",
            "description": "Library to validate against"
          },
          "agreement_threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.5,
            "title": "Agreement Threshold",
            "description": "Minimum agreement threshold",
            "default": 0.85
          },
          "bootstrap_iterations": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 10.0,
            "title": "Bootstrap Iterations",
            "description": "Bootstrap iterations for CI comparison",
            "default": 100
          }
        },
        "type": "object",
        "required": [
          "treatment_var",
          "outcome_var",
          "primary_library",
          "validation_library"
        ],
        "title": "CrossValidationRequest",
        "description": "Request for cross-library validation.",
        "example": {
          "agreement_threshold": 0.85,
          "outcome_var": "outcome",
          "primary_library": "econml",
          "treatment_var": "treatment",
          "validation_library": "causalml"
        }
      },
      "CrossValidationResponse": {
        "properties": {
          "validation_id": {
            "type": "string",
            "title": "Validation Id",
            "description": "Unique validation identifier"
          },
          "primary_library": {
            "type": "string",
            "title": "Primary Library",
            "description": "Primary library"
          },
          "validation_library": {
            "type": "string",
            "title": "Validation Library",
            "description": "Validation library"
          },
          "primary_effect": {
            "type": "number",
            "title": "Primary Effect",
            "description": "Effect from primary library"
          },
          "primary_ci": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "maxItems": 2,
            "minItems": 2,
            "title": "Primary Ci",
            "description": "Primary confidence interval [lower, upper]"
          },
          "validation_effect": {
            "type": "number",
            "title": "Validation Effect",
            "description": "Effect from validation library"
          },
          "validation_ci": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "maxItems": 2,
            "minItems": 2,
            "title": "Validation Ci",
            "description": "Validation confidence interval [lower, upper]"
          },
          "effect_difference": {
            "type": "number",
            "title": "Effect Difference",
            "description": "Absolute difference in effects"
          },
          "relative_difference": {
            "type": "number",
            "title": "Relative Difference",
            "description": "Relative difference percentage"
          },
          "ci_overlap_ratio": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Ci Overlap Ratio",
            "description": "CI overlap ratio"
          },
          "agreement_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Agreement Score",
            "description": "Overall agreement score"
          },
          "validation_passed": {
            "type": "boolean",
            "title": "Validation Passed",
            "description": "Whether validation threshold met"
          },
          "agreement_threshold": {
            "type": "number",
            "title": "Agreement Threshold",
            "description": "Threshold used"
          },
          "latency_ms": {
            "type": "integer",
            "title": "Latency Ms",
            "description": "Validation execution time"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Validation timestamp"
          },
          "recommendations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "Recommendations based on results"
          }
        },
        "type": "object",
        "required": [
          "validation_id",
          "primary_library",
          "validation_library",
          "primary_effect",
          "primary_ci",
          "validation_effect",
          "validation_ci",
          "effect_difference",
          "relative_difference",
          "ci_overlap_ratio",
          "agreement_score",
          "validation_passed",
          "agreement_threshold",
          "latency_ms",
          "created_at"
        ],
        "title": "CrossValidationResponse",
        "description": "Response from cross-library validation.",
        "example": {
          "agreement_score": 0.91,
          "agreement_threshold": 0.85,
          "ci_overlap_ratio": 0.88,
          "created_at": "2026-02-06T12:00:00Z",
          "effect_difference": 0.02,
          "latency_ms": 6300,
          "primary_ci": [
            0.14,
            0.3
          ],
          "primary_effect": 0.22,
          "primary_library": "econml",
          "recommendations": [
            "High cross-library agreement supports causal conclusion."
          ],
          "relative_difference": 9.1,
          "validation_ci": [
            0.11,
            0.29
          ],
          "validation_effect": 0.2,
          "validation_id": "xval_001",
          "validation_library": "causalml",
          "validation_passed": true
        }
      },
      "CypherQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Query",
            "description": "openCypher query string"
          },
          "parameters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parameters",
            "description": "Query parameters"
          },
          "timeout_seconds": {
            "type": "integer",
            "maximum": 120.0,
            "minimum": 1.0,
            "title": "Timeout Seconds",
            "description": "Query timeout",
            "default": 30
          },
          "read_only": {
            "type": "boolean",
            "title": "Read Only",
            "description": "Enforce read-only query",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "CypherQueryRequest",
        "description": "Request for executing openCypher queries.",
        "example": {
          "parameters": {
            "brand": "Kisqali"
          },
          "query": "MATCH (h:HCP)-[:PRESCRIBES]->(b:Brand) WHERE b.name = $brand RETURN h LIMIT 10",
          "read_only": true
        }
      },
      "CypherQueryResponse": {
        "properties": {
          "results": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Results",
            "description": "Query results"
          },
          "columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Columns",
            "description": "Result column names"
          },
          "row_count": {
            "type": "integer",
            "title": "Row Count",
            "description": "Number of result rows"
          },
          "query_latency_ms": {
            "type": "number",
            "title": "Query Latency Ms",
            "description": "Query latency in milliseconds"
          },
          "read_only": {
            "type": "boolean",
            "title": "Read Only",
            "description": "Whether query was read-only"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "results",
          "columns",
          "row_count",
          "query_latency_ms",
          "read_only"
        ],
        "title": "CypherQueryResponse",
        "description": "Response for openCypher query execution.",
        "example": {
          "columns": [
            "h.name",
            "h.specialty"
          ],
          "query_latency_ms": 12.8,
          "read_only": true,
          "results": [
            {
              "h.name": "Dr. Smith",
              "h.specialty": "Oncology"
            }
          ],
          "row_count": 10
        }
      },
      "DetectedPattern": {
        "properties": {
          "pattern_id": {
            "type": "string",
            "title": "Pattern Id",
            "description": "Unique pattern identifier"
          },
          "pattern_type": {
            "$ref": "#/components/schemas/PatternType",
            "description": "Type of pattern"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Human-readable description"
          },
          "frequency": {
            "type": "integer",
            "title": "Frequency",
            "description": "Number of occurrences"
          },
          "severity": {
            "$ref": "#/components/schemas/PatternSeverity",
            "description": "Impact severity"
          },
          "affected_agents": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Affected Agents",
            "description": "Agents affected by this pattern"
          },
          "example_feedback_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Example Feedback Ids",
            "description": "Example feedback IDs"
          },
          "root_cause_hypothesis": {
            "type": "string",
            "title": "Root Cause Hypothesis",
            "description": "Hypothesized root cause"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Detection confidence (0-1)"
          }
        },
        "type": "object",
        "required": [
          "pattern_id",
          "pattern_type",
          "description",
          "frequency",
          "severity",
          "affected_agents",
          "example_feedback_ids",
          "root_cause_hypothesis",
          "confidence"
        ],
        "title": "DetectedPattern",
        "description": "Pattern detected from feedback analysis."
      },
      "DigitalTwinHealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Service health status"
          },
          "service": {
            "type": "string",
            "title": "Service",
            "description": "Service name",
            "default": "digital-twin"
          },
          "models_available": {
            "type": "integer",
            "title": "Models Available",
            "description": "Number of twin models available"
          },
          "simulations_pending": {
            "type": "integer",
            "title": "Simulations Pending",
            "description": "Number of pending simulations"
          },
          "last_simulation_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Simulation At",
            "description": "Timestamp of last simulation"
          }
        },
        "type": "object",
        "required": [
          "status",
          "models_available",
          "simulations_pending"
        ],
        "title": "DigitalTwinHealthResponse",
        "description": "Health status for Digital Twin service."
      },
      "DriftDetectionResponse": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id",
            "description": "Celery task ID (if async)"
          },
          "model_id": {
            "type": "string",
            "title": "Model Id",
            "description": "Model that was checked"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Detection status"
          },
          "overall_drift_score": {
            "type": "number",
            "title": "Overall Drift Score",
            "description": "Overall drift severity (0-1)",
            "default": 0.0
          },
          "features_checked": {
            "type": "integer",
            "title": "Features Checked",
            "description": "Number of features checked",
            "default": 0
          },
          "features_with_drift": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Features With Drift",
            "description": "Features with detected drift"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/DriftResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Detailed drift results"
          },
          "drift_summary": {
            "type": "string",
            "title": "Drift Summary",
            "description": "Human-readable summary",
            "default": ""
          },
          "recommended_actions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommended Actions",
            "description": "Recommended actions"
          },
          "detection_latency_ms": {
            "type": "integer",
            "title": "Detection Latency Ms",
            "description": "Detection time in ms",
            "default": 0
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Detection timestamp"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "model_id",
          "status"
        ],
        "title": "DriftDetectionResponse",
        "description": "Response from drift detection.",
        "example": {
          "detection_latency_ms": 1250,
          "drift_summary": "Moderate drift detected in 2 features",
          "features_checked": 25,
          "features_with_drift": [
            "days_since_last_visit",
            "rx_count"
          ],
          "model_id": "propensity_v2.1.0",
          "overall_drift_score": 0.35,
          "recommended_actions": [
            "Investigate feature drift",
            "Consider retraining"
          ],
          "status": "completed",
          "task_id": "abc123"
        }
      },
      "DriftHistoryItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version"
          },
          "feature_name": {
            "type": "string",
            "title": "Feature Name"
          },
          "drift_type": {
            "type": "string",
            "title": "Drift Type"
          },
          "drift_score": {
            "type": "number",
            "title": "Drift Score"
          },
          "severity": {
            "type": "string",
            "title": "Severity"
          },
          "detected_at": {
            "type": "string",
            "format": "date-time",
            "title": "Detected At"
          },
          "baseline_start": {
            "type": "string",
            "format": "date-time",
            "title": "Baseline Start"
          },
          "baseline_end": {
            "type": "string",
            "format": "date-time",
            "title": "Baseline End"
          },
          "current_start": {
            "type": "string",
            "format": "date-time",
            "title": "Current Start"
          },
          "current_end": {
            "type": "string",
            "format": "date-time",
            "title": "Current End"
          }
        },
        "type": "object",
        "required": [
          "id",
          "model_version",
          "feature_name",
          "drift_type",
          "drift_score",
          "severity",
          "detected_at",
          "baseline_start",
          "baseline_end",
          "current_start",
          "current_end"
        ],
        "title": "DriftHistoryItem",
        "description": "Historical drift record."
      },
      "DriftHistoryResponse": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "total_records": {
            "type": "integer",
            "title": "Total Records"
          },
          "records": {
            "items": {
              "$ref": "#/components/schemas/DriftHistoryItem"
            },
            "type": "array",
            "title": "Records"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "total_records",
          "records"
        ],
        "title": "DriftHistoryResponse",
        "description": "Response for drift history query."
      },
      "DriftResult": {
        "properties": {
          "feature": {
            "type": "string",
            "title": "Feature",
            "description": "Feature or metric name"
          },
          "drift_type": {
            "$ref": "#/components/schemas/DriftType",
            "description": "Type of drift detected"
          },
          "test_statistic": {
            "type": "number",
            "title": "Test Statistic",
            "description": "Statistical test value"
          },
          "p_value": {
            "type": "number",
            "title": "P Value",
            "description": "P-value from statistical test"
          },
          "drift_detected": {
            "type": "boolean",
            "title": "Drift Detected",
            "description": "Whether drift was detected"
          },
          "severity": {
            "$ref": "#/components/schemas/DriftSeverity",
            "description": "Severity level"
          },
          "baseline_period": {
            "type": "string",
            "title": "Baseline Period",
            "description": "Baseline time period label"
          },
          "current_period": {
            "type": "string",
            "title": "Current Period",
            "description": "Current time period label"
          }
        },
        "type": "object",
        "required": [
          "feature",
          "drift_type",
          "test_statistic",
          "p_value",
          "drift_detected",
          "severity",
          "baseline_period",
          "current_period"
        ],
        "title": "DriftResult",
        "description": "Single drift detection result.",
        "example": {
          "baseline_period": "2024-12-01 to 2024-12-08",
          "current_period": "2024-12-08 to 2024-12-15",
          "drift_detected": true,
          "drift_type": "data",
          "feature": "days_since_last_visit",
          "p_value": 0.023,
          "severity": "medium",
          "test_statistic": 0.156
        }
      },
      "DriftSeverity": {
        "type": "string",
        "enum": [
          "none",
          "low",
          "medium",
          "high",
          "critical"
        ],
        "title": "DriftSeverity",
        "description": "Drift severity levels."
      },
      "DriftType": {
        "type": "string",
        "enum": [
          "data",
          "model",
          "concept",
          "all"
        ],
        "title": "DriftType",
        "description": "Types of drift detection."
      },
      "EffectHeterogeneityResponse": {
        "properties": {
          "by_specialty": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "number"
              },
              "type": "object"
            },
            "type": "object",
            "title": "By Specialty",
            "default": {}
          },
          "by_decile": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "number"
              },
              "type": "object"
            },
            "type": "object",
            "title": "By Decile",
            "default": {}
          },
          "by_region": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "number"
              },
              "type": "object"
            },
            "type": "object",
            "title": "By Region",
            "default": {}
          },
          "by_adoption_stage": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "number"
              },
              "type": "object"
            },
            "type": "object",
            "title": "By Adoption Stage",
            "default": {}
          },
          "top_segments": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Top Segments",
            "default": []
          }
        },
        "type": "object",
        "title": "EffectHeterogeneityResponse",
        "description": "Heterogeneous effects across subgroups."
      },
      "EnrollUnitRequest": {
        "properties": {
          "unit_id": {
            "type": "string",
            "title": "Unit Id",
            "description": "Unit identifier (HCP, patient, etc.)"
          },
          "unit_type": {
            "type": "string",
            "title": "Unit Type",
            "description": "Type of unit (hcp, patient, territory)"
          },
          "consent_timestamp": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Consent Timestamp",
            "description": "When consent was obtained"
          },
          "eligibility_criteria_met": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Eligibility Criteria Met",
            "description": "Eligibility criteria evaluation results"
          }
        },
        "type": "object",
        "required": [
          "unit_id",
          "unit_type"
        ],
        "title": "EnrollUnitRequest",
        "description": "Request to enroll a unit in an experiment.",
        "example": {
          "consent_timestamp": "2024-12-20T10:30:00Z",
          "eligibility_criteria_met": {
            "experience_years": true,
            "specialty": true
          },
          "unit_id": "hcp_001",
          "unit_type": "hcp"
        }
      },
      "EnrollmentResult": {
        "properties": {
          "enrollment_id": {
            "type": "string",
            "title": "Enrollment Id"
          },
          "assignment_id": {
            "type": "string",
            "title": "Assignment Id"
          },
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "unit_id": {
            "type": "string",
            "title": "Unit Id"
          },
          "variant": {
            "type": "string",
            "title": "Variant"
          },
          "enrolled_at": {
            "type": "string",
            "format": "date-time",
            "title": "Enrolled At"
          },
          "enrollment_status": {
            "$ref": "#/components/schemas/EnrollmentStatus"
          },
          "consent_timestamp": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Consent Timestamp"
          }
        },
        "type": "object",
        "required": [
          "enrollment_id",
          "assignment_id",
          "experiment_id",
          "unit_id",
          "variant",
          "enrolled_at",
          "enrollment_status"
        ],
        "title": "EnrollmentResult",
        "description": "Result of enrollment."
      },
      "EnrollmentStatsResponse": {
        "properties": {
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "total_enrolled": {
            "type": "integer",
            "title": "Total Enrolled"
          },
          "active_count": {
            "type": "integer",
            "title": "Active Count"
          },
          "withdrawn_count": {
            "type": "integer",
            "title": "Withdrawn Count"
          },
          "completed_count": {
            "type": "integer",
            "title": "Completed Count"
          },
          "enrollment_rate_per_day": {
            "type": "number",
            "title": "Enrollment Rate Per Day"
          },
          "variant_breakdown": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Variant Breakdown"
          },
          "enrollment_trend": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Enrollment Trend"
          }
        },
        "type": "object",
        "required": [
          "experiment_id",
          "total_enrolled",
          "active_count",
          "withdrawn_count",
          "completed_count",
          "enrollment_rate_per_day",
          "variant_breakdown",
          "enrollment_trend"
        ],
        "title": "EnrollmentStatsResponse",
        "description": "Enrollment statistics for an experiment."
      },
      "EnrollmentStatus": {
        "type": "string",
        "enum": [
          "active",
          "withdrawn",
          "completed"
        ],
        "title": "EnrollmentStatus",
        "description": "Enrollment status values."
      },
      "EntityType": {
        "type": "string",
        "enum": [
          "Patient",
          "HCP",
          "Brand",
          "Region",
          "KPI",
          "CausalPath",
          "Trigger",
          "Agent",
          "Episode",
          "Community",
          "Treatment",
          "Prediction",
          "Experiment",
          "AgentActivity",
          "HCPSpecialty",
          "JourneyStage"
        ],
        "title": "EntityType",
        "description": "Entity types in the E2I knowledge graph."
      },
      "EpisodicMemoryInput": {
        "properties": {
          "content": {
            "type": "string",
            "maxLength": 10000,
            "minLength": 1,
            "title": "Content",
            "description": "Memory content"
          },
          "event_type": {
            "type": "string",
            "title": "Event Type",
            "description": "Type of event (query, response, action)"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID"
          },
          "agent_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Name",
            "description": "Agent that created this memory"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Brand context"
          },
          "region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "Region context"
          },
          "hcp_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hcp Id",
            "description": "Associated HCP ID"
          },
          "patient_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Patient Id",
            "description": "Associated patient ID"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "content",
          "event_type"
        ],
        "title": "EpisodicMemoryInput",
        "description": "Input for creating episodic memory.",
        "example": {
          "agent_name": "orchestrator",
          "brand": "Kisqali",
          "content": "User asked about TRx trends in northeast region for Kisqali",
          "event_type": "query",
          "region": "northeast",
          "session_id": "sess_abc123"
        }
      },
      "EpisodicMemoryResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Memory ID"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Memory content"
          },
          "event_type": {
            "type": "string",
            "title": "Event Type",
            "description": "Event type"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id"
          },
          "agent_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Name"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata"
          }
        },
        "type": "object",
        "required": [
          "id",
          "content",
          "event_type"
        ],
        "title": "EpisodicMemoryResponse",
        "description": "Response for episodic memory operations."
      },
      "ErrorResponse": {
        "properties": {
          "error": {
            "type": "string",
            "title": "Error",
            "description": "Error class name (e.g. 'NotFoundError')"
          },
          "error_id": {
            "type": "string",
            "title": "Error Id",
            "description": "Short unique ID for support reference"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "Error category",
            "examples": [
              "validation",
              "authentication",
              "not_found",
              "internal",
              "agent_error"
            ]
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable error message"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "UTC timestamp of the error"
          },
          "suggested_action": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggested Action",
            "description": "Actionable guidance for resolving the error"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional error context"
          }
        },
        "type": "object",
        "required": [
          "error",
          "error_id",
          "category",
          "message",
          "timestamp"
        ],
        "title": "ErrorResponse",
        "description": "Standard structured error returned by all API endpoints.",
        "example": {
          "category": "not_found",
          "error": "NotFoundError",
          "error_id": "a1b2c3d4",
          "message": "Endpoint '/api/nonexistent' not found",
          "suggested_action": "Check the API documentation at /api/docs for available endpoints.",
          "timestamp": "2026-02-06T12:00:00Z"
        }
      },
      "EstimatorInfo": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Estimator name"
          },
          "library": {
            "$ref": "#/components/schemas/CausalLibrary",
            "description": "Source library"
          },
          "estimator_type": {
            "type": "string",
            "title": "Estimator Type",
            "description": "Type (CATE, uplift, identification, etc.)"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Brief description"
          },
          "best_for": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Best For",
            "description": "Best use cases"
          },
          "parameters": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Parameters",
            "description": "Key parameters"
          },
          "supports_confidence_intervals": {
            "type": "boolean",
            "title": "Supports Confidence Intervals",
            "description": "Whether CI is supported"
          },
          "supports_heterogeneous_effects": {
            "type": "boolean",
            "title": "Supports Heterogeneous Effects",
            "description": "Whether HTE is supported"
          }
        },
        "type": "object",
        "required": [
          "name",
          "library",
          "estimator_type",
          "description",
          "supports_confidence_intervals",
          "supports_heterogeneous_effects"
        ],
        "title": "EstimatorInfo",
        "description": "Information about a causal estimator."
      },
      "EstimatorListResponse": {
        "properties": {
          "estimators": {
            "items": {
              "$ref": "#/components/schemas/EstimatorInfo"
            },
            "type": "array",
            "title": "Estimators",
            "description": "Available estimators"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total estimators"
          },
          "by_library": {
            "additionalProperties": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "type": "object",
            "title": "By Library",
            "description": "Estimators grouped by library"
          }
        },
        "type": "object",
        "required": [
          "total"
        ],
        "title": "EstimatorListResponse",
        "description": "Response listing available estimators.",
        "example": {
          "by_library": {
            "causalml": [
              "uplift_random_forest",
              "uplift_gradient_boosting"
            ],
            "dowhy": [
              "propensity_score_matching",
              "inverse_propensity_weighting"
            ],
            "econml": [
              "causal_forest",
              "linear_dml",
              "dr_learner"
            ]
          },
          "estimators": [
            {
              "best_for": [
                "effect heterogeneity",
                "targeting"
              ],
              "description": "Generalized Random Forest for heterogeneous treatment effects",
              "estimator_type": "CATE",
              "library": "econml",
              "name": "causal_forest",
              "parameters": [
                "n_estimators",
                "min_samples_leaf"
              ],
              "supports_confidence_intervals": true,
              "supports_heterogeneous_effects": true
            }
          ],
          "total": 14
        }
      },
      "EstimatorType": {
        "type": "string",
        "enum": [
          "causal_forest",
          "linear_dml",
          "ortho_forest",
          "dr_learner",
          "x_learner",
          "t_learner",
          "s_learner",
          "ols",
          "uplift_random_forest",
          "uplift_gradient_boosting",
          "propensity_score_matching",
          "inverse_propensity_weighting",
          "regression_discontinuity",
          "instrumental_variable"
        ],
        "title": "EstimatorType",
        "description": "Available causal estimators."
      },
      "EvidenceItem": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Evidence content"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Memory source"
          },
          "relevance_score": {
            "type": "number",
            "title": "Relevance Score",
            "description": "Relevance score"
          },
          "retrieval_method": {
            "type": "string",
            "title": "Retrieval Method",
            "description": "How it was retrieved"
          }
        },
        "type": "object",
        "required": [
          "content",
          "source",
          "relevance_score",
          "retrieval_method"
        ],
        "title": "EvidenceItem",
        "description": "Single piece of evidence from memory retrieval."
      },
      "ExperimentHealthSummary": {
        "properties": {
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "experiment_name": {
            "type": "string",
            "title": "Experiment Name"
          },
          "health_status": {
            "$ref": "#/components/schemas/HealthStatus"
          },
          "total_enrolled": {
            "type": "integer",
            "title": "Total Enrolled"
          },
          "enrollment_rate_per_day": {
            "type": "number",
            "title": "Enrollment Rate Per Day"
          },
          "current_information_fraction": {
            "type": "number",
            "title": "Current Information Fraction"
          },
          "has_srm": {
            "type": "boolean",
            "title": "Has Srm"
          },
          "active_alerts": {
            "type": "integer",
            "title": "Active Alerts"
          },
          "last_checked": {
            "type": "string",
            "format": "date-time",
            "title": "Last Checked"
          }
        },
        "type": "object",
        "required": [
          "experiment_id",
          "experiment_name",
          "health_status",
          "total_enrolled",
          "enrollment_rate_per_day",
          "current_information_fraction",
          "has_srm",
          "active_alerts",
          "last_checked"
        ],
        "title": "ExperimentHealthSummary",
        "description": "Experiment health summary."
      },
      "ExperimentResults": {
        "properties": {
          "result_id": {
            "type": "string",
            "title": "Result Id"
          },
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "analysis_type": {
            "$ref": "#/components/schemas/AnalysisType"
          },
          "analysis_method": {
            "$ref": "#/components/schemas/AnalysisMethod"
          },
          "computed_at": {
            "type": "string",
            "format": "date-time",
            "title": "Computed At"
          },
          "primary_metric": {
            "type": "string",
            "title": "Primary Metric"
          },
          "control_mean": {
            "type": "number",
            "title": "Control Mean"
          },
          "treatment_mean": {
            "type": "number",
            "title": "Treatment Mean"
          },
          "effect_estimate": {
            "type": "number",
            "title": "Effect Estimate"
          },
          "effect_ci_lower": {
            "type": "number",
            "title": "Effect Ci Lower"
          },
          "effect_ci_upper": {
            "type": "number",
            "title": "Effect Ci Upper"
          },
          "p_value": {
            "type": "number",
            "title": "P Value"
          },
          "sample_size_control": {
            "type": "integer",
            "title": "Sample Size Control"
          },
          "sample_size_treatment": {
            "type": "integer",
            "title": "Sample Size Treatment"
          },
          "statistical_power": {
            "type": "number",
            "title": "Statistical Power"
          },
          "is_significant": {
            "type": "boolean",
            "title": "Is Significant"
          },
          "secondary_metrics": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secondary Metrics"
          },
          "segment_results": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segment Results"
          }
        },
        "type": "object",
        "required": [
          "result_id",
          "experiment_id",
          "analysis_type",
          "analysis_method",
          "computed_at",
          "primary_metric",
          "control_mean",
          "treatment_mean",
          "effect_estimate",
          "effect_ci_lower",
          "effect_ci_upper",
          "p_value",
          "sample_size_control",
          "sample_size_treatment",
          "statistical_power",
          "is_significant"
        ],
        "title": "ExperimentResults",
        "description": "Experiment analysis results."
      },
      "ExplainRequest": {
        "properties": {
          "patient_id": {
            "type": "string",
            "title": "Patient Id",
            "description": "Patient identifier"
          },
          "hcp_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hcp Id",
            "description": "HCP context for the prediction"
          },
          "model_type": {
            "$ref": "#/components/schemas/ModelType",
            "description": "Type of model to explain"
          },
          "model_version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Version Id",
            "description": "Specific model version (latest if not specified)"
          },
          "features": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Features",
            "description": "Pre-computed features (fetched from Feast if not provided)"
          },
          "format": {
            "$ref": "#/components/schemas/ExplanationFormat",
            "description": "Output format",
            "default": "top_k"
          },
          "top_k": {
            "type": "integer",
            "maximum": 20.0,
            "minimum": 1.0,
            "title": "Top K",
            "description": "Number of top features to return",
            "default": 5
          },
          "include_base_value": {
            "type": "boolean",
            "title": "Include Base Value",
            "description": "Include model's base prediction value",
            "default": true
          },
          "store_for_audit": {
            "type": "boolean",
            "title": "Store For Audit",
            "description": "Store explanation in ml_shap_analyses for compliance",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "patient_id",
          "model_type"
        ],
        "title": "ExplainRequest",
        "description": "Request payload for real-time explanation.",
        "example": {
          "format": "top_k",
          "hcp_id": "HCP-NE-5678",
          "model_type": "propensity",
          "patient_id": "PAT-2024-001234",
          "store_for_audit": true,
          "top_k": 5
        }
      },
      "ExplainResponse": {
        "properties": {
          "explanation_id": {
            "type": "string",
            "title": "Explanation Id",
            "description": "Unique ID for this explanation (for audit trail)"
          },
          "request_timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Request Timestamp",
            "description": "When request was received"
          },
          "patient_id": {
            "type": "string",
            "title": "Patient Id"
          },
          "model_type": {
            "$ref": "#/components/schemas/ModelType"
          },
          "model_version_id": {
            "type": "string",
            "title": "Model Version Id"
          },
          "prediction_class": {
            "type": "string",
            "title": "Prediction Class",
            "description": "Predicted class label"
          },
          "prediction_probability": {
            "type": "number",
            "title": "Prediction Probability",
            "description": "Prediction confidence [0-1]"
          },
          "base_value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Value",
            "description": "Model's expected value (average prediction)"
          },
          "top_features": {
            "items": {
              "$ref": "#/components/schemas/FeatureContribution"
            },
            "type": "array",
            "title": "Top Features",
            "description": "Top contributing features"
          },
          "shap_sum": {
            "type": "number",
            "title": "Shap Sum",
            "description": "Sum of all SHAP values (should equal prediction - base_value)"
          },
          "narrative_explanation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Narrative Explanation",
            "description": "Natural language explanation (if format=narrative)"
          },
          "computation_time_ms": {
            "type": "number",
            "title": "Computation Time Ms",
            "description": "Time to compute explanation"
          },
          "audit_stored": {
            "type": "boolean",
            "title": "Audit Stored",
            "description": "Whether explanation was stored for compliance"
          }
        },
        "type": "object",
        "required": [
          "explanation_id",
          "request_timestamp",
          "patient_id",
          "model_type",
          "model_version_id",
          "prediction_class",
          "prediction_probability",
          "top_features",
          "shap_sum",
          "computation_time_ms",
          "audit_stored"
        ],
        "title": "ExplainResponse",
        "description": "Response payload with prediction + SHAP explanation.",
        "example": {
          "audit_stored": true,
          "base_value": 0.42,
          "computation_time_ms": 127.5,
          "explanation_id": "EXPL-2024-abc123",
          "model_type": "propensity",
          "model_version_id": "v2.3.1-prod",
          "patient_id": "PAT-2024-001234",
          "prediction_class": "high_propensity",
          "prediction_probability": 0.78,
          "request_timestamp": "2024-12-15T10:30:00Z",
          "shap_sum": 0.36,
          "top_features": [
            {
              "contribution_direction": "positive",
              "contribution_rank": 1,
              "feature_name": "days_since_last_hcp_visit",
              "feature_value": 45,
              "shap_value": 0.15
            }
          ]
        }
      },
      "ExplanationFormat": {
        "type": "string",
        "enum": [
          "full",
          "top_k",
          "narrative",
          "minimal"
        ],
        "title": "ExplanationFormat",
        "description": "Output format for SHAP explanations."
      },
      "ExtractedEntitiesResponse": {
        "properties": {
          "brands": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Brands"
          },
          "regions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Regions"
          },
          "kpis": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Kpis"
          },
          "agents": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Agents"
          },
          "journey_stages": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Journey Stages"
          },
          "time_references": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Time References"
          },
          "hcp_segments": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Hcp Segments"
          }
        },
        "type": "object",
        "title": "ExtractedEntitiesResponse",
        "description": "Extracted entities from query."
      },
      "FeatureContribution": {
        "properties": {
          "feature_name": {
            "type": "string",
            "title": "Feature Name",
            "description": "Name of the feature"
          },
          "feature_value": {
            "title": "Feature Value",
            "description": "Actual value of feature for this instance"
          },
          "shap_value": {
            "type": "number",
            "title": "Shap Value",
            "description": "SHAP contribution to prediction"
          },
          "contribution_direction": {
            "type": "string",
            "title": "Contribution Direction",
            "description": "positive or negative"
          },
          "contribution_rank": {
            "type": "integer",
            "title": "Contribution Rank",
            "description": "Rank by absolute SHAP value"
          }
        },
        "type": "object",
        "required": [
          "feature_name",
          "feature_value",
          "shap_value",
          "contribution_direction",
          "contribution_rank"
        ],
        "title": "FeatureContribution",
        "description": "Single feature's contribution to prediction.",
        "example": {
          "contribution_direction": "positive",
          "contribution_rank": 1,
          "feature_name": "days_since_last_hcp_visit",
          "feature_value": 45,
          "shap_value": 0.234
        }
      },
      "FeedbackHealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Service status"
          },
          "agent_available": {
            "type": "boolean",
            "title": "Agent Available",
            "description": "Feedback Learner agent status"
          },
          "last_learning_cycle": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Learning Cycle",
            "description": "Last learning cycle timestamp"
          },
          "cycles_24h": {
            "type": "integer",
            "title": "Cycles 24H",
            "description": "Learning cycles in last 24 hours",
            "default": 0
          },
          "patterns_active": {
            "type": "integer",
            "title": "Patterns Active",
            "description": "Active patterns being tracked",
            "default": 0
          },
          "pending_updates": {
            "type": "integer",
            "title": "Pending Updates",
            "description": "Updates pending approval",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "status",
          "agent_available"
        ],
        "title": "FeedbackHealthResponse",
        "description": "Health check response for feedback learning service."
      },
      "FeedbackItem": {
        "properties": {
          "feedback_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Feedback Id",
            "description": "Unique feedback identifier (auto-generated if not provided)"
          },
          "timestamp": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timestamp",
            "description": "Feedback timestamp (ISO format)"
          },
          "feedback_type": {
            "$ref": "#/components/schemas/FeedbackType",
            "description": "Type of feedback"
          },
          "source_agent": {
            "type": "string",
            "title": "Source Agent",
            "description": "Agent that generated the original response"
          },
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original user query"
          },
          "agent_response": {
            "type": "string",
            "title": "Agent Response",
            "description": "Agent's response to the query"
          },
          "user_feedback": {
            "title": "User Feedback",
            "description": "User's feedback (rating, correction, outcome, etc.)"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "feedback_type",
          "source_agent",
          "query",
          "agent_response",
          "user_feedback"
        ],
        "title": "FeedbackItem",
        "description": "Individual feedback item to process.",
        "example": {
          "agent_response": "Based on causal analysis, rep visits have the strongest effect...",
          "feedback_type": "rating",
          "query": "What drives TRx for Kisqali?",
          "source_agent": "causal_impact",
          "user_feedback": {
            "helpful": true,
            "rating": 4
          }
        }
      },
      "FeedbackRequest": {
        "properties": {
          "message_id": {
            "type": "integer",
            "title": "Message Id",
            "description": "ID of the message being rated"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Conversation session ID (optional - will be looked up from message if not provided)"
          },
          "rating": {
            "type": "string",
            "title": "Rating",
            "description": "Rating: 'thumbs_up' or 'thumbs_down'"
          },
          "comment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Comment",
            "description": "Optional user comment"
          },
          "query_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query Text",
            "description": "The user query that led to this response"
          },
          "response_preview": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Response Preview",
            "description": "First 500 chars of the response"
          },
          "agent_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Name",
            "description": "Which agent generated the response"
          },
          "tools_used": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tools Used",
            "description": "Tools used in generating the response"
          }
        },
        "type": "object",
        "required": [
          "message_id",
          "rating"
        ],
        "title": "FeedbackRequest",
        "description": "Request schema for submitting message feedback."
      },
      "FeedbackResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "feedback_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Feedback Id"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "FeedbackResponse",
        "description": "Response schema for feedback endpoints."
      },
      "FeedbackSummary": {
        "properties": {
          "total_feedback_items": {
            "type": "integer",
            "title": "Total Feedback Items",
            "description": "Total items processed"
          },
          "by_type": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "By Type",
            "description": "Count by feedback type"
          },
          "by_agent": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "By Agent",
            "description": "Count by source agent"
          },
          "average_rating": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Average Rating",
            "description": "Average rating (if applicable)"
          },
          "positive_ratio": {
            "type": "number",
            "title": "Positive Ratio",
            "description": "Ratio of positive feedback"
          },
          "time_range_start": {
            "type": "string",
            "title": "Time Range Start",
            "description": "Analysis start time"
          },
          "time_range_end": {
            "type": "string",
            "title": "Time Range End",
            "description": "Analysis end time"
          }
        },
        "type": "object",
        "required": [
          "total_feedback_items",
          "by_type",
          "by_agent",
          "positive_ratio",
          "time_range_start",
          "time_range_end"
        ],
        "title": "FeedbackSummary",
        "description": "Summary statistics from feedback analysis."
      },
      "FeedbackType": {
        "type": "string",
        "enum": [
          "rating",
          "correction",
          "outcome",
          "explicit"
        ],
        "title": "FeedbackType",
        "description": "Types of user feedback."
      },
      "FidelityComparison": {
        "properties": {
          "comparison_id": {
            "type": "string",
            "title": "Comparison Id"
          },
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "twin_simulation_id": {
            "type": "string",
            "title": "Twin Simulation Id"
          },
          "comparison_timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Comparison Timestamp"
          },
          "predicted_effect": {
            "type": "number",
            "title": "Predicted Effect"
          },
          "actual_effect": {
            "type": "number",
            "title": "Actual Effect"
          },
          "prediction_error": {
            "type": "number",
            "title": "Prediction Error"
          },
          "confidence_interval_coverage": {
            "type": "boolean",
            "title": "Confidence Interval Coverage"
          },
          "fidelity_score": {
            "type": "number",
            "title": "Fidelity Score"
          },
          "calibration_adjustment": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Calibration Adjustment"
          }
        },
        "type": "object",
        "required": [
          "comparison_id",
          "experiment_id",
          "twin_simulation_id",
          "comparison_timestamp",
          "predicted_effect",
          "actual_effect",
          "prediction_error",
          "confidence_interval_coverage",
          "fidelity_score"
        ],
        "title": "FidelityComparison",
        "description": "Digital Twin fidelity comparison."
      },
      "FidelityGradeEnum": {
        "type": "string",
        "enum": [
          "excellent",
          "good",
          "fair",
          "poor",
          "unvalidated"
        ],
        "title": "FidelityGradeEnum",
        "description": "Fidelity grade values."
      },
      "FidelityHistoryResponse": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "total_validations": {
            "type": "integer",
            "title": "Total Validations"
          },
          "average_fidelity_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Average Fidelity Score"
          },
          "grade_distribution": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Grade Distribution"
          },
          "records": {
            "items": {
              "$ref": "#/components/schemas/FidelityRecordResponse"
            },
            "type": "array",
            "title": "Records"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "total_validations",
          "grade_distribution",
          "records"
        ],
        "title": "FidelityHistoryResponse",
        "description": "Fidelity history for a model."
      },
      "FidelityRecordResponse": {
        "properties": {
          "tracking_id": {
            "type": "string",
            "title": "Tracking Id"
          },
          "simulation_id": {
            "type": "string",
            "title": "Simulation Id"
          },
          "experiment_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Experiment Id"
          },
          "simulated_ate": {
            "type": "number",
            "title": "Simulated Ate"
          },
          "simulated_ci_lower": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Simulated Ci Lower"
          },
          "simulated_ci_upper": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Simulated Ci Upper"
          },
          "actual_ate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Ate"
          },
          "actual_ci_lower": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Ci Lower"
          },
          "actual_ci_upper": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Ci Upper"
          },
          "actual_sample_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Sample Size"
          },
          "prediction_error": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prediction Error"
          },
          "absolute_error": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Absolute Error"
          },
          "ci_coverage": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ci Coverage"
          },
          "fidelity_grade": {
            "$ref": "#/components/schemas/FidelityGradeEnum"
          },
          "validation_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validation Notes"
          },
          "confounding_factors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Confounding Factors",
            "default": []
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "validated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validated At"
          },
          "validated_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validated By"
          }
        },
        "type": "object",
        "required": [
          "tracking_id",
          "simulation_id",
          "simulated_ate",
          "fidelity_grade",
          "created_at"
        ],
        "title": "FidelityRecordResponse",
        "description": "Fidelity validation record."
      },
      "FidelityReportResponse": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "total_validations": {
            "type": "integer",
            "title": "Total Validations"
          },
          "average_fidelity_score": {
            "type": "number",
            "title": "Average Fidelity Score"
          },
          "coverage_rate": {
            "type": "number",
            "title": "Coverage Rate"
          },
          "grade_distribution": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Grade Distribution"
          },
          "trend": {
            "type": "string",
            "title": "Trend"
          },
          "is_degrading": {
            "type": "boolean",
            "title": "Is Degrading"
          },
          "degradation_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Degradation Rate"
          },
          "recommendation": {
            "type": "string",
            "title": "Recommendation"
          },
          "generated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Generated At"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "total_validations",
          "average_fidelity_score",
          "coverage_rate",
          "grade_distribution",
          "trend",
          "is_degrading",
          "recommendation",
          "generated_at"
        ],
        "title": "FidelityReportResponse",
        "description": "Aggregated fidelity report for a model."
      },
      "GapAnalysisResponse": {
        "properties": {
          "analysis_id": {
            "type": "string",
            "title": "Analysis Id",
            "description": "Unique analysis identifier"
          },
          "status": {
            "$ref": "#/components/schemas/src__api__routes__gaps__AnalysisStatus",
            "description": "Analysis status"
          },
          "brand": {
            "type": "string",
            "title": "Brand",
            "description": "Brand analyzed"
          },
          "metrics_analyzed": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Metrics Analyzed",
            "description": "KPIs analyzed"
          },
          "segments_analyzed": {
            "type": "integer",
            "title": "Segments Analyzed",
            "description": "Number of segments"
          },
          "prioritized_opportunities": {
            "items": {
              "$ref": "#/components/schemas/PrioritizedOpportunity"
            },
            "type": "array",
            "title": "Prioritized Opportunities",
            "description": "All opportunities ranked by ROI"
          },
          "quick_wins": {
            "items": {
              "$ref": "#/components/schemas/PrioritizedOpportunity"
            },
            "type": "array",
            "title": "Quick Wins",
            "description": "Low difficulty, high ROI (top 5)"
          },
          "strategic_bets": {
            "items": {
              "$ref": "#/components/schemas/PrioritizedOpportunity"
            },
            "type": "array",
            "title": "Strategic Bets",
            "description": "High impact, high difficulty (top 5)"
          },
          "total_addressable_value": {
            "type": "number",
            "title": "Total Addressable Value",
            "description": "Total potential revenue impact",
            "default": 0.0
          },
          "total_gap_value": {
            "type": "number",
            "title": "Total Gap Value",
            "description": "Sum of all gap sizes",
            "default": 0.0
          },
          "executive_summary": {
            "type": "string",
            "title": "Executive Summary",
            "description": "Executive-level summary",
            "default": ""
          },
          "key_insights": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Key Insights",
            "description": "Key findings"
          },
          "libraries_used": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Libraries Used",
            "description": "Causal libraries used"
          },
          "library_agreement_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Library Agreement Score",
            "description": "Agreement between libraries"
          },
          "detection_latency_ms": {
            "type": "integer",
            "title": "Detection Latency Ms",
            "description": "Detection time",
            "default": 0
          },
          "roi_latency_ms": {
            "type": "integer",
            "title": "Roi Latency Ms",
            "description": "ROI calculation time",
            "default": 0
          },
          "total_latency_ms": {
            "type": "integer",
            "title": "Total Latency Ms",
            "description": "Total workflow time",
            "default": 0
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Analysis timestamp"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Analysis warnings"
          }
        },
        "type": "object",
        "required": [
          "analysis_id",
          "status",
          "brand",
          "metrics_analyzed",
          "segments_analyzed"
        ],
        "title": "GapAnalysisResponse",
        "description": "Response from gap analysis.",
        "example": {
          "analysis_id": "gap_abc123",
          "brand": "kisqali",
          "executive_summary": "Identified 8 high-value opportunities...",
          "metrics_analyzed": [
            "trx",
            "market_share"
          ],
          "segments_analyzed": 12,
          "status": "completed",
          "total_addressable_value": 2500000.0,
          "total_gap_value": 15.3,
          "total_latency_ms": 3500
        }
      },
      "GapHealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Service status"
          },
          "agent_available": {
            "type": "boolean",
            "title": "Agent Available",
            "description": "Gap Analyzer agent status"
          },
          "last_analysis": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Analysis",
            "description": "Last analysis timestamp"
          },
          "analyses_24h": {
            "type": "integer",
            "title": "Analyses 24H",
            "description": "Analyses in last 24 hours",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "status",
          "agent_available"
        ],
        "title": "GapHealthResponse",
        "description": "Health check response for gap analysis service."
      },
      "GapType": {
        "type": "string",
        "enum": [
          "vs_target",
          "vs_benchmark",
          "vs_potential",
          "temporal",
          "all"
        ],
        "title": "GapType",
        "description": "Types of performance gaps."
      },
      "GraphEdge": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source node ID"
          },
          "target": {
            "type": "string",
            "title": "Target",
            "description": "Target node ID"
          },
          "relationship": {
            "type": "string",
            "title": "Relationship",
            "description": "Relationship type"
          },
          "weight": {
            "type": "number",
            "title": "Weight",
            "description": "Edge weight",
            "default": 1.0
          },
          "properties": {
            "additionalProperties": true,
            "type": "object",
            "title": "Properties",
            "description": "Edge properties"
          }
        },
        "type": "object",
        "required": [
          "source",
          "target",
          "relationship"
        ],
        "title": "GraphEdge",
        "description": "Edge in the causal graph."
      },
      "GraphNode": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique node identifier"
          },
          "type": {
            "$ref": "#/components/schemas/EntityType",
            "description": "Node entity type"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Node display name"
          },
          "properties": {
            "additionalProperties": true,
            "type": "object",
            "title": "Properties",
            "description": "Node properties"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "description": "Last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "type",
          "name"
        ],
        "title": "GraphNode",
        "description": "A node in the knowledge graph.",
        "example": {
          "created_at": "2025-01-15T10:30:00Z",
          "id": "hcp_12345",
          "name": "Dr. Smith",
          "properties": {
            "specialty": "Oncology",
            "region": "Northeast",
            "tier": "A"
          },
          "type": "HCP"
        }
      },
      "GraphPath": {
        "properties": {
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/GraphNode"
            },
            "type": "array",
            "title": "Nodes",
            "description": "Nodes in the path"
          },
          "relationships": {
            "items": {
              "$ref": "#/components/schemas/GraphRelationship"
            },
            "type": "array",
            "title": "Relationships",
            "description": "Relationships connecting nodes"
          },
          "total_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Confidence",
            "description": "Combined path confidence"
          },
          "path_length": {
            "type": "integer",
            "title": "Path Length",
            "description": "Number of hops in the path"
          }
        },
        "type": "object",
        "required": [
          "nodes",
          "relationships",
          "path_length"
        ],
        "title": "GraphPath",
        "description": "A path through the graph (sequence of nodes and relationships)."
      },
      "GraphRelationship": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique relationship identifier"
          },
          "type": {
            "$ref": "#/components/schemas/RelationshipType",
            "description": "Relationship type"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id",
            "description": "Source node ID"
          },
          "target_id": {
            "type": "string",
            "title": "Target Id",
            "description": "Target node ID"
          },
          "properties": {
            "additionalProperties": true,
            "type": "object",
            "title": "Properties",
            "description": "Relationship properties"
          },
          "confidence": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence",
            "description": "Confidence score"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "Creation timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "type",
          "source_id",
          "target_id"
        ],
        "title": "GraphRelationship",
        "description": "A relationship (edge) in the knowledge graph.",
        "example": {
          "confidence": 0.92,
          "id": "rel_001",
          "properties": {
            "frequency": "high",
            "preference_score": 0.85
          },
          "source_id": "hcp_12345",
          "target_id": "brand_kisqali",
          "type": "PRESCRIBES"
        }
      },
      "GraphStatsResponse": {
        "properties": {
          "total_nodes": {
            "type": "integer",
            "title": "Total Nodes",
            "description": "Total node count"
          },
          "total_relationships": {
            "type": "integer",
            "title": "Total Relationships",
            "description": "Total relationship count"
          },
          "nodes_by_type": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Nodes By Type",
            "description": "Node counts by entity type"
          },
          "relationships_by_type": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Relationships By Type",
            "description": "Relationship counts by type"
          },
          "total_episodes": {
            "type": "integer",
            "title": "Total Episodes",
            "description": "Total episodes in graph",
            "default": 0
          },
          "total_communities": {
            "type": "integer",
            "title": "Total Communities",
            "description": "Total communities",
            "default": 0
          },
          "last_updated": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Updated",
            "description": "Last graph update time"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "total_nodes",
          "total_relationships",
          "nodes_by_type",
          "relationships_by_type"
        ],
        "title": "GraphStatsResponse",
        "description": "Response for graph statistics.",
        "example": {
          "nodes_by_type": {
            "Brand": 12,
            "HCP": 450,
            "KPI": 48,
            "Patient": 600
          },
          "relationships_by_type": {
            "CAUSES": 800,
            "IMPACTS": 600,
            "PRESCRIBES": 1200
          },
          "total_communities": 15,
          "total_episodes": 320,
          "total_nodes": 1250,
          "total_relationships": 3400
        }
      },
      "HealthGrade": {
        "type": "string",
        "enum": [
          "A",
          "B",
          "C",
          "D",
          "F"
        ],
        "title": "HealthGrade",
        "description": "Health letter grade."
      },
      "HealthHistoryItem": {
        "properties": {
          "check_id": {
            "type": "string",
            "title": "Check Id",
            "description": "Check identifier"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Check timestamp"
          },
          "overall_health_score": {
            "type": "number",
            "title": "Overall Health Score",
            "description": "Score at time of check"
          },
          "health_grade": {
            "$ref": "#/components/schemas/HealthGrade",
            "description": "Grade at time of check"
          },
          "critical_issues_count": {
            "type": "integer",
            "title": "Critical Issues Count",
            "description": "Number of critical issues"
          }
        },
        "type": "object",
        "required": [
          "check_id",
          "timestamp",
          "overall_health_score",
          "health_grade",
          "critical_issues_count"
        ],
        "title": "HealthHistoryItem",
        "description": "Historical health check record."
      },
      "HealthHistoryResponse": {
        "properties": {
          "total_checks": {
            "type": "integer",
            "title": "Total Checks",
            "description": "Total checks in history"
          },
          "checks": {
            "items": {
              "$ref": "#/components/schemas/HealthHistoryItem"
            },
            "type": "array",
            "title": "Checks",
            "description": "Historical records"
          },
          "avg_health_score": {
            "type": "number",
            "title": "Avg Health Score",
            "description": "Average health score"
          },
          "trend": {
            "type": "string",
            "title": "Trend",
            "description": "Trend direction (improving, stable, declining)"
          }
        },
        "type": "object",
        "required": [
          "total_checks",
          "checks",
          "avg_health_score",
          "trend"
        ],
        "title": "HealthHistoryResponse",
        "description": "Response for health check history."
      },
      "HealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Overall status: healthy/degraded/unhealthy"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Health check timestamp"
          },
          "backends": {
            "additionalProperties": {
              "$ref": "#/components/schemas/BackendHealthStatus"
            },
            "type": "object",
            "title": "Backends",
            "description": "Per-backend health"
          },
          "monitoring_enabled": {
            "type": "boolean",
            "title": "Monitoring Enabled",
            "description": "Whether background monitoring is active"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp",
          "backends",
          "monitoring_enabled"
        ],
        "title": "HealthResponse",
        "description": "Overall RAG health response."
      },
      "HealthScoreResponse": {
        "properties": {
          "check_id": {
            "type": "string",
            "title": "Check Id",
            "description": "Unique check identifier"
          },
          "check_scope": {
            "$ref": "#/components/schemas/CheckScope",
            "description": "Scope of this check"
          },
          "overall_health_score": {
            "type": "number",
            "title": "Overall Health Score",
            "description": "Overall health score (0-100)"
          },
          "health_grade": {
            "$ref": "#/components/schemas/HealthGrade",
            "description": "Letter grade (A-F)"
          },
          "component_health_score": {
            "type": "number",
            "title": "Component Health Score",
            "description": "Component health score"
          },
          "model_health_score": {
            "type": "number",
            "title": "Model Health Score",
            "description": "Model health score"
          },
          "pipeline_health_score": {
            "type": "number",
            "title": "Pipeline Health Score",
            "description": "Pipeline health score"
          },
          "agent_health_score": {
            "type": "number",
            "title": "Agent Health Score",
            "description": "Agent health score"
          },
          "component_statuses": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ComponentHealth"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Component Statuses",
            "description": "Component status details"
          },
          "model_metrics": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ModelHealth"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Metrics",
            "description": "Model health details"
          },
          "pipeline_statuses": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/PipelineHealth"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pipeline Statuses",
            "description": "Pipeline status details"
          },
          "agent_statuses": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/AgentHealth"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Statuses",
            "description": "Agent status details"
          },
          "critical_issues": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Critical Issues",
            "description": "Critical issues requiring attention"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Non-critical warnings"
          },
          "recommendations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "Recommended actions"
          },
          "health_summary": {
            "type": "string",
            "title": "Health Summary",
            "description": "Human-readable health summary"
          },
          "check_latency_ms": {
            "type": "integer",
            "title": "Check Latency Ms",
            "description": "Check duration in ms"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Check timestamp"
          }
        },
        "type": "object",
        "required": [
          "check_id",
          "check_scope",
          "overall_health_score",
          "health_grade",
          "component_health_score",
          "model_health_score",
          "pipeline_health_score",
          "agent_health_score",
          "health_summary",
          "check_latency_ms",
          "timestamp"
        ],
        "title": "HealthScoreResponse",
        "description": "Response from health check.",
        "example": {
          "agent_health_score": 0.9,
          "check_id": "hs_abc123",
          "check_latency_ms": 1250,
          "check_scope": "full",
          "component_health_score": 0.9,
          "critical_issues": [],
          "health_grade": "B",
          "health_summary": "System health is good (Grade: B, Score: 85.5/100).",
          "model_health_score": 0.8,
          "overall_health_score": 85.5,
          "pipeline_health_score": 0.85,
          "timestamp": "2026-02-06T12:00:00Z",
          "warnings": [
            "Model 'churn_predictor' has degraded accuracy (0.72)"
          ]
        }
      },
      "HealthServiceStatus": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Service status"
          },
          "agent_available": {
            "type": "boolean",
            "title": "Agent Available",
            "description": "Health Score agent available"
          },
          "last_check": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Check",
            "description": "Last health check"
          },
          "checks_24h": {
            "type": "integer",
            "title": "Checks 24H",
            "description": "Checks in last 24 hours",
            "default": 0
          },
          "avg_check_latency_ms": {
            "type": "integer",
            "title": "Avg Check Latency Ms",
            "description": "Average check latency",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "status",
          "agent_available"
        ],
        "title": "HealthServiceStatus",
        "description": "Service status response."
      },
      "HealthStatus": {
        "type": "string",
        "enum": [
          "healthy",
          "warning",
          "critical"
        ],
        "title": "HealthStatus",
        "description": "Experiment health status."
      },
      "HierarchicalAnalysisRequest": {
        "properties": {
          "treatment_var": {
            "type": "string",
            "title": "Treatment Var",
            "description": "Treatment variable name"
          },
          "outcome_var": {
            "type": "string",
            "title": "Outcome Var",
            "description": "Outcome variable name"
          },
          "effect_modifiers": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Effect Modifiers",
            "description": "Variables that modify treatment effect"
          },
          "data_source": {
            "type": "string",
            "title": "Data Source",
            "description": "Data source identifier",
            "default": "mock_data"
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters",
            "description": "Data filters"
          },
          "n_segments": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 2.0,
            "title": "N Segments",
            "description": "Number of uplift segments",
            "default": 3
          },
          "segmentation_method": {
            "$ref": "#/components/schemas/SegmentationMethod",
            "description": "Method for creating segments",
            "default": "quantile"
          },
          "estimator_type": {
            "$ref": "#/components/schemas/EstimatorType",
            "description": "EconML estimator for segment-level CATE",
            "default": "causal_forest"
          },
          "min_segment_size": {
            "type": "integer",
            "minimum": 10.0,
            "title": "Min Segment Size",
            "description": "Minimum samples per segment",
            "default": 50
          },
          "confidence_level": {
            "type": "number",
            "maximum": 0.99,
            "minimum": 0.8,
            "title": "Confidence Level",
            "description": "Confidence level for CIs",
            "default": 0.95
          },
          "aggregation_method": {
            "$ref": "#/components/schemas/AggregationMethod",
            "description": "Method for aggregating segment CATEs",
            "default": "variance_weighted"
          },
          "timeout_seconds": {
            "type": "integer",
            "maximum": 600.0,
            "minimum": 30.0,
            "title": "Timeout Seconds",
            "description": "Maximum execution time",
            "default": 180
          }
        },
        "type": "object",
        "required": [
          "treatment_var",
          "outcome_var"
        ],
        "title": "HierarchicalAnalysisRequest",
        "description": "Request for hierarchical CATE analysis.",
        "example": {
          "effect_modifiers": [
            "age",
            "income",
            "region"
          ],
          "estimator_type": "causal_forest",
          "n_segments": 3,
          "outcome_var": "outcome",
          "segmentation_method": "quantile",
          "treatment_var": "treatment"
        }
      },
      "HierarchicalAnalysisResponse": {
        "properties": {
          "analysis_id": {
            "type": "string",
            "title": "Analysis Id",
            "description": "Unique analysis identifier"
          },
          "status": {
            "$ref": "#/components/schemas/src__api__schemas__causal__AnalysisStatus",
            "description": "Analysis status"
          },
          "segment_results": {
            "items": {
              "$ref": "#/components/schemas/SegmentCATEResult"
            },
            "type": "array",
            "title": "Segment Results",
            "description": "Per-segment CATE results"
          },
          "nested_ci": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/NestedCIResult"
              },
              {
                "type": "null"
              }
            ],
            "description": "Nested CI aggregation"
          },
          "overall_ate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overall Ate",
            "description": "Overall ATE estimate"
          },
          "overall_ci_lower": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overall Ci Lower",
            "description": "Overall CI lower"
          },
          "overall_ci_upper": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overall Ci Upper",
            "description": "Overall CI upper"
          },
          "segment_heterogeneity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segment Heterogeneity",
            "description": "Heterogeneity score (I\u00b2)"
          },
          "n_segments_analyzed": {
            "type": "integer",
            "title": "N Segments Analyzed",
            "description": "Number of segments analyzed",
            "default": 0
          },
          "segmentation_method": {
            "type": "string",
            "title": "Segmentation Method",
            "description": "Segmentation method used"
          },
          "estimator_type": {
            "type": "string",
            "title": "Estimator Type",
            "description": "EconML estimator used"
          },
          "latency_ms": {
            "type": "integer",
            "title": "Latency Ms",
            "description": "Execution time in milliseconds"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Analysis timestamp"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Warnings"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Errors"
          }
        },
        "type": "object",
        "required": [
          "analysis_id",
          "status",
          "segmentation_method",
          "estimator_type",
          "latency_ms",
          "created_at"
        ],
        "title": "HierarchicalAnalysisResponse",
        "description": "Response from hierarchical CATE analysis.",
        "example": {
          "analysis_id": "hier_abc12345",
          "created_at": "2026-02-06T12:00:00Z",
          "estimator_type": "causal_forest",
          "latency_ms": 4520,
          "n_segments_analyzed": 2,
          "overall_ate": 0.18,
          "overall_ci_lower": 0.1,
          "overall_ci_upper": 0.26,
          "segment_heterogeneity": 62.3,
          "segment_results": [
            {
              "cate_ci_lower": 0.02,
              "cate_ci_upper": 0.14,
              "cate_mean": 0.08,
              "cate_std": 0.03,
              "n_samples": 150,
              "segment_id": 0,
              "segment_name": "low_uplift",
              "success": true,
              "uplift_range": [
                -0.02,
                0.15
              ]
            },
            {
              "cate_ci_lower": 0.22,
              "cate_ci_upper": 0.42,
              "cate_mean": 0.32,
              "cate_std": 0.05,
              "n_samples": 120,
              "segment_id": 1,
              "segment_name": "high_uplift",
              "success": true,
              "uplift_range": [
                0.15,
                0.45
              ]
            }
          ],
          "segmentation_method": "quantile",
          "status": "completed"
        }
      },
      "ImplementationDifficulty": {
        "type": "string",
        "enum": [
          "low",
          "medium",
          "high"
        ],
        "title": "ImplementationDifficulty",
        "description": "Difficulty levels for closing a gap."
      },
      "InterimAnalysisResult": {
        "properties": {
          "analysis_id": {
            "type": "string",
            "title": "Analysis Id"
          },
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "analysis_number": {
            "type": "integer",
            "title": "Analysis Number"
          },
          "performed_at": {
            "type": "string",
            "format": "date-time",
            "title": "Performed At"
          },
          "information_fraction": {
            "type": "number",
            "title": "Information Fraction"
          },
          "alpha_spent": {
            "type": "number",
            "title": "Alpha Spent"
          },
          "adjusted_alpha": {
            "type": "number",
            "title": "Adjusted Alpha"
          },
          "test_statistic": {
            "type": "number",
            "title": "Test Statistic"
          },
          "p_value": {
            "type": "number",
            "title": "P Value"
          },
          "conditional_power": {
            "type": "number",
            "title": "Conditional Power"
          },
          "decision": {
            "$ref": "#/components/schemas/StoppingDecision"
          },
          "metrics_snapshot": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metrics Snapshot"
          }
        },
        "type": "object",
        "required": [
          "analysis_id",
          "experiment_id",
          "analysis_number",
          "performed_at",
          "information_fraction",
          "alpha_spent",
          "adjusted_alpha",
          "test_statistic",
          "p_value",
          "conditional_power",
          "decision",
          "metrics_snapshot"
        ],
        "title": "InterimAnalysisResult",
        "description": "Result of interim analysis."
      },
      "InterventionConfigRequest": {
        "properties": {
          "intervention_type": {
            "type": "string",
            "title": "Intervention Type",
            "description": "Type of intervention (email_campaign, call_frequency_increase, etc.)"
          },
          "channel": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Channel",
            "description": "Channel: email, call, in_person, digital"
          },
          "frequency": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Frequency",
            "description": "Frequency: daily, weekly, monthly"
          },
          "duration_weeks": {
            "type": "integer",
            "maximum": 52.0,
            "minimum": 1.0,
            "title": "Duration Weeks",
            "description": "Duration in weeks",
            "default": 8
          },
          "content_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Type",
            "description": "Content type: clinical_data, patient_stories, etc."
          },
          "personalization_level": {
            "type": "string",
            "title": "Personalization Level",
            "description": "none, standard, high",
            "default": "standard"
          },
          "target_segment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Segment",
            "description": "Target segment identifier"
          },
          "target_deciles": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Target Deciles",
            "description": "Target deciles (1-10)",
            "default": [
              1,
              2,
              3
            ]
          },
          "target_specialties": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Target Specialties",
            "description": "Target specialty list",
            "default": []
          },
          "target_regions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Target Regions",
            "description": "Target region list",
            "default": []
          },
          "intensity_multiplier": {
            "type": "number",
            "maximum": 10.0,
            "minimum": 0.1,
            "title": "Intensity Multiplier",
            "description": "Treatment intensity",
            "default": 1.0
          },
          "extra_params": {
            "additionalProperties": true,
            "type": "object",
            "title": "Extra Params",
            "description": "Additional parameters",
            "default": {}
          }
        },
        "type": "object",
        "required": [
          "intervention_type"
        ],
        "title": "InterventionConfigRequest",
        "description": "Configuration for an intervention to simulate.",
        "example": {
          "channel": "email",
          "duration_weeks": 8,
          "frequency": "weekly",
          "intervention_type": "email_campaign",
          "personalization_level": "high",
          "target_deciles": [
            1,
            2,
            3
          ]
        }
      },
      "KPICalculationContext": {
        "properties": {
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Filter by brand (remibrutinib, fabhalta, kisqali)"
          },
          "start_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Start Date",
            "description": "Start date for time-based calculations"
          },
          "end_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "End Date",
            "description": "End date for time-based calculations"
          },
          "territory": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Territory",
            "description": "Territory filter"
          },
          "segment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segment",
            "description": "Customer segment filter"
          },
          "extra": {
            "additionalProperties": true,
            "type": "object",
            "title": "Extra",
            "description": "Additional context parameters"
          }
        },
        "type": "object",
        "title": "KPICalculationContext",
        "description": "Context for KPI calculation.",
        "example": {
          "brand": "kisqali",
          "end_date": "2026-01-31T23:59:59Z",
          "start_date": "2026-01-01T00:00:00Z",
          "territory": "Northeast"
        }
      },
      "KPICalculationRequest": {
        "properties": {
          "kpi_id": {
            "type": "string",
            "title": "Kpi Id",
            "description": "KPI identifier (e.g., WS1-DQ-001)",
            "examples": [
              "WS1-DQ-001",
              "WS2-TR-005"
            ]
          },
          "use_cache": {
            "type": "boolean",
            "title": "Use Cache",
            "description": "Whether to use cached results if available",
            "default": true
          },
          "force_refresh": {
            "type": "boolean",
            "title": "Force Refresh",
            "description": "Force recalculation even if cached",
            "default": false
          },
          "context": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/KPICalculationContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Calculation context (filters, date range, etc.)"
          }
        },
        "type": "object",
        "required": [
          "kpi_id"
        ],
        "title": "KPICalculationRequest",
        "description": "Request schema for calculating a single KPI.",
        "example": {
          "context": {
            "brand": "kisqali",
            "territory": "Northeast"
          },
          "force_refresh": false,
          "kpi_id": "WS1-DQ-001",
          "use_cache": true
        }
      },
      "KPIHealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Overall health status",
            "examples": [
              "healthy",
              "degraded",
              "unhealthy"
            ]
          },
          "registry_loaded": {
            "type": "boolean",
            "title": "Registry Loaded",
            "description": "Whether KPI registry is loaded"
          },
          "total_kpis": {
            "type": "integer",
            "title": "Total Kpis",
            "description": "Total KPIs in registry"
          },
          "cache_enabled": {
            "type": "boolean",
            "title": "Cache Enabled",
            "description": "Whether caching is enabled"
          },
          "cache_size": {
            "type": "integer",
            "title": "Cache Size",
            "description": "Current cache size",
            "default": 0
          },
          "database_connected": {
            "type": "boolean",
            "title": "Database Connected",
            "description": "Whether database is connected"
          },
          "workstreams_available": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Workstreams Available",
            "description": "Available workstreams"
          },
          "last_calculation": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Calculation",
            "description": "Timestamp of last calculation"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if unhealthy"
          }
        },
        "type": "object",
        "required": [
          "status",
          "registry_loaded",
          "total_kpis",
          "cache_enabled",
          "database_connected"
        ],
        "title": "KPIHealthResponse",
        "description": "Response schema for KPI system health.",
        "example": {
          "cache_enabled": true,
          "cache_size": 12,
          "database_connected": true,
          "registry_loaded": true,
          "status": "healthy",
          "total_kpis": 48,
          "workstreams_available": [
            "ws1_data_quality",
            "ws2_triggers",
            "ws3_market_performance"
          ]
        }
      },
      "KPIListResponse": {
        "properties": {
          "kpis": {
            "items": {
              "$ref": "#/components/schemas/KPIMetadataResponse"
            },
            "type": "array",
            "title": "Kpis",
            "description": "List of KPI metadata"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of KPIs"
          },
          "workstream": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workstream",
            "description": "Filtered workstream if any"
          },
          "causal_library": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Causal Library",
            "description": "Filtered causal library if any"
          }
        },
        "type": "object",
        "required": [
          "total"
        ],
        "title": "KPIListResponse",
        "description": "Response schema for listing KPIs.",
        "example": {
          "total": 2,
          "workstream": "ws1_data_quality"
        }
      },
      "KPIMetadataResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "KPI identifier"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Human-readable KPI name"
          },
          "definition": {
            "type": "string",
            "title": "Definition",
            "description": "KPI definition/description"
          },
          "formula": {
            "type": "string",
            "title": "Formula",
            "description": "Calculation formula"
          },
          "calculation_type": {
            "type": "string",
            "title": "Calculation Type",
            "description": "direct or derived",
            "examples": [
              "direct",
              "derived"
            ]
          },
          "workstream": {
            "type": "string",
            "title": "Workstream",
            "description": "Workstream this KPI belongs to"
          },
          "tables": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tables",
            "description": "Source tables"
          },
          "columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Columns",
            "description": "Source columns"
          },
          "view": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "View",
            "description": "Database view name if applicable"
          },
          "threshold": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/KPIThresholdResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Threshold configuration"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit",
            "description": "Unit of measurement"
          },
          "frequency": {
            "type": "string",
            "title": "Frequency",
            "description": "Calculation frequency",
            "default": "daily"
          },
          "primary_causal_library": {
            "type": "string",
            "title": "Primary Causal Library",
            "description": "Primary causal library for this KPI",
            "default": "none"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Brand filter if applicable"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note",
            "description": "Additional notes"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "definition",
          "formula",
          "calculation_type",
          "workstream"
        ],
        "title": "KPIMetadataResponse",
        "description": "Response schema for KPI metadata.",
        "example": {
          "calculation_type": "direct",
          "columns": [
            "hcp_id",
            "npi",
            "specialty"
          ],
          "definition": "Percentage of required fields populated across patient records",
          "formula": "COUNT(non_null) / COUNT(*) * 100",
          "frequency": "daily",
          "id": "WS1-DQ-001",
          "name": "Data Completeness Rate",
          "primary_causal_library": "none",
          "tables": [
            "patient_records"
          ],
          "threshold": {
            "critical": 0.7,
            "target": 0.95,
            "warning": 0.85
          },
          "unit": "%",
          "workstream": "ws1_data_quality"
        }
      },
      "KPIResultResponse": {
        "properties": {
          "kpi_id": {
            "type": "string",
            "title": "Kpi Id",
            "description": "KPI identifier"
          },
          "value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Value",
            "description": "Calculated KPI value"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Status against thresholds",
            "default": "unknown",
            "examples": [
              "good",
              "warning",
              "critical",
              "unknown"
            ]
          },
          "calculated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Calculated At",
            "description": "Calculation timestamp"
          },
          "cached": {
            "type": "boolean",
            "title": "Cached",
            "description": "Whether result was from cache",
            "default": false
          },
          "cache_expires_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cache Expires At",
            "description": "When cache entry expires"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if calculation failed"
          },
          "causal_library_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Causal Library Used",
            "description": "Causal library used for calculation"
          },
          "confidence_interval": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence Interval",
            "description": "95% confidence interval [lower, upper]",
            "examples": [
              [
                0.42,
                0.58
              ]
            ]
          },
          "p_value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "P Value",
            "description": "Statistical p-value"
          },
          "effect_size": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effect Size",
            "description": "Effect size if applicable"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Additional calculation metadata"
          }
        },
        "type": "object",
        "required": [
          "kpi_id",
          "calculated_at"
        ],
        "title": "KPIResultResponse",
        "description": "Response schema for a single KPI result.",
        "example": {
          "cached": false,
          "calculated_at": "2026-02-06T12:00:00Z",
          "causal_library_used": "dowhy",
          "confidence_interval": [
            0.82,
            0.92
          ],
          "effect_size": 0.15,
          "kpi_id": "WS1-DQ-001",
          "p_value": 0.003,
          "status": "good",
          "value": 0.87
        }
      },
      "KPIThresholdResponse": {
        "properties": {
          "target": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target",
            "description": "Target threshold value"
          },
          "warning": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warning",
            "description": "Warning threshold value"
          },
          "critical": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Critical",
            "description": "Critical threshold value"
          }
        },
        "type": "object",
        "title": "KPIThresholdResponse",
        "description": "Response schema for KPI thresholds.",
        "example": {
          "critical": 0.6,
          "target": 0.9,
          "warning": 0.75
        }
      },
      "KnowledgeUpdate": {
        "properties": {
          "update_id": {
            "type": "string",
            "title": "Update Id",
            "description": "Unique update identifier"
          },
          "update_type": {
            "$ref": "#/components/schemas/UpdateType",
            "description": "Type of update"
          },
          "status": {
            "$ref": "#/components/schemas/UpdateStatus",
            "description": "Current status"
          },
          "target_agent": {
            "type": "string",
            "title": "Target Agent",
            "description": "Agent to update"
          },
          "target_component": {
            "type": "string",
            "title": "Target Component",
            "description": "Component being updated"
          },
          "current_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Value",
            "description": "Current configuration"
          },
          "proposed_value": {
            "type": "string",
            "title": "Proposed Value",
            "description": "Proposed new configuration"
          },
          "rationale": {
            "type": "string",
            "title": "Rationale",
            "description": "Why this update is needed"
          },
          "expected_improvement": {
            "type": "string",
            "title": "Expected Improvement",
            "description": "Expected impact"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When proposed"
          },
          "applied_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Applied At",
            "description": "When applied"
          }
        },
        "type": "object",
        "required": [
          "update_id",
          "update_type",
          "status",
          "target_agent",
          "target_component",
          "proposed_value",
          "rationale",
          "expected_improvement"
        ],
        "title": "KnowledgeUpdate",
        "description": "Proposed or applied knowledge update."
      },
      "LatencyBreakdown": {
        "properties": {
          "classification_ms": {
            "type": "number",
            "title": "Classification Ms",
            "default": 0.0
          },
          "rag_retrieval_ms": {
            "type": "number",
            "title": "Rag Retrieval Ms",
            "default": 0.0
          },
          "routing_ms": {
            "type": "number",
            "title": "Routing Ms",
            "default": 0.0
          },
          "agent_dispatch_ms": {
            "type": "number",
            "title": "Agent Dispatch Ms",
            "default": 0.0
          },
          "synthesis_ms": {
            "type": "number",
            "title": "Synthesis Ms",
            "default": 0.0
          },
          "total_ms": {
            "type": "number",
            "title": "Total Ms",
            "default": 0.0
          }
        },
        "type": "object",
        "title": "LatencyBreakdown",
        "description": "Latency breakdown by processing stage."
      },
      "LearningRecommendation": {
        "properties": {
          "recommendation_id": {
            "type": "string",
            "title": "Recommendation Id",
            "description": "Unique recommendation identifier"
          },
          "pattern_id": {
            "type": "string",
            "title": "Pattern Id",
            "description": "Pattern this addresses"
          },
          "priority": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Priority",
            "description": "Priority rank (1=highest)"
          },
          "recommendation_type": {
            "type": "string",
            "title": "Recommendation Type",
            "description": "Type of recommendation"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "What should be changed"
          },
          "expected_impact": {
            "type": "string",
            "title": "Expected Impact",
            "description": "Expected improvement"
          },
          "implementation_effort": {
            "type": "string",
            "title": "Implementation Effort",
            "description": "Low/Medium/High"
          },
          "affected_agents": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Affected Agents",
            "description": "Agents to modify"
          }
        },
        "type": "object",
        "required": [
          "recommendation_id",
          "pattern_id",
          "priority",
          "recommendation_type",
          "description",
          "expected_impact",
          "implementation_effort",
          "affected_agents"
        ],
        "title": "LearningRecommendation",
        "description": "Recommendation for system improvement."
      },
      "LearningResponse": {
        "properties": {
          "batch_id": {
            "type": "string",
            "title": "Batch Id",
            "description": "Unique batch identifier"
          },
          "status": {
            "$ref": "#/components/schemas/LearningStatus",
            "description": "Learning status"
          },
          "detected_patterns": {
            "items": {
              "$ref": "#/components/schemas/DetectedPattern"
            },
            "type": "array",
            "title": "Detected Patterns",
            "description": "Patterns detected from feedback"
          },
          "learning_recommendations": {
            "items": {
              "$ref": "#/components/schemas/LearningRecommendation"
            },
            "type": "array",
            "title": "Learning Recommendations",
            "description": "Improvement recommendations"
          },
          "priority_improvements": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Priority Improvements",
            "description": "Top priority items"
          },
          "proposed_updates": {
            "items": {
              "$ref": "#/components/schemas/KnowledgeUpdate"
            },
            "type": "array",
            "title": "Proposed Updates",
            "description": "Proposed knowledge updates"
          },
          "applied_updates": {
            "items": {
              "$ref": "#/components/schemas/KnowledgeUpdate"
            },
            "type": "array",
            "title": "Applied Updates",
            "description": "Updates that were applied"
          },
          "learning_summary": {
            "type": "string",
            "title": "Learning Summary",
            "description": "Executive summary",
            "default": ""
          },
          "feedback_summary": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FeedbackSummary"
              },
              {
                "type": "null"
              }
            ],
            "description": "Feedback statistics"
          },
          "patterns_detected": {
            "type": "integer",
            "title": "Patterns Detected",
            "description": "Number of patterns found",
            "default": 0
          },
          "recommendations_generated": {
            "type": "integer",
            "title": "Recommendations Generated",
            "description": "Number of recommendations",
            "default": 0
          },
          "updates_proposed": {
            "type": "integer",
            "title": "Updates Proposed",
            "description": "Number of updates proposed",
            "default": 0
          },
          "updates_applied": {
            "type": "integer",
            "title": "Updates Applied",
            "description": "Number of updates applied",
            "default": 0
          },
          "collection_latency_ms": {
            "type": "integer",
            "title": "Collection Latency Ms",
            "description": "Feedback collection time",
            "default": 0
          },
          "analysis_latency_ms": {
            "type": "integer",
            "title": "Analysis Latency Ms",
            "description": "Analysis time",
            "default": 0
          },
          "total_latency_ms": {
            "type": "integer",
            "title": "Total Latency Ms",
            "description": "Total processing time",
            "default": 0
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Completion timestamp"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Any errors encountered"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Warnings"
          }
        },
        "type": "object",
        "required": [
          "batch_id",
          "status"
        ],
        "title": "LearningResponse",
        "description": "Response from feedback learning cycle.",
        "example": {
          "batch_id": "fb_abc123",
          "learning_summary": "Identified 3 patterns affecting response quality...",
          "patterns_detected": 3,
          "recommendations_generated": 5,
          "status": "completed",
          "updates_applied": 0,
          "updates_proposed": 2
        }
      },
      "LearningStatus": {
        "type": "string",
        "enum": [
          "pending",
          "collecting",
          "analyzing",
          "extracting",
          "updating",
          "completed",
          "failed"
        ],
        "title": "LearningStatus",
        "description": "Status of a learning cycle."
      },
      "ListNodesResponse": {
        "properties": {
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/GraphNode"
            },
            "type": "array",
            "title": "Nodes",
            "description": "List of nodes"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total matching nodes"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Applied limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset",
            "description": "Applied offset"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether more results exist"
          },
          "query_latency_ms": {
            "type": "number",
            "title": "Query Latency Ms",
            "description": "Query latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "nodes",
          "total_count",
          "limit",
          "offset",
          "has_more",
          "query_latency_ms"
        ],
        "title": "ListNodesResponse",
        "description": "Response for listing graph nodes.",
        "example": {
          "has_more": true,
          "limit": 50,
          "nodes": [
            {
              "id": "hcp_001",
              "name": "Dr. Smith",
              "properties": {
                "specialty": "Oncology"
              },
              "type": "HCP"
            }
          ],
          "offset": 0,
          "query_latency_ms": 18.5,
          "total_count": 142
        }
      },
      "ListRelationshipsResponse": {
        "properties": {
          "relationships": {
            "items": {
              "$ref": "#/components/schemas/GraphRelationship"
            },
            "type": "array",
            "title": "Relationships",
            "description": "List of relationships"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total matching relationships"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Applied limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset",
            "description": "Applied offset"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether more results exist"
          },
          "query_latency_ms": {
            "type": "number",
            "title": "Query Latency Ms",
            "description": "Query latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "relationships",
          "total_count",
          "limit",
          "offset",
          "has_more",
          "query_latency_ms"
        ],
        "title": "ListRelationshipsResponse",
        "description": "Response for listing graph relationships.",
        "example": {
          "has_more": true,
          "limit": 50,
          "offset": 0,
          "query_latency_ms": 22.1,
          "relationships": [
            {
              "id": "rel_001",
              "source_id": "hcp_001",
              "target_id": "brand_001",
              "type": "PRESCRIBES"
            }
          ],
          "total_count": 87
        }
      },
      "MemorySearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query",
            "description": "Search query text"
          },
          "k": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "K",
            "description": "Number of results to return",
            "default": 10
          },
          "memory_types": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MemoryType"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Memory Types",
            "description": "Memory types to search (all if not specified)"
          },
          "retrieval_method": {
            "$ref": "#/components/schemas/RetrievalMethod",
            "description": "Retrieval method",
            "default": "hybrid"
          },
          "entities": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entities",
            "description": "Entity IDs for graph traversal"
          },
          "kpi_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kpi Name",
            "description": "KPI name for targeted graph traversal"
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters",
            "description": "Additional filters (brand, region, agent_name)"
          },
          "weights": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weights",
            "description": "Custom weights for hybrid retrieval"
          },
          "min_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Min Score",
            "description": "Minimum score threshold",
            "default": 0.0
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "MemorySearchRequest",
        "description": "Request for hybrid memory search.",
        "example": {
          "filters": {
            "brand": "Kisqali",
            "region": "northeast"
          },
          "k": 10,
          "kpi_name": "TRx",
          "query": "Why did TRx drop in northeast region?",
          "retrieval_method": "hybrid"
        }
      },
      "MemorySearchResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/MemorySearchResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Search results"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Number of results returned"
          },
          "retrieval_method": {
            "type": "string",
            "title": "Retrieval Method",
            "description": "Method used"
          },
          "search_latency_ms": {
            "type": "number",
            "title": "Search Latency Ms",
            "description": "Search latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "query",
          "results",
          "total_results",
          "retrieval_method",
          "search_latency_ms"
        ],
        "title": "MemorySearchResponse",
        "description": "Response for memory search."
      },
      "MemorySearchResult": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Retrieved content"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source memory type or table"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id",
            "description": "Source record ID"
          },
          "score": {
            "type": "number",
            "title": "Score",
            "description": "Relevance score (0-1)"
          },
          "retrieval_method": {
            "type": "string",
            "title": "Retrieval Method",
            "description": "Method used to retrieve"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "content",
          "source",
          "source_id",
          "score",
          "retrieval_method"
        ],
        "title": "MemorySearchResult",
        "description": "Single search result."
      },
      "MemoryType": {
        "type": "string",
        "enum": [
          "episodic",
          "procedural",
          "semantic",
          "all"
        ],
        "title": "MemoryType",
        "description": "Memory types for filtering search."
      },
      "ModelHealth": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id",
            "description": "Model identifier"
          },
          "model_name": {
            "type": "string",
            "title": "Model Name",
            "description": "Model display name"
          },
          "accuracy": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Accuracy",
            "description": "Model accuracy"
          },
          "precision": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Precision",
            "description": "Model precision"
          },
          "recall": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recall",
            "description": "Model recall"
          },
          "f1_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "F1 Score",
            "description": "Model F1 score"
          },
          "auc_roc": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auc Roc",
            "description": "AUC-ROC score"
          },
          "prediction_latency_p50_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prediction Latency P50 Ms",
            "description": "50th percentile prediction latency"
          },
          "prediction_latency_p99_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prediction Latency P99 Ms",
            "description": "99th percentile prediction latency"
          },
          "predictions_last_24h": {
            "type": "integer",
            "title": "Predictions Last 24H",
            "description": "Predictions in last 24 hours",
            "default": 0
          },
          "error_rate": {
            "type": "number",
            "title": "Error Rate",
            "description": "Error rate (0-1)",
            "default": 0.0
          },
          "status": {
            "$ref": "#/components/schemas/ModelStatus",
            "description": "Model health status"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "model_name",
          "status"
        ],
        "title": "ModelHealth",
        "description": "Model performance metrics."
      },
      "ModelHealthResponse": {
        "properties": {
          "model_health_score": {
            "type": "number",
            "title": "Model Health Score",
            "description": "Aggregate score (0-1)"
          },
          "total_models": {
            "type": "integer",
            "title": "Total Models",
            "description": "Total models checked"
          },
          "healthy_count": {
            "type": "integer",
            "title": "Healthy Count",
            "description": "Healthy model count"
          },
          "degraded_count": {
            "type": "integer",
            "title": "Degraded Count",
            "description": "Degraded model count"
          },
          "unhealthy_count": {
            "type": "integer",
            "title": "Unhealthy Count",
            "description": "Unhealthy model count"
          },
          "models": {
            "items": {
              "$ref": "#/components/schemas/ModelHealth"
            },
            "type": "array",
            "title": "Models",
            "description": "Model details"
          },
          "check_latency_ms": {
            "type": "integer",
            "title": "Check Latency Ms",
            "description": "Check duration"
          }
        },
        "type": "object",
        "required": [
          "model_health_score",
          "total_models",
          "healthy_count",
          "degraded_count",
          "unhealthy_count",
          "models",
          "check_latency_ms"
        ],
        "title": "ModelHealthResponse",
        "description": "Response for model health check."
      },
      "ModelHealthSummary": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "overall_health": {
            "type": "string",
            "title": "Overall Health"
          },
          "last_check": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Check"
          },
          "drift_score": {
            "type": "number",
            "title": "Drift Score"
          },
          "active_alerts": {
            "type": "integer",
            "title": "Active Alerts"
          },
          "last_retrained": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Retrained"
          },
          "performance_trend": {
            "type": "string",
            "title": "Performance Trend"
          },
          "recommendations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommendations"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "overall_health",
          "drift_score",
          "active_alerts",
          "performance_trend",
          "recommendations"
        ],
        "title": "ModelHealthSummary",
        "description": "Summary of model health status."
      },
      "ModelListResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "models": {
            "items": {
              "$ref": "#/components/schemas/TwinModelSummary"
            },
            "type": "array",
            "title": "Models"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "models"
        ],
        "title": "ModelListResponse",
        "description": "Response for listing models."
      },
      "ModelStatus": {
        "type": "string",
        "enum": [
          "healthy",
          "degraded",
          "unhealthy"
        ],
        "title": "ModelStatus",
        "description": "Status of a model."
      },
      "ModelType": {
        "type": "string",
        "enum": [
          "propensity",
          "risk_stratification",
          "next_best_action",
          "churn_prediction"
        ],
        "title": "ModelType",
        "description": "Supported model types for SHAP explanation."
      },
      "ModelsStatusResponse": {
        "properties": {
          "total_models": {
            "type": "integer",
            "title": "Total Models",
            "description": "Total number of registered models"
          },
          "healthy_count": {
            "type": "integer",
            "title": "Healthy Count",
            "description": "Number of healthy models"
          },
          "unhealthy_count": {
            "type": "integer",
            "title": "Unhealthy Count",
            "description": "Number of unhealthy models"
          },
          "models": {
            "items": {
              "$ref": "#/components/schemas/src__api__routes__predictions__ModelHealthResponse"
            },
            "type": "array",
            "title": "Models",
            "description": "Individual model statuses"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Status check timestamp"
          }
        },
        "type": "object",
        "required": [
          "total_models",
          "healthy_count",
          "unhealthy_count",
          "models",
          "timestamp"
        ],
        "title": "ModelsStatusResponse",
        "description": "Response schema for all models status."
      },
      "MonitorAlert": {
        "properties": {
          "alert_id": {
            "type": "string",
            "title": "Alert Id"
          },
          "alert_type": {
            "type": "string",
            "title": "Alert Type"
          },
          "severity": {
            "$ref": "#/components/schemas/AlertSeverity"
          },
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "experiment_name": {
            "type": "string",
            "title": "Experiment Name"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "details": {
            "additionalProperties": true,
            "type": "object",
            "title": "Details"
          },
          "recommended_action": {
            "type": "string",
            "title": "Recommended Action"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "alert_id",
          "alert_type",
          "severity",
          "experiment_id",
          "experiment_name",
          "message",
          "details",
          "recommended_action",
          "timestamp"
        ],
        "title": "MonitorAlert",
        "description": "Experiment monitoring alert."
      },
      "MonitorResponse": {
        "properties": {
          "experiments_checked": {
            "type": "integer",
            "title": "Experiments Checked"
          },
          "healthy_count": {
            "type": "integer",
            "title": "Healthy Count"
          },
          "warning_count": {
            "type": "integer",
            "title": "Warning Count"
          },
          "critical_count": {
            "type": "integer",
            "title": "Critical Count"
          },
          "experiments": {
            "items": {
              "$ref": "#/components/schemas/ExperimentHealthSummary"
            },
            "type": "array",
            "title": "Experiments"
          },
          "alerts": {
            "items": {
              "$ref": "#/components/schemas/MonitorAlert"
            },
            "type": "array",
            "title": "Alerts"
          },
          "monitor_summary": {
            "type": "string",
            "title": "Monitor Summary"
          },
          "recommended_actions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommended Actions"
          },
          "check_latency_ms": {
            "type": "integer",
            "title": "Check Latency Ms"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "experiments_checked",
          "healthy_count",
          "warning_count",
          "critical_count",
          "experiments",
          "alerts",
          "monitor_summary",
          "recommended_actions",
          "check_latency_ms",
          "timestamp"
        ],
        "title": "MonitorResponse",
        "description": "Response from experiment monitoring."
      },
      "MonitoringRunItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version"
          },
          "run_type": {
            "type": "string",
            "title": "Run Type"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "features_checked": {
            "type": "integer",
            "title": "Features Checked"
          },
          "drift_detected_count": {
            "type": "integer",
            "title": "Drift Detected Count"
          },
          "alerts_generated": {
            "type": "integer",
            "title": "Alerts Generated"
          },
          "duration_ms": {
            "type": "integer",
            "title": "Duration Ms"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          }
        },
        "type": "object",
        "required": [
          "id",
          "model_version",
          "run_type",
          "started_at",
          "features_checked",
          "drift_detected_count",
          "alerts_generated",
          "duration_ms"
        ],
        "title": "MonitoringRunItem",
        "description": "Monitoring run record."
      },
      "MonitoringRunsResponse": {
        "properties": {
          "model_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Id"
          },
          "total_runs": {
            "type": "integer",
            "title": "Total Runs"
          },
          "runs": {
            "items": {
              "$ref": "#/components/schemas/MonitoringRunItem"
            },
            "type": "array",
            "title": "Runs"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "total_runs",
          "runs"
        ],
        "title": "MonitoringRunsResponse",
        "description": "Response for monitoring runs query."
      },
      "NestedCIResult": {
        "properties": {
          "aggregate_ate": {
            "type": "number",
            "title": "Aggregate Ate",
            "description": "Aggregate ATE from segments"
          },
          "aggregate_ci_lower": {
            "type": "number",
            "title": "Aggregate Ci Lower",
            "description": "Aggregate CI lower bound"
          },
          "aggregate_ci_upper": {
            "type": "number",
            "title": "Aggregate Ci Upper",
            "description": "Aggregate CI upper bound"
          },
          "aggregate_std": {
            "type": "number",
            "title": "Aggregate Std",
            "description": "Aggregate standard error"
          },
          "confidence_level": {
            "type": "number",
            "title": "Confidence Level",
            "description": "Confidence level used"
          },
          "aggregation_method": {
            "type": "string",
            "title": "Aggregation Method",
            "description": "Aggregation method used"
          },
          "segment_contributions": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Segment Contributions",
            "description": "Weight contribution from each segment"
          },
          "i_squared": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "I Squared",
            "description": "I\u00b2 heterogeneity statistic (0-100)"
          },
          "tau_squared": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tau Squared",
            "description": "\u03c4\u00b2 between-segment variance"
          },
          "n_segments_included": {
            "type": "integer",
            "title": "N Segments Included",
            "description": "Segments included in aggregate"
          },
          "total_sample_size": {
            "type": "integer",
            "title": "Total Sample Size",
            "description": "Total samples across segments"
          }
        },
        "type": "object",
        "required": [
          "aggregate_ate",
          "aggregate_ci_lower",
          "aggregate_ci_upper",
          "aggregate_std",
          "confidence_level",
          "aggregation_method",
          "segment_contributions",
          "n_segments_included",
          "total_sample_size"
        ],
        "title": "NestedCIResult",
        "description": "Nested confidence interval aggregation result."
      },
      "NodeNetworkResponse": {
        "properties": {
          "node_id": {
            "type": "string",
            "title": "Node Id",
            "description": "Central node ID"
          },
          "node_type": {
            "$ref": "#/components/schemas/EntityType",
            "description": "Central node type"
          },
          "connected_nodes": {
            "additionalProperties": {
              "items": {
                "additionalProperties": true,
                "type": "object"
              },
              "type": "array"
            },
            "type": "object",
            "title": "Connected Nodes",
            "description": "Connected nodes grouped by type"
          },
          "total_connections": {
            "type": "integer",
            "title": "Total Connections",
            "description": "Total connected nodes"
          },
          "max_depth": {
            "type": "integer",
            "title": "Max Depth",
            "description": "Traversal depth used"
          },
          "query_latency_ms": {
            "type": "number",
            "title": "Query Latency Ms",
            "description": "Query latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "node_id",
          "node_type",
          "connected_nodes",
          "total_connections",
          "max_depth",
          "query_latency_ms"
        ],
        "title": "NodeNetworkResponse",
        "description": "Response for node network queries.",
        "example": {
          "connected_nodes": {
            "hcps": [
              {
                "id": "hcp_001",
                "properties": {
                  "name": "Dr. Smith"
                }
              }
            ],
            "treatments": [
              {
                "id": "tx_001",
                "properties": {
                  "name": "Kisqali"
                }
              }
            ],
            "triggers": []
          },
          "max_depth": 2,
          "node_id": "patient_001",
          "node_type": "Patient",
          "query_latency_ms": 15.3,
          "total_connections": 2
        }
      },
      "NodeSortField": {
        "type": "string",
        "enum": [
          "created_at",
          "updated_at",
          "name",
          "type"
        ],
        "title": "NodeSortField",
        "description": "Fields to sort nodes by."
      },
      "OpportunityListResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total opportunities"
          },
          "quick_wins_count": {
            "type": "integer",
            "title": "Quick Wins Count",
            "description": "Number of quick wins"
          },
          "strategic_bets_count": {
            "type": "integer",
            "title": "Strategic Bets Count",
            "description": "Number of strategic bets"
          },
          "opportunities": {
            "items": {
              "$ref": "#/components/schemas/PrioritizedOpportunity"
            },
            "type": "array",
            "title": "Opportunities",
            "description": "List of opportunities"
          },
          "total_addressable_value": {
            "type": "number",
            "title": "Total Addressable Value",
            "description": "Total potential value"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "quick_wins_count",
          "strategic_bets_count",
          "opportunities",
          "total_addressable_value"
        ],
        "title": "OpportunityListResponse",
        "description": "Response for listing opportunities."
      },
      "OptimizationObjective": {
        "type": "string",
        "enum": [
          "maximize_outcome",
          "maximize_roi",
          "minimize_cost",
          "balance"
        ],
        "title": "OptimizationObjective",
        "description": "Optimization objectives."
      },
      "OptimizationResponse": {
        "properties": {
          "optimization_id": {
            "type": "string",
            "title": "Optimization Id",
            "description": "Unique optimization identifier"
          },
          "status": {
            "$ref": "#/components/schemas/OptimizationStatus",
            "description": "Optimization status"
          },
          "resource_type": {
            "$ref": "#/components/schemas/ResourceType",
            "description": "Resource type optimized"
          },
          "objective": {
            "$ref": "#/components/schemas/OptimizationObjective",
            "description": "Objective used"
          },
          "optimal_allocations": {
            "items": {
              "$ref": "#/components/schemas/AllocationResult"
            },
            "type": "array",
            "title": "Optimal Allocations",
            "description": "Optimized allocations"
          },
          "objective_value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Objective Value",
            "description": "Optimized objective value"
          },
          "solver_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Solver Status",
            "description": "Solver termination status"
          },
          "solve_time_ms": {
            "type": "integer",
            "title": "Solve Time Ms",
            "description": "Solver time (ms)",
            "default": 0
          },
          "scenarios": {
            "items": {
              "$ref": "#/components/schemas/ScenarioResult"
            },
            "type": "array",
            "title": "Scenarios",
            "description": "Scenario analysis results"
          },
          "sensitivity_analysis": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sensitivity Analysis",
            "description": "Sensitivity of objective to constraints"
          },
          "projected_total_outcome": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Projected Total Outcome",
            "description": "Total projected outcome"
          },
          "projected_roi": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Projected Roi",
            "description": "Projected ROI"
          },
          "impact_by_segment": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Impact By Segment",
            "description": "Impact breakdown by segment"
          },
          "optimization_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Optimization Summary",
            "description": "Executive summary"
          },
          "recommendations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "Actionable recommendations"
          },
          "formulation_latency_ms": {
            "type": "integer",
            "title": "Formulation Latency Ms",
            "description": "Problem formulation time",
            "default": 0
          },
          "optimization_latency_ms": {
            "type": "integer",
            "title": "Optimization Latency Ms",
            "description": "Optimization time",
            "default": 0
          },
          "total_latency_ms": {
            "type": "integer",
            "title": "Total Latency Ms",
            "description": "Total workflow time",
            "default": 0
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Optimization timestamp"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Warnings"
          }
        },
        "type": "object",
        "required": [
          "optimization_id",
          "status",
          "resource_type",
          "objective"
        ],
        "title": "OptimizationResponse",
        "description": "Response from resource optimization.",
        "example": {
          "objective": "maximize_roi",
          "objective_value": 450000,
          "optimization_id": "opt_abc123",
          "projected_roi": 2.25,
          "resource_type": "budget",
          "status": "completed"
        }
      },
      "OptimizationSignal": {
        "properties": {
          "signal_type": {
            "type": "string",
            "title": "Signal Type",
            "description": "Signal type (positive, negative, correction)"
          },
          "weight": {
            "type": "number",
            "title": "Weight",
            "description": "Signal weight (0.0 to 1.0)"
          },
          "feedback": {
            "type": "string",
            "title": "Feedback",
            "description": "Signal description"
          },
          "suggested_action": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggested Action",
            "description": "Suggested improvement"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Signal confidence"
          }
        },
        "type": "object",
        "required": [
          "signal_type",
          "weight",
          "feedback",
          "confidence"
        ],
        "title": "OptimizationSignal",
        "description": "GEPA optimization signal from feedback."
      },
      "OptimizationSignalsResponse": {
        "properties": {
          "agent_name": {
            "type": "string",
            "title": "Agent Name",
            "description": "Agent name"
          },
          "signals": {
            "items": {
              "$ref": "#/components/schemas/OptimizationSignal"
            },
            "type": "array",
            "title": "Signals",
            "description": "Optimization signals"
          },
          "total_feedback_analyzed": {
            "type": "integer",
            "title": "Total Feedback Analyzed",
            "description": "Total feedback analyzed"
          },
          "ready_for_optimization": {
            "type": "boolean",
            "title": "Ready For Optimization",
            "description": "Whether enough feedback for optimization"
          }
        },
        "type": "object",
        "required": [
          "agent_name",
          "signals",
          "total_feedback_analyzed",
          "ready_for_optimization"
        ],
        "title": "OptimizationSignalsResponse",
        "description": "Response with GEPA optimization signals."
      },
      "OptimizationStatus": {
        "type": "string",
        "enum": [
          "pending",
          "formulating",
          "optimizing",
          "analyzing",
          "projecting",
          "completed",
          "failed"
        ],
        "title": "OptimizationStatus",
        "description": "Status of optimization."
      },
      "ParallelPipelineRequest": {
        "properties": {
          "treatment_var": {
            "type": "string",
            "title": "Treatment Var",
            "description": "Treatment variable"
          },
          "outcome_var": {
            "type": "string",
            "title": "Outcome Var",
            "description": "Outcome variable"
          },
          "covariates": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Covariates",
            "description": "Covariate variables"
          },
          "data_source": {
            "type": "string",
            "title": "Data Source",
            "description": "Data source",
            "default": "mock_data"
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters",
            "description": "Data filters"
          },
          "libraries": {
            "items": {
              "$ref": "#/components/schemas/CausalLibrary"
            },
            "type": "array",
            "maxItems": 4,
            "minItems": 2,
            "title": "Libraries",
            "description": "Libraries to run in parallel"
          },
          "estimators": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimators",
            "description": "Specific estimator per library"
          },
          "consensus_method": {
            "type": "string",
            "title": "Consensus Method",
            "description": "Method for consensus computation",
            "default": "variance_weighted"
          },
          "timeout_seconds": {
            "type": "integer",
            "maximum": 300.0,
            "minimum": 30.0,
            "title": "Timeout Seconds",
            "description": "Overall timeout",
            "default": 120
          }
        },
        "type": "object",
        "required": [
          "treatment_var",
          "outcome_var",
          "libraries"
        ],
        "title": "ParallelPipelineRequest",
        "description": "Request for parallel multi-library analysis.",
        "example": {
          "estimators": {
            "causalml": "uplift_random_forest",
            "econml": "causal_forest"
          },
          "libraries": [
            "dowhy",
            "econml",
            "causalml"
          ],
          "outcome_var": "outcome",
          "treatment_var": "treatment"
        }
      },
      "ParallelPipelineResponse": {
        "properties": {
          "pipeline_id": {
            "type": "string",
            "title": "Pipeline Id",
            "description": "Unique pipeline identifier"
          },
          "status": {
            "$ref": "#/components/schemas/src__api__schemas__causal__AnalysisStatus",
            "description": "Overall status"
          },
          "libraries_succeeded": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Libraries Succeeded",
            "description": "Libraries that succeeded"
          },
          "libraries_failed": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Libraries Failed",
            "description": "Libraries that failed"
          },
          "library_results": {
            "additionalProperties": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "object",
            "title": "Library Results",
            "description": "Results per library"
          },
          "consensus_effect": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Consensus Effect",
            "description": "Consensus effect"
          },
          "consensus_ci_lower": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Consensus Ci Lower",
            "description": "Consensus CI lower"
          },
          "consensus_ci_upper": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Consensus Ci Upper",
            "description": "Consensus CI upper"
          },
          "library_agreement_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Library Agreement Score",
            "description": "Agreement score"
          },
          "consensus_method": {
            "type": "string",
            "title": "Consensus Method",
            "description": "Consensus method used"
          },
          "total_latency_ms": {
            "type": "integer",
            "title": "Total Latency Ms",
            "description": "Total execution time"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Analysis timestamp"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Warnings"
          }
        },
        "type": "object",
        "required": [
          "pipeline_id",
          "status",
          "consensus_method",
          "total_latency_ms",
          "created_at"
        ],
        "title": "ParallelPipelineResponse",
        "description": "Response from parallel pipeline execution.",
        "example": {
          "consensus_ci_lower": 0.11,
          "consensus_ci_upper": 0.27,
          "consensus_effect": 0.19,
          "consensus_method": "variance_weighted",
          "created_at": "2026-02-06T12:00:00Z",
          "libraries_failed": [],
          "libraries_succeeded": [
            "dowhy",
            "econml",
            "causalml"
          ],
          "library_agreement_score": 0.92,
          "pipeline_id": "pipe_par_001",
          "status": "completed",
          "total_latency_ms": 5200
        }
      },
      "PatternListResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total patterns"
          },
          "critical_count": {
            "type": "integer",
            "title": "Critical Count",
            "description": "Critical severity count"
          },
          "high_count": {
            "type": "integer",
            "title": "High Count",
            "description": "High severity count"
          },
          "patterns": {
            "items": {
              "$ref": "#/components/schemas/DetectedPattern"
            },
            "type": "array",
            "title": "Patterns",
            "description": "List of patterns"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "critical_count",
          "high_count",
          "patterns"
        ],
        "title": "PatternListResponse",
        "description": "Response for listing patterns."
      },
      "PatternSeverity": {
        "type": "string",
        "enum": [
          "low",
          "medium",
          "high",
          "critical"
        ],
        "title": "PatternSeverity",
        "description": "Severity levels for detected patterns."
      },
      "PatternType": {
        "type": "string",
        "enum": [
          "accuracy_issue",
          "latency_issue",
          "relevance_issue",
          "format_issue",
          "coverage_gap"
        ],
        "title": "PatternType",
        "description": "Types of patterns that can be detected."
      },
      "PerformanceAlertItem": {
        "properties": {
          "metric_name": {
            "type": "string",
            "title": "Metric Name"
          },
          "current_value": {
            "type": "number",
            "title": "Current Value"
          },
          "baseline_value": {
            "type": "number",
            "title": "Baseline Value"
          },
          "change_percent": {
            "type": "number",
            "title": "Change Percent"
          },
          "trend": {
            "type": "string",
            "title": "Trend"
          },
          "severity": {
            "type": "string",
            "title": "Severity"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "metric_name",
          "current_value",
          "baseline_value",
          "change_percent",
          "trend",
          "severity",
          "message"
        ],
        "title": "PerformanceAlertItem",
        "description": "Performance alert."
      },
      "PerformanceAlertsResponse": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "alert_count": {
            "type": "integer",
            "title": "Alert Count"
          },
          "alerts": {
            "items": {
              "$ref": "#/components/schemas/PerformanceAlertItem"
            },
            "type": "array",
            "title": "Alerts"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "alert_count",
          "alerts"
        ],
        "title": "PerformanceAlertsResponse",
        "description": "Response for performance alerts query."
      },
      "PerformanceGap": {
        "properties": {
          "gap_id": {
            "type": "string",
            "title": "Gap Id",
            "description": "Unique gap identifier"
          },
          "metric": {
            "type": "string",
            "title": "Metric",
            "description": "KPI name"
          },
          "segment": {
            "type": "string",
            "title": "Segment",
            "description": "Segmentation dimension"
          },
          "segment_value": {
            "type": "string",
            "title": "Segment Value",
            "description": "Specific segment value"
          },
          "current_value": {
            "type": "number",
            "title": "Current Value",
            "description": "Current performance value"
          },
          "target_value": {
            "type": "number",
            "title": "Target Value",
            "description": "Target/benchmark value"
          },
          "gap_size": {
            "type": "number",
            "title": "Gap Size",
            "description": "Absolute gap (target - current)"
          },
          "gap_percentage": {
            "type": "number",
            "title": "Gap Percentage",
            "description": "Gap as percentage"
          },
          "gap_type": {
            "type": "string",
            "title": "Gap Type",
            "description": "Type of comparison"
          }
        },
        "type": "object",
        "required": [
          "gap_id",
          "metric",
          "segment",
          "segment_value",
          "current_value",
          "target_value",
          "gap_size",
          "gap_percentage",
          "gap_type"
        ],
        "title": "PerformanceGap",
        "description": "Individual performance gap identified."
      },
      "PerformanceMetricItem": {
        "properties": {
          "metric_name": {
            "type": "string",
            "title": "Metric Name"
          },
          "metric_value": {
            "type": "number",
            "title": "Metric Value"
          },
          "recorded_at": {
            "type": "string",
            "format": "date-time",
            "title": "Recorded At"
          }
        },
        "type": "object",
        "required": [
          "metric_name",
          "metric_value",
          "recorded_at"
        ],
        "title": "PerformanceMetricItem",
        "description": "Single performance metric."
      },
      "PerformanceRecordResponse": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "recorded_at": {
            "type": "string",
            "format": "date-time",
            "title": "Recorded At"
          },
          "sample_size": {
            "type": "integer",
            "title": "Sample Size"
          },
          "metrics": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Metrics"
          },
          "alerts_generated": {
            "type": "integer",
            "title": "Alerts Generated",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "recorded_at",
          "sample_size",
          "metrics"
        ],
        "title": "PerformanceRecordResponse",
        "description": "Response from recording performance."
      },
      "PerformanceTrendResponse": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "metric_name": {
            "type": "string",
            "title": "Metric Name"
          },
          "current_value": {
            "type": "number",
            "title": "Current Value"
          },
          "baseline_value": {
            "type": "number",
            "title": "Baseline Value"
          },
          "change_percent": {
            "type": "number",
            "title": "Change Percent"
          },
          "trend": {
            "type": "string",
            "title": "Trend"
          },
          "is_significant": {
            "type": "boolean",
            "title": "Is Significant"
          },
          "alert_threshold_breached": {
            "type": "boolean",
            "title": "Alert Threshold Breached"
          },
          "history": {
            "items": {
              "$ref": "#/components/schemas/PerformanceMetricItem"
            },
            "type": "array",
            "title": "History",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "metric_name",
          "current_value",
          "baseline_value",
          "change_percent",
          "trend",
          "is_significant",
          "alert_threshold_breached"
        ],
        "title": "PerformanceTrendResponse",
        "description": "Response for performance trend query."
      },
      "PipelineHealth": {
        "properties": {
          "pipeline_name": {
            "type": "string",
            "title": "Pipeline Name",
            "description": "Pipeline identifier"
          },
          "last_run": {
            "type": "string",
            "title": "Last Run",
            "description": "Last run timestamp"
          },
          "last_success": {
            "type": "string",
            "title": "Last Success",
            "description": "Last successful run timestamp"
          },
          "rows_processed": {
            "type": "integer",
            "title": "Rows Processed",
            "description": "Rows processed in last run",
            "default": 0
          },
          "freshness_hours": {
            "type": "number",
            "title": "Freshness Hours",
            "description": "Data freshness in hours"
          },
          "status": {
            "$ref": "#/components/schemas/PipelineStatus",
            "description": "Pipeline status"
          }
        },
        "type": "object",
        "required": [
          "pipeline_name",
          "last_run",
          "last_success",
          "freshness_hours",
          "status"
        ],
        "title": "PipelineHealth",
        "description": "Data pipeline status."
      },
      "PipelineHealthResponse": {
        "properties": {
          "pipeline_health_score": {
            "type": "number",
            "title": "Pipeline Health Score",
            "description": "Aggregate score (0-1)"
          },
          "total_pipelines": {
            "type": "integer",
            "title": "Total Pipelines",
            "description": "Total pipelines checked"
          },
          "healthy_count": {
            "type": "integer",
            "title": "Healthy Count",
            "description": "Healthy pipeline count"
          },
          "stale_count": {
            "type": "integer",
            "title": "Stale Count",
            "description": "Stale pipeline count"
          },
          "failed_count": {
            "type": "integer",
            "title": "Failed Count",
            "description": "Failed pipeline count"
          },
          "pipelines": {
            "items": {
              "$ref": "#/components/schemas/PipelineHealth"
            },
            "type": "array",
            "title": "Pipelines",
            "description": "Pipeline details"
          },
          "check_latency_ms": {
            "type": "integer",
            "title": "Check Latency Ms",
            "description": "Check duration"
          }
        },
        "type": "object",
        "required": [
          "pipeline_health_score",
          "total_pipelines",
          "healthy_count",
          "stale_count",
          "failed_count",
          "pipelines",
          "check_latency_ms"
        ],
        "title": "PipelineHealthResponse",
        "description": "Response for pipeline health check."
      },
      "PipelineMode": {
        "type": "string",
        "enum": [
          "sequential",
          "parallel"
        ],
        "title": "PipelineMode",
        "description": "Pipeline execution mode."
      },
      "PipelineStageConfig": {
        "properties": {
          "library": {
            "$ref": "#/components/schemas/CausalLibrary",
            "description": "Library for this stage"
          },
          "estimator": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimator",
            "description": "Specific estimator"
          },
          "parameters": {
            "additionalProperties": true,
            "type": "object",
            "title": "Parameters",
            "description": "Stage parameters"
          },
          "timeout_seconds": {
            "type": "integer",
            "maximum": 300.0,
            "minimum": 10.0,
            "title": "Timeout Seconds",
            "description": "Stage timeout",
            "default": 60
          }
        },
        "type": "object",
        "required": [
          "library"
        ],
        "title": "PipelineStageConfig",
        "description": "Configuration for a pipeline stage."
      },
      "PipelineStageResult": {
        "properties": {
          "stage_number": {
            "type": "integer",
            "title": "Stage Number",
            "description": "Stage position (1-indexed)"
          },
          "library": {
            "type": "string",
            "title": "Library",
            "description": "Library used"
          },
          "estimator": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimator",
            "description": "Estimator used"
          },
          "status": {
            "$ref": "#/components/schemas/src__api__schemas__causal__AnalysisStatus",
            "description": "Stage status"
          },
          "effect_estimate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effect Estimate",
            "description": "Effect estimate"
          },
          "ci_lower": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ci Lower",
            "description": "CI lower bound"
          },
          "ci_upper": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ci Upper",
            "description": "CI upper bound"
          },
          "p_value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "P Value",
            "description": "P-value"
          },
          "additional_results": {
            "additionalProperties": true,
            "type": "object",
            "title": "Additional Results",
            "description": "Library-specific results"
          },
          "latency_ms": {
            "type": "integer",
            "title": "Latency Ms",
            "description": "Stage execution time"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if failed"
          }
        },
        "type": "object",
        "required": [
          "stage_number",
          "library",
          "status",
          "latency_ms"
        ],
        "title": "PipelineStageResult",
        "description": "Result from a single pipeline stage."
      },
      "PipelineStatus": {
        "type": "string",
        "enum": [
          "healthy",
          "stale",
          "failed"
        ],
        "title": "PipelineStatus",
        "description": "Status of a data pipeline."
      },
      "PolicyListResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total recommendations"
          },
          "recommendations": {
            "items": {
              "$ref": "#/components/schemas/PolicyRecommendation"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "Policy recommendations"
          },
          "expected_total_lift": {
            "type": "number",
            "title": "Expected Total Lift",
            "description": "Total expected lift if all policies adopted"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "recommendations",
          "expected_total_lift"
        ],
        "title": "PolicyListResponse",
        "description": "Response for listing policy recommendations."
      },
      "PolicyRecommendation": {
        "properties": {
          "segment": {
            "type": "string",
            "title": "Segment",
            "description": "Segment identifier"
          },
          "current_treatment_rate": {
            "type": "number",
            "title": "Current Treatment Rate",
            "description": "Current treatment rate (0-1)"
          },
          "recommended_treatment_rate": {
            "type": "number",
            "title": "Recommended Treatment Rate",
            "description": "Recommended treatment rate (0-1)"
          },
          "expected_incremental_outcome": {
            "type": "number",
            "title": "Expected Incremental Outcome",
            "description": "Expected incremental outcome from change"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Recommendation confidence (0-1)"
          }
        },
        "type": "object",
        "required": [
          "segment",
          "current_treatment_rate",
          "recommended_treatment_rate",
          "expected_incremental_outcome",
          "confidence"
        ],
        "title": "PolicyRecommendation",
        "description": "Treatment allocation recommendation."
      },
      "PopulationFilterRequest": {
        "properties": {
          "specialties": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Specialties",
            "description": "Filter by specialties",
            "default": []
          },
          "deciles": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Deciles",
            "description": "Filter by deciles (1-10)",
            "default": []
          },
          "regions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Regions",
            "description": "Filter by regions",
            "default": []
          },
          "adoption_stages": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Adoption Stages",
            "description": "Filter by adoption stages",
            "default": []
          },
          "min_baseline_outcome": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Baseline Outcome",
            "description": "Minimum baseline outcome"
          },
          "max_baseline_outcome": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Baseline Outcome",
            "description": "Maximum baseline outcome"
          }
        },
        "type": "object",
        "title": "PopulationFilterRequest",
        "description": "Filters for selecting twin population."
      },
      "PredictionRequest": {
        "properties": {
          "features": {
            "additionalProperties": true,
            "type": "object",
            "title": "Features",
            "description": "Feature dictionary for prediction",
            "examples": [
              {
                "hcp_id": "HCP001",
                "specialty": "Oncology",
                "territory": "Northeast"
              }
            ]
          },
          "entity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entity Id",
            "description": "Entity ID for feature store lookup (if features not provided)"
          },
          "time_horizon": {
            "type": "string",
            "pattern": "^(short_term|medium_term|long_term)$",
            "title": "Time Horizon",
            "description": "Prediction time horizon",
            "default": "short_term"
          },
          "return_probabilities": {
            "type": "boolean",
            "title": "Return Probabilities",
            "description": "Return class probabilities (classification models)",
            "default": false
          },
          "return_intervals": {
            "type": "boolean",
            "title": "Return Intervals",
            "description": "Return prediction intervals (regression models)",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "features"
        ],
        "title": "PredictionRequest",
        "description": "Request schema for model prediction."
      },
      "PredictionResponse": {
        "properties": {
          "model_name": {
            "type": "string",
            "title": "Model Name",
            "description": "Name of the model used"
          },
          "prediction": {
            "title": "Prediction",
            "description": "Model prediction value"
          },
          "confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence",
            "description": "Prediction confidence score (0-1)"
          },
          "probabilities": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Probabilities",
            "description": "Class probabilities (classification only)"
          },
          "prediction_interval": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prediction Interval",
            "description": "Prediction interval (regression only)",
            "examples": [
              {
                "lower": 0.1,
                "upper": 0.9
              }
            ]
          },
          "feature_importance": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Feature Importance",
            "description": "Feature importance scores for this prediction"
          },
          "latency_ms": {
            "type": "number",
            "title": "Latency Ms",
            "description": "Prediction latency in milliseconds"
          },
          "model_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Version",
            "description": "Model version used"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Prediction timestamp (ISO format)"
          }
        },
        "type": "object",
        "required": [
          "model_name",
          "prediction",
          "latency_ms",
          "timestamp"
        ],
        "title": "PredictionResponse",
        "description": "Response schema for model prediction."
      },
      "PrioritizedOpportunity": {
        "properties": {
          "rank": {
            "type": "integer",
            "title": "Rank",
            "description": "Priority rank (1 = highest)"
          },
          "gap": {
            "$ref": "#/components/schemas/PerformanceGap",
            "description": "The identified gap"
          },
          "roi_estimate": {
            "$ref": "#/components/schemas/ROIEstimate",
            "description": "ROI analysis"
          },
          "recommended_action": {
            "type": "string",
            "title": "Recommended Action",
            "description": "Specific action to close gap"
          },
          "implementation_difficulty": {
            "$ref": "#/components/schemas/ImplementationDifficulty",
            "description": "Difficulty level"
          },
          "time_to_impact": {
            "type": "string",
            "title": "Time To Impact",
            "description": "Expected time to results"
          }
        },
        "type": "object",
        "required": [
          "rank",
          "gap",
          "roi_estimate",
          "recommended_action",
          "implementation_difficulty",
          "time_to_impact"
        ],
        "title": "PrioritizedOpportunity",
        "description": "Prioritized gap with ROI estimate and action recommendation."
      },
      "ProceduralFeedbackRequest": {
        "properties": {
          "procedure_id": {
            "type": "string",
            "title": "Procedure Id",
            "description": "ID of the procedure"
          },
          "outcome": {
            "type": "string",
            "title": "Outcome",
            "description": "Outcome: success, partial, failure"
          },
          "score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Score",
            "description": "Outcome score (0-1)"
          },
          "feedback_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Feedback Text",
            "description": "Optional feedback text"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session context"
          },
          "agent_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Name",
            "description": "Agent providing feedback"
          }
        },
        "type": "object",
        "required": [
          "procedure_id",
          "outcome",
          "score"
        ],
        "title": "ProceduralFeedbackRequest",
        "description": "Request to record procedural outcome feedback.",
        "example": {
          "agent_name": "feedback_learner",
          "feedback_text": "Causal analysis correctly identified HCP engagement drop",
          "outcome": "success",
          "procedure_id": "proc_causal_analysis_001",
          "score": 0.85
        }
      },
      "ProceduralFeedbackResponse": {
        "properties": {
          "procedure_id": {
            "type": "string",
            "title": "Procedure Id"
          },
          "feedback_recorded": {
            "type": "boolean",
            "title": "Feedback Recorded"
          },
          "new_success_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Success Rate"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "procedure_id",
          "feedback_recorded",
          "message"
        ],
        "title": "ProceduralFeedbackResponse",
        "description": "Response for procedural feedback recording."
      },
      "ProcessFeedbackRequest": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/FeedbackItem"
            },
            "type": "array",
            "title": "Items",
            "description": "Feedback items to process"
          },
          "detect_patterns": {
            "type": "boolean",
            "title": "Detect Patterns",
            "description": "Whether to detect patterns",
            "default": true
          },
          "generate_recommendations": {
            "type": "boolean",
            "title": "Generate Recommendations",
            "description": "Whether to generate recommendations",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "ProcessFeedbackRequest",
        "description": "Request to process specific feedback items."
      },
      "QueryMetricsSummary": {
        "properties": {
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start"
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End"
          },
          "total_queries": {
            "type": "integer",
            "title": "Total Queries",
            "default": 0
          },
          "successful_queries": {
            "type": "integer",
            "title": "Successful Queries",
            "default": 0
          },
          "failed_queries": {
            "type": "integer",
            "title": "Failed Queries",
            "default": 0
          },
          "success_rate": {
            "type": "number",
            "title": "Success Rate",
            "default": 0.0
          },
          "avg_latency_ms": {
            "type": "number",
            "title": "Avg Latency Ms",
            "default": 0.0
          },
          "p50_latency_ms": {
            "type": "number",
            "title": "P50 Latency Ms",
            "default": 0.0
          },
          "p95_latency_ms": {
            "type": "number",
            "title": "P95 Latency Ms",
            "default": 0.0
          },
          "p99_latency_ms": {
            "type": "number",
            "title": "P99 Latency Ms",
            "default": 0.0
          },
          "intent_distribution": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Intent Distribution"
          },
          "top_agents": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Top Agents"
          }
        },
        "type": "object",
        "required": [
          "period_start",
          "period_end"
        ],
        "title": "QueryMetricsSummary",
        "description": "Summary of query execution metrics."
      },
      "QueryType": {
        "type": "string",
        "enum": [
          "causal",
          "prediction",
          "optimization",
          "monitoring",
          "explanation",
          "general"
        ],
        "title": "QueryType",
        "description": "Types of cognitive queries."
      },
      "QuestionType": {
        "type": "string",
        "enum": [
          "effect_heterogeneity",
          "targeting",
          "segment_optimization",
          "comprehensive"
        ],
        "title": "QuestionType",
        "description": "Type of analysis question for library routing."
      },
      "QuestionType-Input": {
        "type": "string",
        "enum": [
          "effect_heterogeneity",
          "targeting",
          "segment_optimization",
          "comprehensive"
        ],
        "title": "QuestionType",
        "description": "Type of analysis question for library routing."
      },
      "ROIEstimate": {
        "properties": {
          "gap_id": {
            "type": "string",
            "title": "Gap Id",
            "description": "References gap identifier"
          },
          "estimated_revenue_impact": {
            "type": "number",
            "title": "Estimated Revenue Impact",
            "description": "Annual revenue impact (USD)"
          },
          "estimated_cost_to_close": {
            "type": "number",
            "title": "Estimated Cost To Close",
            "description": "One-time cost (USD)"
          },
          "expected_roi": {
            "type": "number",
            "title": "Expected Roi",
            "description": "Base ROI ratio"
          },
          "risk_adjusted_roi": {
            "type": "number",
            "title": "Risk Adjusted Roi",
            "description": "ROI after risk adjustment"
          },
          "payback_period_months": {
            "type": "integer",
            "title": "Payback Period Months",
            "description": "Months to recoup investment"
          },
          "confidence_interval": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ConfidenceInterval"
              },
              {
                "type": "null"
              }
            ],
            "description": "95% confidence interval"
          },
          "attribution_level": {
            "type": "string",
            "title": "Attribution Level",
            "description": "Attribution level"
          },
          "attribution_rate": {
            "type": "number",
            "title": "Attribution Rate",
            "description": "Attribution rate (0-1)"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Estimate confidence (0-1)"
          }
        },
        "type": "object",
        "required": [
          "gap_id",
          "estimated_revenue_impact",
          "estimated_cost_to_close",
          "expected_roi",
          "risk_adjusted_roi",
          "payback_period_months",
          "attribution_level",
          "attribution_rate",
          "confidence"
        ],
        "title": "ROIEstimate",
        "description": "ROI estimate for closing a performance gap."
      },
      "RandomizationMethod": {
        "type": "string",
        "enum": [
          "simple",
          "stratified",
          "block"
        ],
        "title": "RandomizationMethod",
        "description": "Randomization methods."
      },
      "RandomizeRequest": {
        "properties": {
          "units": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Units",
            "description": "List of units to randomize (each with unit_id, unit_type, and optional strata)"
          },
          "method": {
            "$ref": "#/components/schemas/RandomizationMethod",
            "description": "Randomization method",
            "default": "stratified"
          },
          "strata_columns": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Strata Columns",
            "description": "Columns to use for stratification"
          },
          "allocation_ratio": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allocation Ratio",
            "description": "Allocation ratio by variant",
            "default": {
              "control": 0.5,
              "treatment": 0.5
            }
          },
          "block_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Block Size",
            "description": "Block size for block randomization",
            "default": 4
          }
        },
        "type": "object",
        "required": [
          "units"
        ],
        "title": "RandomizeRequest",
        "description": "Request to randomize units to experiment variants.",
        "example": {
          "allocation_ratio": {
            "control": 0.5,
            "treatment": 0.5
          },
          "method": "stratified",
          "strata_columns": [
            "region"
          ],
          "units": [
            {
              "region": "northeast",
              "unit_id": "hcp_001",
              "unit_type": "hcp"
            },
            {
              "region": "southwest",
              "unit_id": "hcp_002",
              "unit_type": "hcp"
            }
          ]
        }
      },
      "RandomizeResponse": {
        "properties": {
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "total_units": {
            "type": "integer",
            "title": "Total Units"
          },
          "assignments": {
            "items": {
              "$ref": "#/components/schemas/AssignmentResult"
            },
            "type": "array",
            "title": "Assignments"
          },
          "variant_counts": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Variant Counts"
          },
          "randomization_method": {
            "type": "string",
            "title": "Randomization Method"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "experiment_id",
          "total_units",
          "assignments",
          "variant_counts",
          "randomization_method",
          "timestamp"
        ],
        "title": "RandomizeResponse",
        "description": "Response from randomization."
      },
      "RecentWorkflowResponse": {
        "properties": {
          "workflow_id": {
            "type": "string",
            "format": "uuid",
            "title": "Workflow Id"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At"
          },
          "entry_count": {
            "type": "integer",
            "title": "Entry Count"
          },
          "first_agent": {
            "type": "string",
            "title": "First Agent"
          },
          "last_agent": {
            "type": "string",
            "title": "Last Agent"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          }
        },
        "type": "object",
        "required": [
          "workflow_id",
          "started_at",
          "entry_count",
          "first_agent",
          "last_agent"
        ],
        "title": "RecentWorkflowResponse",
        "description": "Response model for recent workflow listing."
      },
      "RecommendationEnum": {
        "type": "string",
        "enum": [
          "deploy",
          "skip",
          "refine"
        ],
        "title": "RecommendationEnum",
        "description": "Simulation recommendations."
      },
      "RecordPerformanceRequest": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id",
            "description": "Model version/ID"
          },
          "predictions": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Predictions",
            "description": "Predicted labels"
          },
          "actuals": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Actuals",
            "description": "Actual labels"
          },
          "prediction_scores": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prediction Scores",
            "description": "Prediction probability scores (for AUC)"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "predictions",
          "actuals"
        ],
        "title": "RecordPerformanceRequest",
        "description": "Request to record model performance metrics.",
        "example": {
          "actuals": [
            1,
            0,
            1,
            0,
            0
          ],
          "model_id": "propensity_v2.1.0",
          "prediction_scores": [
            0.85,
            0.23,
            0.91,
            0.67,
            0.12
          ],
          "predictions": [
            1,
            0,
            1,
            1,
            0
          ]
        }
      },
      "RelationshipType": {
        "type": "string",
        "enum": [
          "TREATED_BY",
          "PRESCRIBED",
          "PRESCRIBES",
          "CAUSES",
          "IMPACTS",
          "INFLUENCES",
          "DISCOVERED",
          "GENERATED",
          "MENTIONS",
          "MEMBER_OF",
          "RELATES_TO",
          "RECEIVED",
          "LOCATED_IN",
          "PRACTICES_IN",
          "MEASURED_IN",
          "LEADS_TO"
        ],
        "title": "RelationshipType",
        "description": "Relationship types in the E2I knowledge graph."
      },
      "ResourceHealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Service status"
          },
          "agent_available": {
            "type": "boolean",
            "title": "Agent Available",
            "description": "Resource Optimizer agent status"
          },
          "scipy_available": {
            "type": "boolean",
            "title": "Scipy Available",
            "description": "scipy availability",
            "default": true
          },
          "last_optimization": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Optimization",
            "description": "Last optimization timestamp"
          },
          "optimizations_24h": {
            "type": "integer",
            "title": "Optimizations 24H",
            "description": "Optimizations in last 24 hours",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "status",
          "agent_available"
        ],
        "title": "ResourceHealthResponse",
        "description": "Health check response for resource optimization service."
      },
      "ResourceType": {
        "type": "string",
        "enum": [
          "budget",
          "rep_time",
          "samples",
          "calls"
        ],
        "title": "ResourceType",
        "description": "Types of resources to optimize."
      },
      "ResponderType": {
        "type": "string",
        "enum": [
          "high",
          "low",
          "average"
        ],
        "title": "ResponderType",
        "description": "Types of treatment responders."
      },
      "ResultFormat": {
        "type": "string",
        "enum": [
          "full",
          "compact",
          "ids"
        ],
        "title": "ResultFormat",
        "description": "Result format options."
      },
      "RetrainingDecisionResponse": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "should_retrain": {
            "type": "boolean",
            "title": "Should Retrain"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence"
          },
          "reasons": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Reasons"
          },
          "trigger_factors": {
            "additionalProperties": true,
            "type": "object",
            "title": "Trigger Factors"
          },
          "cooldown_active": {
            "type": "boolean",
            "title": "Cooldown Active"
          },
          "cooldown_ends_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cooldown Ends At"
          },
          "recommended_action": {
            "type": "string",
            "title": "Recommended Action"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "should_retrain",
          "confidence",
          "reasons",
          "trigger_factors",
          "cooldown_active",
          "recommended_action"
        ],
        "title": "RetrainingDecisionResponse",
        "description": "Response for retraining evaluation."
      },
      "RetrainingJobResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version"
          },
          "status": {
            "$ref": "#/components/schemas/RetrainingStatusEnum"
          },
          "trigger_reason": {
            "type": "string",
            "title": "Trigger Reason"
          },
          "triggered_at": {
            "type": "string",
            "format": "date-time",
            "title": "Triggered At"
          },
          "triggered_by": {
            "type": "string",
            "title": "Triggered By"
          },
          "approved_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approved At"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "performance_before": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Performance Before"
          },
          "performance_after": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Performance After"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "model_version",
          "status",
          "trigger_reason",
          "triggered_at",
          "triggered_by"
        ],
        "title": "RetrainingJobResponse",
        "description": "Response for retraining job."
      },
      "RetrainingStatusEnum": {
        "type": "string",
        "enum": [
          "pending",
          "approved",
          "in_progress",
          "completed",
          "failed",
          "rolled_back",
          "cancelled"
        ],
        "title": "RetrainingStatusEnum",
        "description": "Status of retraining job."
      },
      "RetrievalMethod": {
        "type": "string",
        "enum": [
          "dense",
          "sparse",
          "graph",
          "hybrid"
        ],
        "title": "RetrievalMethod",
        "description": "Retrieval methods for hybrid search."
      },
      "RollbackRetrainingRequest": {
        "properties": {
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for rollback"
          }
        },
        "type": "object",
        "required": [
          "reason"
        ],
        "title": "RollbackRetrainingRequest",
        "description": "Request to rollback a retraining.",
        "example": {
          "reason": "Performance degradation on validation set"
        }
      },
      "RouteQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Natural language causal question",
            "examples": [
              "Does increasing sales rep visits cause higher TRx?",
              "How does treatment effect vary by region?",
              "Who should we target for the promotional campaign?"
            ]
          },
          "treatment_var": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Treatment Var",
            "description": "Treatment variable if known"
          },
          "outcome_var": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Outcome Var",
            "description": "Outcome variable if known"
          },
          "context": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context",
            "description": "Additional context for routing"
          },
          "prefer_library": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CausalLibrary"
              },
              {
                "type": "null"
              }
            ],
            "description": "Preferred library (optional override)"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "RouteQueryRequest",
        "description": "Request to route a causal query to appropriate library.",
        "example": {
          "outcome_var": "trx_count",
          "query": "Does increasing sales rep visits cause higher TRx?",
          "treatment_var": "rep_visits"
        }
      },
      "RouteQueryResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query"
          },
          "question_type": {
            "$ref": "#/components/schemas/src__api__schemas__causal__QuestionType",
            "description": "Classified question type"
          },
          "primary_library": {
            "$ref": "#/components/schemas/CausalLibrary",
            "description": "Recommended primary library"
          },
          "secondary_libraries": {
            "items": {
              "$ref": "#/components/schemas/CausalLibrary"
            },
            "type": "array",
            "title": "Secondary Libraries",
            "description": "Recommended secondary libraries"
          },
          "recommended_estimators": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommended Estimators",
            "description": "Recommended estimators"
          },
          "routing_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Routing Confidence",
            "description": "Confidence in routing decision"
          },
          "routing_rationale": {
            "type": "string",
            "title": "Routing Rationale",
            "description": "Explanation for routing decision"
          },
          "suggested_pipeline": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PipelineMode"
              },
              {
                "type": "null"
              }
            ],
            "description": "Suggested pipeline mode"
          }
        },
        "type": "object",
        "required": [
          "query",
          "question_type",
          "primary_library",
          "routing_confidence",
          "routing_rationale"
        ],
        "title": "RouteQueryResponse",
        "description": "Response from query routing.",
        "example": {
          "primary_library": "dowhy",
          "query": "Does increasing sales rep visits cause higher TRx?",
          "question_type": "causal_effect",
          "recommended_estimators": [
            "propensity_score_matching",
            "causal_forest"
          ],
          "routing_confidence": 0.91,
          "routing_rationale": "Direct causal-effect question best suited for DoWhy identification + EconML estimation.",
          "secondary_libraries": [
            "econml"
          ],
          "suggested_pipeline": "sequential"
        }
      },
      "RunGapAnalysisRequest": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Natural language query describing the analysis"
          },
          "brand": {
            "type": "string",
            "title": "Brand",
            "description": "Brand identifier (e.g., 'kisqali', 'fabhalta')"
          },
          "metrics": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Metrics",
            "description": "KPIs to analyze (e.g., ['trx', 'market_share', 'conversion_rate'])",
            "default": [
              "trx",
              "market_share"
            ]
          },
          "segments": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Segments",
            "description": "Segmentation dimensions (e.g., ['region', 'specialty'])",
            "default": [
              "region"
            ]
          },
          "time_period": {
            "type": "string",
            "title": "Time Period",
            "description": "Analysis period (e.g., 'current_quarter', '2024-Q3')",
            "default": "current_quarter"
          },
          "gap_type": {
            "$ref": "#/components/schemas/GapType",
            "description": "Type of gaps to detect",
            "default": "all"
          },
          "min_gap_threshold": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Min Gap Threshold",
            "description": "Minimum gap percentage to report (e.g., 5.0 for 5%)",
            "default": 5.0
          },
          "max_opportunities": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Max Opportunities",
            "description": "Maximum opportunities to return",
            "default": 10
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters",
            "description": "Additional filters (e.g., {'region': 'Northeast'})"
          }
        },
        "type": "object",
        "required": [
          "query",
          "brand"
        ],
        "title": "RunGapAnalysisRequest",
        "description": "Request to run gap analysis.",
        "example": {
          "brand": "kisqali",
          "gap_type": "all",
          "max_opportunities": 10,
          "metrics": [
            "trx",
            "market_share",
            "conversion_rate"
          ],
          "min_gap_threshold": 5.0,
          "query": "Identify performance gaps for Kisqali in Q4",
          "segments": [
            "region",
            "specialty"
          ],
          "time_period": "current_quarter"
        }
      },
      "RunLearningRequest": {
        "properties": {
          "time_range_start": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Range Start",
            "description": "Start of time range (ISO format, defaults to last 24h)"
          },
          "time_range_end": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Range End",
            "description": "End of time range (ISO format, defaults to now)"
          },
          "focus_agents": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Focus Agents",
            "description": "Specific agents to focus on (all if not specified)"
          },
          "min_feedback_count": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Min Feedback Count",
            "description": "Minimum feedback items required to proceed",
            "default": 10
          },
          "pattern_threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Pattern Threshold",
            "description": "Minimum frequency for pattern detection (0-1)",
            "default": 0.1
          },
          "auto_apply": {
            "type": "boolean",
            "title": "Auto Apply",
            "description": "Automatically apply approved updates",
            "default": false
          }
        },
        "type": "object",
        "title": "RunLearningRequest",
        "description": "Request to run a feedback learning cycle.",
        "example": {
          "auto_apply": false,
          "focus_agents": [
            "causal_impact",
            "gap_analyzer"
          ],
          "min_feedback_count": 20,
          "pattern_threshold": 0.15,
          "time_range_end": "2024-01-07T23:59:59Z",
          "time_range_start": "2024-01-01T00:00:00Z"
        }
      },
      "RunOptimizationRequest": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Natural language query"
          },
          "resource_type": {
            "$ref": "#/components/schemas/ResourceType",
            "description": "Type of resource to optimize"
          },
          "allocation_targets": {
            "items": {
              "$ref": "#/components/schemas/AllocationTarget"
            },
            "type": "array",
            "title": "Allocation Targets",
            "description": "Entities to allocate resources to"
          },
          "constraints": {
            "items": {
              "$ref": "#/components/schemas/Constraint"
            },
            "type": "array",
            "title": "Constraints",
            "description": "Optimization constraints"
          },
          "objective": {
            "$ref": "#/components/schemas/OptimizationObjective",
            "description": "Optimization objective",
            "default": "maximize_outcome"
          },
          "solver_type": {
            "$ref": "#/components/schemas/SolverType",
            "description": "Solver type",
            "default": "linear"
          },
          "time_limit_seconds": {
            "type": "integer",
            "maximum": 300.0,
            "minimum": 1.0,
            "title": "Time Limit Seconds",
            "description": "Solver time limit",
            "default": 60
          },
          "gap_tolerance": {
            "type": "number",
            "exclusiveMaximum": 1.0,
            "exclusiveMinimum": 0.0,
            "title": "Gap Tolerance",
            "description": "MILP gap tolerance",
            "default": 0.01
          },
          "run_scenarios": {
            "type": "boolean",
            "title": "Run Scenarios",
            "description": "Run what-if scenarios",
            "default": false
          },
          "scenario_count": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Scenario Count",
            "description": "Number of scenarios",
            "default": 3
          }
        },
        "type": "object",
        "required": [
          "query",
          "resource_type",
          "allocation_targets"
        ],
        "title": "RunOptimizationRequest",
        "description": "Request to run resource optimization.",
        "example": {
          "allocation_targets": [
            {
              "current_allocation": 50000,
              "entity_id": "territory_northeast",
              "entity_type": "territory",
              "expected_response": 1.3,
              "max_allocation": 80000,
              "min_allocation": 30000
            }
          ],
          "constraints": [
            {
              "constraint_type": "budget",
              "scope": "global",
              "value": 200000
            }
          ],
          "objective": "maximize_outcome",
          "query": "Optimize budget allocation across territories",
          "resource_type": "budget"
        }
      },
      "RunSegmentAnalysisRequest": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Natural language query describing the analysis"
          },
          "treatment_var": {
            "type": "string",
            "title": "Treatment Var",
            "description": "Treatment variable name (e.g., 'rep_visits', 'email_campaigns')"
          },
          "outcome_var": {
            "type": "string",
            "title": "Outcome Var",
            "description": "Outcome variable name (e.g., 'trx', 'conversion')"
          },
          "segment_vars": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Segment Vars",
            "description": "Variables to segment by (e.g., ['region', 'specialty'])"
          },
          "effect_modifiers": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effect Modifiers",
            "description": "Variables that modify treatment effect"
          },
          "data_source": {
            "type": "string",
            "title": "Data Source",
            "description": "Data source identifier",
            "default": "hcp_data"
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters",
            "description": "Additional filters"
          },
          "n_estimators": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 10.0,
            "title": "N Estimators",
            "description": "Causal Forest trees",
            "default": 100
          },
          "min_samples_leaf": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Min Samples Leaf",
            "description": "Minimum samples per leaf",
            "default": 10
          },
          "significance_level": {
            "type": "number",
            "exclusiveMaximum": 0.5,
            "exclusiveMinimum": 0.0,
            "title": "Significance Level",
            "description": "For CI calculation",
            "default": 0.05
          },
          "top_segments_count": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Top Segments Count",
            "description": "Number of top segments to return",
            "default": 10
          },
          "question_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/QuestionType-Input"
              },
              {
                "type": "null"
              }
            ],
            "description": "Analysis question type for library routing"
          }
        },
        "type": "object",
        "required": [
          "query",
          "treatment_var",
          "outcome_var",
          "segment_vars"
        ],
        "title": "RunSegmentAnalysisRequest",
        "description": "Request to run segment analysis.",
        "example": {
          "data_source": "hcp_data",
          "effect_modifiers": [
            "practice_size",
            "years_experience"
          ],
          "n_estimators": 100,
          "outcome_var": "trx",
          "query": "Which HCP segments respond best to rep visits?",
          "segment_vars": [
            "region",
            "specialty"
          ],
          "top_segments_count": 10,
          "treatment_var": "rep_visits"
        }
      },
      "SRMCheckResult": {
        "properties": {
          "check_id": {
            "type": "string",
            "title": "Check Id"
          },
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id"
          },
          "checked_at": {
            "type": "string",
            "format": "date-time",
            "title": "Checked At"
          },
          "expected_ratio": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Expected Ratio"
          },
          "actual_counts": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Actual Counts"
          },
          "chi_squared_statistic": {
            "type": "number",
            "title": "Chi Squared Statistic"
          },
          "p_value": {
            "type": "number",
            "title": "P Value"
          },
          "is_srm_detected": {
            "type": "boolean",
            "title": "Is Srm Detected"
          },
          "investigation_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Investigation Notes"
          }
        },
        "type": "object",
        "required": [
          "check_id",
          "experiment_id",
          "checked_at",
          "expected_ratio",
          "actual_counts",
          "chi_squared_statistic",
          "p_value",
          "is_srm_detected"
        ],
        "title": "SRMCheckResult",
        "description": "SRM check result."
      },
      "ScenarioListResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total scenarios"
          },
          "scenarios": {
            "items": {
              "$ref": "#/components/schemas/ScenarioResult"
            },
            "type": "array",
            "title": "Scenarios",
            "description": "Scenario results"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "scenarios"
        ],
        "title": "ScenarioListResponse",
        "description": "Response for listing scenario analyses."
      },
      "ScenarioResult": {
        "properties": {
          "scenario_name": {
            "type": "string",
            "title": "Scenario Name",
            "description": "Scenario name"
          },
          "total_allocation": {
            "type": "number",
            "title": "Total Allocation",
            "description": "Total allocation in scenario"
          },
          "projected_outcome": {
            "type": "number",
            "title": "Projected Outcome",
            "description": "Projected outcome"
          },
          "roi": {
            "type": "number",
            "title": "Roi",
            "description": "Return on investment"
          },
          "constraint_violations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Constraint Violations",
            "description": "Any constraint violations"
          }
        },
        "type": "object",
        "required": [
          "scenario_name",
          "total_allocation",
          "projected_outcome",
          "roi"
        ],
        "title": "ScenarioResult",
        "description": "Result of a scenario analysis."
      },
      "SearchGraphRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query",
            "description": "Natural language search query"
          },
          "entity_types": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/EntityType"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entity Types",
            "description": "Filter results by entity types"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID for context"
          },
          "k": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "K",
            "description": "Number of results",
            "default": 10
          },
          "min_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Min Score",
            "description": "Minimum relevance score",
            "default": 0.0
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "SearchGraphRequest",
        "description": "Request for natural language graph search.",
        "example": {
          "entity_types": [
            "HCP",
            "Brand",
            "KPI"
          ],
          "k": 10,
          "query": "What factors impact TRx in the Northeast?"
        }
      },
      "SearchGraphResponse": {
        "properties": {
          "results": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Results",
            "description": "Search results"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Number of results"
          },
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query"
          },
          "query_latency_ms": {
            "type": "number",
            "title": "Query Latency Ms",
            "description": "Query latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "results",
          "total_results",
          "query",
          "query_latency_ms"
        ],
        "title": "SearchGraphResponse",
        "description": "Response for natural language graph search.",
        "example": {
          "query": "What factors impact TRx in the Northeast?",
          "query_latency_ms": 95.3,
          "results": [
            {
              "label": "KPI",
              "node_id": "n_001",
              "score": 0.95
            }
          ],
          "total_results": 5
        }
      },
      "SearchMode": {
        "type": "string",
        "enum": [
          "hybrid",
          "vector",
          "fulltext",
          "graph"
        ],
        "title": "SearchMode",
        "description": "Search mode options."
      },
      "SearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query",
            "description": "Natural language query"
          },
          "mode": {
            "$ref": "#/components/schemas/SearchMode",
            "description": "Search mode",
            "default": "hybrid"
          },
          "top_k": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Top K",
            "description": "Maximum results to return",
            "default": 10
          },
          "min_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Min Score",
            "description": "Minimum relevance score",
            "default": 0.0
          },
          "require_all_sources": {
            "type": "boolean",
            "title": "Require All Sources",
            "description": "Require results from all backends",
            "default": false
          },
          "include_graph_boost": {
            "type": "boolean",
            "title": "Include Graph Boost",
            "description": "Apply graph context boost",
            "default": true
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters",
            "description": "Optional metadata filters"
          },
          "format": {
            "$ref": "#/components/schemas/ResultFormat",
            "description": "Result format",
            "default": "full"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID for logging"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "User ID for logging"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "SearchRequest",
        "description": "Hybrid search request payload.",
        "example": {
          "include_graph_boost": true,
          "min_score": 0.5,
          "mode": "hybrid",
          "query": "Why did Kisqali TRx drop in the West during Q3?",
          "top_k": 10
        }
      },
      "SearchResponse": {
        "properties": {
          "search_id": {
            "type": "string",
            "title": "Search Id",
            "description": "Unique search identifier"
          },
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Search timestamp"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/SearchResultItem"
            },
            "type": "array",
            "title": "Results",
            "description": "Ranked search results"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Total number of results"
          },
          "entities": {
            "$ref": "#/components/schemas/ExtractedEntitiesResponse",
            "description": "Extracted domain entities"
          },
          "stats": {
            "additionalProperties": true,
            "type": "object",
            "title": "Stats",
            "description": "Search statistics per backend"
          },
          "latency_ms": {
            "type": "number",
            "title": "Latency Ms",
            "description": "Total search latency in milliseconds"
          }
        },
        "type": "object",
        "required": [
          "search_id",
          "query",
          "timestamp",
          "results",
          "total_results",
          "entities",
          "stats",
          "latency_ms"
        ],
        "title": "SearchResponse",
        "description": "Hybrid search response payload.",
        "example": {
          "entities": {
            "brands": [
              "Kisqali"
            ],
            "kpis": [
              "trx"
            ],
            "regions": [
              "west"
            ],
            "time_references": [
              "Q3"
            ]
          },
          "latency_ms": 234.5,
          "query": "Why did Kisqali TRx drop in the West during Q3?",
          "results": [],
          "search_id": "SEARCH-20241220-abc123",
          "stats": {
            "fulltext_count": 3,
            "graph_count": 2,
            "vector_count": 5
          },
          "timestamp": "2024-12-20T10:30:00Z",
          "total_results": 8
        }
      },
      "SearchResultItem": {
        "properties": {
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Unique document identifier"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Document content or snippet"
          },
          "score": {
            "type": "number",
            "title": "Score",
            "description": "Relevance score (0-1)"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source backend (vector/fulltext/graph)"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "content",
          "score",
          "source"
        ],
        "title": "SearchResultItem",
        "description": "Single search result item.",
        "example": {
          "content": "Kisqali TRx decline in Q3 2024 was caused by...",
          "document_id": "causal_path_001",
          "metadata": {
            "brand": "Kisqali",
            "region": "northeast",
            "time_period": "Q3_2024"
          },
          "score": 0.89,
          "source": "vector"
        }
      },
      "SegmentAnalysisResponse": {
        "properties": {
          "analysis_id": {
            "type": "string",
            "title": "Analysis Id",
            "description": "Unique analysis identifier"
          },
          "status": {
            "$ref": "#/components/schemas/AnalysisStatus",
            "description": "Analysis status"
          },
          "question_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/QuestionType"
              },
              {
                "type": "null"
              }
            ],
            "description": "Question type used for routing"
          },
          "cate_by_segment": {
            "additionalProperties": {
              "items": {
                "$ref": "#/components/schemas/CATEResult"
              },
              "type": "array"
            },
            "type": "object",
            "title": "Cate By Segment",
            "description": "CATE results grouped by segment variable"
          },
          "overall_ate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overall Ate",
            "description": "Overall Average Treatment Effect"
          },
          "heterogeneity_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heterogeneity Score",
            "description": "Treatment effect heterogeneity (0-1)"
          },
          "feature_importance": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Feature Importance",
            "description": "Feature importance for CATE"
          },
          "uplift_metrics": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UpliftMetrics"
              },
              {
                "type": "null"
              }
            ],
            "description": "Uplift modeling metrics"
          },
          "high_responders": {
            "items": {
              "$ref": "#/components/schemas/SegmentProfile"
            },
            "type": "array",
            "title": "High Responders",
            "description": "High responder segments"
          },
          "low_responders": {
            "items": {
              "$ref": "#/components/schemas/SegmentProfile"
            },
            "type": "array",
            "title": "Low Responders",
            "description": "Low responder segments"
          },
          "policy_recommendations": {
            "items": {
              "$ref": "#/components/schemas/PolicyRecommendation"
            },
            "type": "array",
            "title": "Policy Recommendations",
            "description": "Targeting recommendations"
          },
          "expected_total_lift": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Total Lift",
            "description": "Expected lift from optimal allocation"
          },
          "optimal_allocation_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Optimal Allocation Summary",
            "description": "Summary of optimal allocation"
          },
          "executive_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Executive Summary",
            "description": "Executive-level summary"
          },
          "key_insights": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Key Insights",
            "description": "Key findings"
          },
          "libraries_used": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Libraries Used",
            "description": "Causal libraries used"
          },
          "library_agreement_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Library Agreement Score",
            "description": "Agreement between libraries (0-1)"
          },
          "validation_passed": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validation Passed",
            "description": "Whether cross-validation passed"
          },
          "estimation_latency_ms": {
            "type": "integer",
            "title": "Estimation Latency Ms",
            "description": "CATE estimation time",
            "default": 0
          },
          "analysis_latency_ms": {
            "type": "integer",
            "title": "Analysis Latency Ms",
            "description": "Segment analysis time",
            "default": 0
          },
          "total_latency_ms": {
            "type": "integer",
            "title": "Total Latency Ms",
            "description": "Total workflow time",
            "default": 0
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Analysis timestamp"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Analysis warnings"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Overall analysis confidence",
            "default": 0.0
          }
        },
        "type": "object",
        "required": [
          "analysis_id",
          "status"
        ],
        "title": "SegmentAnalysisResponse",
        "description": "Response from segment analysis.",
        "example": {
          "analysis_id": "seg_abc123",
          "heterogeneity_score": 0.65,
          "overall_ate": 12.5,
          "status": "completed",
          "total_latency_ms": 4500
        }
      },
      "SegmentCATEResult": {
        "properties": {
          "segment_id": {
            "type": "integer",
            "title": "Segment Id",
            "description": "Segment identifier"
          },
          "segment_name": {
            "type": "string",
            "title": "Segment Name",
            "description": "Segment name (e.g., 'high_uplift')"
          },
          "n_samples": {
            "type": "integer",
            "title": "N Samples",
            "description": "Number of samples in segment"
          },
          "uplift_range": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "maxItems": 2,
            "minItems": 2,
            "title": "Uplift Range",
            "description": "Uplift score range [min, max]"
          },
          "cate_mean": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cate Mean",
            "description": "Mean CATE estimate"
          },
          "cate_std": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cate Std",
            "description": "CATE standard deviation"
          },
          "cate_ci_lower": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cate Ci Lower",
            "description": "CATE CI lower bound"
          },
          "cate_ci_upper": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cate Ci Upper",
            "description": "CATE CI upper bound"
          },
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether estimation succeeded"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error if failed"
          }
        },
        "type": "object",
        "required": [
          "segment_id",
          "segment_name",
          "n_samples",
          "uplift_range",
          "success"
        ],
        "title": "SegmentCATEResult",
        "description": "CATE result for a single segment."
      },
      "SegmentHealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Service status"
          },
          "agent_available": {
            "type": "boolean",
            "title": "Agent Available",
            "description": "Heterogeneous Optimizer agent status"
          },
          "econml_available": {
            "type": "boolean",
            "title": "Econml Available",
            "description": "EconML availability",
            "default": true
          },
          "causalml_available": {
            "type": "boolean",
            "title": "Causalml Available",
            "description": "CausalML availability",
            "default": true
          },
          "last_analysis": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Analysis",
            "description": "Last analysis timestamp"
          },
          "analyses_24h": {
            "type": "integer",
            "title": "Analyses 24H",
            "description": "Analyses in last 24 hours",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "status",
          "agent_available"
        ],
        "title": "SegmentHealthResponse",
        "description": "Health check response for segment analysis service."
      },
      "SegmentProfile": {
        "properties": {
          "segment_id": {
            "type": "string",
            "title": "Segment Id",
            "description": "Unique segment identifier"
          },
          "responder_type": {
            "$ref": "#/components/schemas/ResponderType",
            "description": "Responder classification"
          },
          "cate_estimate": {
            "type": "number",
            "title": "Cate Estimate",
            "description": "CATE for this segment"
          },
          "defining_features": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Defining Features",
            "description": "Features that define this segment"
          },
          "size": {
            "type": "integer",
            "title": "Size",
            "description": "Segment size (observations)"
          },
          "size_percentage": {
            "type": "number",
            "title": "Size Percentage",
            "description": "Percentage of total population"
          },
          "recommendation": {
            "type": "string",
            "title": "Recommendation",
            "description": "Targeting recommendation"
          }
        },
        "type": "object",
        "required": [
          "segment_id",
          "responder_type",
          "cate_estimate",
          "defining_features",
          "size",
          "size_percentage",
          "recommendation"
        ],
        "title": "SegmentProfile",
        "description": "Profile of a high/low responder segment."
      },
      "SegmentationMethod": {
        "type": "string",
        "enum": [
          "quantile",
          "kmeans",
          "threshold",
          "tree"
        ],
        "title": "SegmentationMethod",
        "description": "Segmentation methods for hierarchical analysis."
      },
      "SemanticPathResponse": {
        "properties": {
          "paths": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Paths",
            "description": "Found paths"
          },
          "total_paths": {
            "type": "integer",
            "title": "Total Paths",
            "description": "Number of paths found"
          },
          "max_depth_searched": {
            "type": "integer",
            "title": "Max Depth Searched",
            "description": "Depth searched"
          },
          "query_latency_ms": {
            "type": "number",
            "title": "Query Latency Ms",
            "description": "Query latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "paths",
          "total_paths",
          "max_depth_searched",
          "query_latency_ms"
        ],
        "title": "SemanticPathResponse",
        "description": "Response for semantic path queries."
      },
      "SequentialPipelineRequest": {
        "properties": {
          "treatment_var": {
            "type": "string",
            "title": "Treatment Var",
            "description": "Treatment variable"
          },
          "outcome_var": {
            "type": "string",
            "title": "Outcome Var",
            "description": "Outcome variable"
          },
          "covariates": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Covariates",
            "description": "Covariate variables"
          },
          "data_source": {
            "type": "string",
            "title": "Data Source",
            "description": "Data source",
            "default": "mock_data"
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters",
            "description": "Data filters"
          },
          "stages": {
            "items": {
              "$ref": "#/components/schemas/PipelineStageConfig"
            },
            "type": "array",
            "maxItems": 4,
            "minItems": 2,
            "title": "Stages",
            "description": "Pipeline stages in order"
          },
          "propagate_state": {
            "type": "boolean",
            "title": "Propagate State",
            "description": "Propagate results between stages",
            "default": true
          },
          "stop_on_failure": {
            "type": "boolean",
            "title": "Stop On Failure",
            "description": "Stop pipeline on stage failure",
            "default": true
          },
          "validation_threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.5,
            "title": "Validation Threshold",
            "description": "Minimum agreement threshold for validation",
            "default": 0.8
          }
        },
        "type": "object",
        "required": [
          "treatment_var",
          "outcome_var",
          "stages"
        ],
        "title": "SequentialPipelineRequest",
        "description": "Request for sequential multi-library pipeline.",
        "example": {
          "covariates": [
            "age",
            "income"
          ],
          "outcome_var": "outcome",
          "stages": [
            {
              "library": "networkx",
              "parameters": {}
            },
            {
              "estimator": "propensity_score_matching",
              "library": "dowhy"
            },
            {
              "estimator": "causal_forest",
              "library": "econml"
            },
            {
              "estimator": "uplift_random_forest",
              "library": "causalml"
            }
          ],
          "treatment_var": "treatment"
        }
      },
      "SequentialPipelineResponse": {
        "properties": {
          "pipeline_id": {
            "type": "string",
            "title": "Pipeline Id",
            "description": "Unique pipeline identifier"
          },
          "status": {
            "$ref": "#/components/schemas/src__api__schemas__causal__AnalysisStatus",
            "description": "Overall pipeline status"
          },
          "stages_completed": {
            "type": "integer",
            "title": "Stages Completed",
            "description": "Number of stages completed"
          },
          "stages_total": {
            "type": "integer",
            "title": "Stages Total",
            "description": "Total number of stages"
          },
          "stage_results": {
            "items": {
              "$ref": "#/components/schemas/PipelineStageResult"
            },
            "type": "array",
            "title": "Stage Results",
            "description": "Results from each stage"
          },
          "consensus_effect": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Consensus Effect",
            "description": "Confidence-weighted consensus effect"
          },
          "consensus_ci_lower": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Consensus Ci Lower",
            "description": "Consensus CI lower"
          },
          "consensus_ci_upper": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Consensus Ci Upper",
            "description": "Consensus CI upper"
          },
          "library_agreement_score": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Library Agreement Score",
            "description": "Agreement between libraries"
          },
          "effect_estimate_variance": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effect Estimate Variance",
            "description": "Variance across library estimates"
          },
          "total_latency_ms": {
            "type": "integer",
            "title": "Total Latency Ms",
            "description": "Total pipeline execution time"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Pipeline start timestamp"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Warnings"
          }
        },
        "type": "object",
        "required": [
          "pipeline_id",
          "status",
          "stages_completed",
          "stages_total",
          "total_latency_ms",
          "created_at"
        ],
        "title": "SequentialPipelineResponse",
        "description": "Response from sequential pipeline execution.",
        "example": {
          "consensus_ci_lower": 0.12,
          "consensus_ci_upper": 0.3,
          "consensus_effect": 0.21,
          "created_at": "2026-02-06T12:00:00Z",
          "library_agreement_score": 0.87,
          "pipeline_id": "pipe_seq_001",
          "stages_completed": 3,
          "stages_total": 3,
          "status": "completed",
          "total_latency_ms": 8900
        }
      },
      "SessionContext": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "description": "Session identifier"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region"
          },
          "state": {
            "$ref": "#/components/schemas/SessionState",
            "default": "active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "last_activity": {
            "type": "string",
            "format": "date-time",
            "title": "Last Activity"
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count",
            "default": 0
          },
          "current_phase": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CognitivePhase"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "SessionContext",
        "description": "Current session context."
      },
      "SessionMessage": {
        "properties": {
          "role": {
            "type": "string",
            "title": "Role",
            "description": "Message role (user, assistant, system)"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Message content"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "agent_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Name"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata"
          }
        },
        "type": "object",
        "required": [
          "role",
          "content"
        ],
        "title": "SessionMessage",
        "description": "Message in session history."
      },
      "SessionResponse": {
        "properties": {
          "context": {
            "$ref": "#/components/schemas/SessionContext",
            "description": "Session context"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/SessionMessage"
            },
            "type": "array",
            "title": "Messages",
            "description": "Message history"
          },
          "evidence_trail": {
            "items": {
              "$ref": "#/components/schemas/EvidenceItem"
            },
            "type": "array",
            "title": "Evidence Trail",
            "description": "Accumulated evidence"
          },
          "memory_stats": {
            "additionalProperties": true,
            "type": "object",
            "title": "Memory Stats",
            "description": "Memory retrieval stats"
          }
        },
        "type": "object",
        "required": [
          "context",
          "messages"
        ],
        "title": "SessionResponse",
        "description": "Full session state response."
      },
      "SessionState": {
        "type": "string",
        "enum": [
          "active",
          "completed",
          "failed",
          "timeout"
        ],
        "title": "SessionState",
        "description": "Session states."
      },
      "SimulateRequest": {
        "properties": {
          "intervention": {
            "$ref": "#/components/schemas/InterventionConfigRequest"
          },
          "brand": {
            "$ref": "#/components/schemas/BrandEnum"
          },
          "twin_type": {
            "$ref": "#/components/schemas/TwinTypeEnum",
            "default": "hcp"
          },
          "population_filters": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PopulationFilterRequest"
              },
              {
                "type": "null"
              }
            ]
          },
          "twin_count": {
            "type": "integer",
            "maximum": 100000.0,
            "minimum": 100.0,
            "title": "Twin Count",
            "description": "Number of twins to simulate",
            "default": 10000
          },
          "confidence_level": {
            "type": "number",
            "maximum": 0.99,
            "minimum": 0.8,
            "title": "Confidence Level",
            "description": "Confidence level for CI",
            "default": 0.95
          },
          "calculate_heterogeneity": {
            "type": "boolean",
            "title": "Calculate Heterogeneity",
            "description": "Calculate heterogeneous effects",
            "default": true
          },
          "model_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Id",
            "description": "Specific model ID to use"
          },
          "experiment_design_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Experiment Design Id",
            "description": "Link to experiment design"
          }
        },
        "type": "object",
        "required": [
          "intervention",
          "brand"
        ],
        "title": "SimulateRequest",
        "description": "Request to run a twin simulation.",
        "example": {
          "brand": "Remibrutinib",
          "intervention": {
            "channel": "email",
            "duration_weeks": 8,
            "intervention_type": "email_campaign"
          },
          "population_filters": {
            "deciles": [
              1,
              2,
              3
            ]
          },
          "twin_count": 10000,
          "twin_type": "hcp"
        }
      },
      "SimulationDetailResponse": {
        "properties": {
          "simulation_id": {
            "type": "string",
            "title": "Simulation Id"
          },
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "intervention_type": {
            "type": "string",
            "title": "Intervention Type"
          },
          "brand": {
            "type": "string",
            "title": "Brand"
          },
          "twin_type": {
            "type": "string",
            "title": "Twin Type"
          },
          "twin_count": {
            "type": "integer",
            "title": "Twin Count"
          },
          "simulated_ate": {
            "type": "number",
            "title": "Simulated Ate"
          },
          "simulated_ci_lower": {
            "type": "number",
            "title": "Simulated Ci Lower"
          },
          "simulated_ci_upper": {
            "type": "number",
            "title": "Simulated Ci Upper"
          },
          "simulated_std_error": {
            "type": "number",
            "title": "Simulated Std Error"
          },
          "effect_size_cohens_d": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effect Size Cohens D"
          },
          "statistical_power": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Statistical Power"
          },
          "recommendation": {
            "$ref": "#/components/schemas/RecommendationEnum"
          },
          "recommendation_rationale": {
            "type": "string",
            "title": "Recommendation Rationale"
          },
          "recommended_sample_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recommended Sample Size"
          },
          "recommended_duration_weeks": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recommended Duration Weeks"
          },
          "simulation_confidence": {
            "type": "number",
            "title": "Simulation Confidence"
          },
          "fidelity_warning": {
            "type": "boolean",
            "title": "Fidelity Warning"
          },
          "fidelity_warning_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fidelity Warning Reason"
          },
          "model_fidelity_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Fidelity Score"
          },
          "status": {
            "$ref": "#/components/schemas/SimulationStatusEnum"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "execution_time_ms": {
            "type": "integer",
            "title": "Execution Time Ms"
          },
          "is_significant": {
            "type": "boolean",
            "title": "Is Significant"
          },
          "effect_direction": {
            "type": "string",
            "title": "Effect Direction"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "population_filters": {
            "additionalProperties": true,
            "type": "object",
            "title": "Population Filters"
          },
          "effect_heterogeneity": {
            "$ref": "#/components/schemas/EffectHeterogeneityResponse"
          },
          "intervention_config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Intervention Config"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          }
        },
        "type": "object",
        "required": [
          "simulation_id",
          "model_id",
          "intervention_type",
          "brand",
          "twin_type",
          "twin_count",
          "simulated_ate",
          "simulated_ci_lower",
          "simulated_ci_upper",
          "simulated_std_error",
          "recommendation",
          "recommendation_rationale",
          "simulation_confidence",
          "fidelity_warning",
          "status",
          "execution_time_ms",
          "is_significant",
          "effect_direction",
          "created_at",
          "population_filters",
          "effect_heterogeneity",
          "intervention_config"
        ],
        "title": "SimulationDetailResponse",
        "description": "Detailed simulation response including heterogeneity."
      },
      "SimulationListItem": {
        "properties": {
          "simulation_id": {
            "type": "string",
            "title": "Simulation Id"
          },
          "intervention_type": {
            "type": "string",
            "title": "Intervention Type"
          },
          "brand": {
            "type": "string",
            "title": "Brand"
          },
          "twin_type": {
            "type": "string",
            "title": "Twin Type"
          },
          "twin_count": {
            "type": "integer",
            "title": "Twin Count"
          },
          "simulated_ate": {
            "type": "number",
            "title": "Simulated Ate"
          },
          "recommendation": {
            "$ref": "#/components/schemas/RecommendationEnum"
          },
          "status": {
            "$ref": "#/components/schemas/SimulationStatusEnum"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "simulation_id",
          "intervention_type",
          "brand",
          "twin_type",
          "twin_count",
          "simulated_ate",
          "recommendation",
          "status",
          "created_at"
        ],
        "title": "SimulationListItem",
        "description": "Summary item for simulation list."
      },
      "SimulationListResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "simulations": {
            "items": {
              "$ref": "#/components/schemas/SimulationListItem"
            },
            "type": "array",
            "title": "Simulations"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "simulations",
          "page",
          "page_size"
        ],
        "title": "SimulationListResponse",
        "description": "Response for listing simulations."
      },
      "SimulationResponse": {
        "properties": {
          "simulation_id": {
            "type": "string",
            "title": "Simulation Id"
          },
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "intervention_type": {
            "type": "string",
            "title": "Intervention Type"
          },
          "brand": {
            "type": "string",
            "title": "Brand"
          },
          "twin_type": {
            "type": "string",
            "title": "Twin Type"
          },
          "twin_count": {
            "type": "integer",
            "title": "Twin Count"
          },
          "simulated_ate": {
            "type": "number",
            "title": "Simulated Ate"
          },
          "simulated_ci_lower": {
            "type": "number",
            "title": "Simulated Ci Lower"
          },
          "simulated_ci_upper": {
            "type": "number",
            "title": "Simulated Ci Upper"
          },
          "simulated_std_error": {
            "type": "number",
            "title": "Simulated Std Error"
          },
          "effect_size_cohens_d": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effect Size Cohens D"
          },
          "statistical_power": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Statistical Power"
          },
          "recommendation": {
            "$ref": "#/components/schemas/RecommendationEnum"
          },
          "recommendation_rationale": {
            "type": "string",
            "title": "Recommendation Rationale"
          },
          "recommended_sample_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recommended Sample Size"
          },
          "recommended_duration_weeks": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recommended Duration Weeks"
          },
          "simulation_confidence": {
            "type": "number",
            "title": "Simulation Confidence"
          },
          "fidelity_warning": {
            "type": "boolean",
            "title": "Fidelity Warning"
          },
          "fidelity_warning_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fidelity Warning Reason"
          },
          "model_fidelity_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Fidelity Score"
          },
          "status": {
            "$ref": "#/components/schemas/SimulationStatusEnum"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "execution_time_ms": {
            "type": "integer",
            "title": "Execution Time Ms"
          },
          "is_significant": {
            "type": "boolean",
            "title": "Is Significant"
          },
          "effect_direction": {
            "type": "string",
            "title": "Effect Direction"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "simulation_id",
          "model_id",
          "intervention_type",
          "brand",
          "twin_type",
          "twin_count",
          "simulated_ate",
          "simulated_ci_lower",
          "simulated_ci_upper",
          "simulated_std_error",
          "recommendation",
          "recommendation_rationale",
          "simulation_confidence",
          "fidelity_warning",
          "status",
          "execution_time_ms",
          "is_significant",
          "effect_direction",
          "created_at"
        ],
        "title": "SimulationResponse",
        "description": "Response from a simulation run."
      },
      "SimulationStatusEnum": {
        "type": "string",
        "enum": [
          "pending",
          "running",
          "completed",
          "failed"
        ],
        "title": "SimulationStatusEnum",
        "description": "Simulation status values."
      },
      "SolverType": {
        "type": "string",
        "enum": [
          "linear",
          "milp",
          "nonlinear"
        ],
        "title": "SolverType",
        "description": "Available solver types."
      },
      "SortOrder": {
        "type": "string",
        "enum": [
          "asc",
          "desc"
        ],
        "title": "SortOrder",
        "description": "Sort order for list queries."
      },
      "StoppingDecision": {
        "type": "string",
        "enum": [
          "continue",
          "stop_efficacy",
          "stop_futility"
        ],
        "title": "StoppingDecision",
        "description": "Interim analysis stopping decisions."
      },
      "TimeSeriesPoint": {
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "value": {
            "type": "number",
            "title": "Value"
          },
          "label": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Label"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "value"
        ],
        "title": "TimeSeriesPoint",
        "description": "Single point in a time series."
      },
      "TraceFeedbackRequest": {
        "properties": {
          "trace_id": {
            "type": "string",
            "title": "Trace Id",
            "description": "Opik trace ID"
          },
          "score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Score",
            "description": "Feedback score (0.0 to 1.0)"
          },
          "agent_name": {
            "type": "string",
            "title": "Agent Name",
            "description": "Agent that generated the response"
          },
          "feedback_type": {
            "type": "string",
            "title": "Feedback Type",
            "description": "Type of feedback (rating, correction, outcome, explicit)",
            "default": "rating"
          },
          "span_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Span Id",
            "description": "Optional specific span ID"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category",
            "description": "Feedback category (accuracy, relevance, latency, format)"
          },
          "user_feedback": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Feedback",
            "description": "Raw user feedback data"
          },
          "query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query",
            "description": "Original user query"
          },
          "response": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Response",
            "description": "Agent response"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "trace_id",
          "score",
          "agent_name"
        ],
        "title": "TraceFeedbackRequest",
        "description": "Request to record feedback for an Opik trace.",
        "example": {
          "agent_name": "causal_impact",
          "category": "accuracy",
          "feedback_type": "rating",
          "query": "What drives TRx for Kisqali?",
          "score": 0.8,
          "trace_id": "trace_abc123",
          "user_feedback": {
            "comment": "Good analysis",
            "helpful": true,
            "rating": 4
          }
        }
      },
      "TraceFeedbackResponse": {
        "properties": {
          "feedback_id": {
            "type": "string",
            "title": "Feedback Id",
            "description": "Unique feedback identifier"
          },
          "trace_id": {
            "type": "string",
            "title": "Trace Id",
            "description": "Associated trace ID"
          },
          "agent_name": {
            "type": "string",
            "title": "Agent Name",
            "description": "Agent name"
          },
          "score": {
            "type": "number",
            "title": "Score",
            "description": "Recorded score"
          },
          "logged_to_opik": {
            "type": "boolean",
            "title": "Logged To Opik",
            "description": "Whether feedback was logged to Opik"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Recording timestamp"
          }
        },
        "type": "object",
        "required": [
          "feedback_id",
          "trace_id",
          "agent_name",
          "score",
          "logged_to_opik",
          "timestamp"
        ],
        "title": "TraceFeedbackResponse",
        "description": "Response from recording trace feedback."
      },
      "TraverseRequest": {
        "properties": {
          "start_node_id": {
            "type": "string",
            "title": "Start Node Id",
            "description": "Starting node ID"
          },
          "relationship_types": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/RelationshipType"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Relationship Types",
            "description": "Relationship types to follow"
          },
          "direction": {
            "type": "string",
            "title": "Direction",
            "description": "Traversal direction: outgoing, incoming, both",
            "default": "outgoing"
          },
          "max_depth": {
            "type": "integer",
            "maximum": 5.0,
            "minimum": 1.0,
            "title": "Max Depth",
            "description": "Maximum traversal depth",
            "default": 2
          },
          "min_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Min Confidence",
            "description": "Minimum edge confidence",
            "default": 0.0
          },
          "include_properties": {
            "type": "boolean",
            "title": "Include Properties",
            "description": "Include node/edge properties",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "start_node_id"
        ],
        "title": "TraverseRequest",
        "description": "Request for graph traversal from a starting node.",
        "example": {
          "direction": "incoming",
          "max_depth": 3,
          "min_confidence": 0.5,
          "relationship_types": [
            "CAUSES",
            "IMPACTS"
          ],
          "start_node_id": "kpi_trx"
        }
      },
      "TraverseResponse": {
        "properties": {
          "subgraph": {
            "additionalProperties": true,
            "type": "object",
            "title": "Subgraph",
            "description": "Subgraph with nodes and edges"
          },
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/GraphNode"
            },
            "type": "array",
            "title": "Nodes",
            "description": "All traversed nodes"
          },
          "relationships": {
            "items": {
              "$ref": "#/components/schemas/GraphRelationship"
            },
            "type": "array",
            "title": "Relationships",
            "description": "All traversed relationships"
          },
          "paths": {
            "items": {
              "$ref": "#/components/schemas/GraphPath"
            },
            "type": "array",
            "title": "Paths",
            "description": "Discovered paths"
          },
          "max_depth_reached": {
            "type": "integer",
            "title": "Max Depth Reached",
            "description": "Actual depth reached"
          },
          "query_latency_ms": {
            "type": "number",
            "title": "Query Latency Ms",
            "description": "Query latency in milliseconds"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "subgraph",
          "nodes",
          "relationships",
          "max_depth_reached",
          "query_latency_ms"
        ],
        "title": "TraverseResponse",
        "description": "Response for graph traversal.",
        "example": {
          "max_depth_reached": 2,
          "nodes": [],
          "query_latency_ms": 35.4,
          "relationships": [],
          "subgraph": {
            "edges": [],
            "nodes": []
          }
        }
      },
      "TriggerDriftDetectionRequest": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id",
            "description": "Model version/ID to check for drift"
          },
          "time_window": {
            "type": "string",
            "title": "Time Window",
            "description": "Time window for comparison (e.g., '7d', '14d', '30d')",
            "default": "7d"
          },
          "features": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Features",
            "description": "Specific features to check (None = all available)"
          },
          "check_data_drift": {
            "type": "boolean",
            "title": "Check Data Drift",
            "description": "Enable data drift detection",
            "default": true
          },
          "check_model_drift": {
            "type": "boolean",
            "title": "Check Model Drift",
            "description": "Enable model drift detection",
            "default": true
          },
          "check_concept_drift": {
            "type": "boolean",
            "title": "Check Concept Drift",
            "description": "Enable concept drift detection",
            "default": true
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Optional brand filter"
          }
        },
        "type": "object",
        "required": [
          "model_id"
        ],
        "title": "TriggerDriftDetectionRequest",
        "description": "Request to trigger drift detection for a model.",
        "example": {
          "check_concept_drift": true,
          "check_data_drift": true,
          "check_model_drift": true,
          "model_id": "propensity_v2.1.0",
          "time_window": "7d"
        }
      },
      "TriggerInterimAnalysisRequest": {
        "properties": {
          "analysis_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Analysis Number",
            "description": "Specific analysis number (auto-detected if not provided)"
          },
          "force": {
            "type": "boolean",
            "title": "Force",
            "description": "Force analysis even if milestone not reached",
            "default": false
          }
        },
        "type": "object",
        "title": "TriggerInterimAnalysisRequest",
        "description": "Request to trigger an interim analysis.",
        "example": {
          "analysis_number": 2,
          "force": false
        }
      },
      "TriggerMonitorRequest": {
        "properties": {
          "experiment_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Experiment Ids",
            "description": "Specific experiments to check (all active if not provided)"
          },
          "check_srm": {
            "type": "boolean",
            "title": "Check Srm",
            "description": "Check for SRM",
            "default": true
          },
          "check_enrollment": {
            "type": "boolean",
            "title": "Check Enrollment",
            "description": "Check enrollment rates",
            "default": true
          },
          "check_fidelity": {
            "type": "boolean",
            "title": "Check Fidelity",
            "description": "Check Digital Twin fidelity",
            "default": true
          },
          "srm_threshold": {
            "type": "number",
            "title": "Srm Threshold",
            "description": "SRM p-value threshold",
            "default": 0.001
          }
        },
        "type": "object",
        "title": "TriggerMonitorRequest",
        "description": "Request to trigger experiment monitoring.",
        "example": {
          "check_enrollment": true,
          "check_fidelity": true,
          "check_srm": true,
          "srm_threshold": 0.001
        }
      },
      "TriggerReasonEnum": {
        "type": "string",
        "enum": [
          "data_drift",
          "model_drift",
          "concept_drift",
          "performance_degradation",
          "scheduled",
          "manual"
        ],
        "title": "TriggerReasonEnum",
        "description": "Reasons for triggering retraining."
      },
      "TriggerRetrainingRequest": {
        "properties": {
          "reason": {
            "$ref": "#/components/schemas/TriggerReasonEnum",
            "description": "Reason for retraining"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Additional notes"
          },
          "auto_approve": {
            "type": "boolean",
            "title": "Auto Approve",
            "description": "Auto-approve retraining",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "reason"
        ],
        "title": "TriggerRetrainingRequest",
        "description": "Request to trigger model retraining.",
        "example": {
          "auto_approve": false,
          "notes": "Significant drift detected in key features",
          "reason": "data_drift"
        }
      },
      "TwinModelDetailResponse": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "model_name": {
            "type": "string",
            "title": "Model Name"
          },
          "twin_type": {
            "type": "string",
            "title": "Twin Type"
          },
          "brand": {
            "type": "string",
            "title": "Brand"
          },
          "algorithm": {
            "type": "string",
            "title": "Algorithm"
          },
          "r2_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "R2 Score"
          },
          "rmse": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rmse"
          },
          "training_samples": {
            "type": "integer",
            "title": "Training Samples"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "model_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Description"
          },
          "feature_columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Feature Columns"
          },
          "target_column": {
            "type": "string",
            "title": "Target Column"
          },
          "cv_mean": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cv Mean"
          },
          "cv_std": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cv Std"
          },
          "feature_importances": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Feature Importances"
          },
          "top_features": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Top Features"
          },
          "training_duration_seconds": {
            "type": "number",
            "title": "Training Duration Seconds"
          },
          "config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Config"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "model_name",
          "twin_type",
          "brand",
          "algorithm",
          "training_samples",
          "is_active",
          "created_at",
          "feature_columns",
          "target_column",
          "feature_importances",
          "top_features",
          "training_duration_seconds",
          "config"
        ],
        "title": "TwinModelDetailResponse",
        "description": "Detailed twin model information."
      },
      "TwinModelSummary": {
        "properties": {
          "model_id": {
            "type": "string",
            "title": "Model Id"
          },
          "model_name": {
            "type": "string",
            "title": "Model Name"
          },
          "twin_type": {
            "type": "string",
            "title": "Twin Type"
          },
          "brand": {
            "type": "string",
            "title": "Brand"
          },
          "algorithm": {
            "type": "string",
            "title": "Algorithm"
          },
          "r2_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "R2 Score"
          },
          "rmse": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rmse"
          },
          "training_samples": {
            "type": "integer",
            "title": "Training Samples"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "model_id",
          "model_name",
          "twin_type",
          "brand",
          "algorithm",
          "training_samples",
          "is_active",
          "created_at"
        ],
        "title": "TwinModelSummary",
        "description": "Summary of a twin generator model."
      },
      "TwinTypeEnum": {
        "type": "string",
        "enum": [
          "hcp",
          "patient",
          "territory"
        ],
        "title": "TwinTypeEnum",
        "description": "Types of digital twins."
      },
      "UpdateListResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total updates"
          },
          "proposed_count": {
            "type": "integer",
            "title": "Proposed Count",
            "description": "Pending approval"
          },
          "applied_count": {
            "type": "integer",
            "title": "Applied Count",
            "description": "Already applied"
          },
          "updates": {
            "items": {
              "$ref": "#/components/schemas/KnowledgeUpdate"
            },
            "type": "array",
            "title": "Updates",
            "description": "List of updates"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "proposed_count",
          "applied_count",
          "updates"
        ],
        "title": "UpdateListResponse",
        "description": "Response for listing knowledge updates."
      },
      "UpdateStatus": {
        "type": "string",
        "enum": [
          "proposed",
          "approved",
          "applied",
          "rolled_back"
        ],
        "title": "UpdateStatus",
        "description": "Status of knowledge updates."
      },
      "UpdateType": {
        "type": "string",
        "enum": [
          "prompt_refinement",
          "example_addition",
          "rule_modification",
          "parameter_tuning",
          "index_update"
        ],
        "title": "UpdateType",
        "description": "Types of knowledge updates."
      },
      "UpliftMetrics": {
        "properties": {
          "overall_auuc": {
            "type": "number",
            "title": "Overall Auuc",
            "description": "Area Under Uplift Curve (0-1)"
          },
          "overall_qini": {
            "type": "number",
            "title": "Overall Qini",
            "description": "Qini coefficient"
          },
          "targeting_efficiency": {
            "type": "number",
            "title": "Targeting Efficiency",
            "description": "How well model targets responders (0-1)"
          },
          "model_type_used": {
            "type": "string",
            "title": "Model Type Used",
            "description": "Model type (random_forest, gradient_boosting)"
          }
        },
        "type": "object",
        "required": [
          "overall_auuc",
          "overall_qini",
          "targeting_efficiency",
          "model_type_used"
        ],
        "title": "UpliftMetrics",
        "description": "Uplift modeling metrics."
      },
      "ValidateFidelityRequest": {
        "properties": {
          "simulation_id": {
            "type": "string",
            "title": "Simulation Id",
            "description": "Simulation ID to validate"
          },
          "experiment_id": {
            "type": "string",
            "title": "Experiment Id",
            "description": "Actual experiment ID"
          },
          "actual_ate": {
            "type": "number",
            "title": "Actual Ate",
            "description": "Actual Average Treatment Effect"
          },
          "actual_ci_lower": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Ci Lower",
            "description": "Actual CI lower bound"
          },
          "actual_ci_upper": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Ci Upper",
            "description": "Actual CI upper bound"
          },
          "actual_sample_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Sample Size",
            "description": "Actual sample size"
          },
          "validation_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validation Notes",
            "description": "Notes on validation"
          },
          "confounding_factors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Confounding Factors",
            "description": "Known confounding factors",
            "default": []
          },
          "validated_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validated By",
            "description": "Validator identifier"
          }
        },
        "type": "object",
        "required": [
          "simulation_id",
          "experiment_id",
          "actual_ate"
        ],
        "title": "ValidateFidelityRequest",
        "description": "Request to validate simulation against actual results.",
        "example": {
          "actual_ate": 0.072,
          "actual_ci_lower": 0.045,
          "actual_ci_upper": 0.099,
          "actual_sample_size": 5000,
          "experiment_id": "660e8400-e29b-41d4-a716-446655440000",
          "simulation_id": "550e8400-e29b-41d4-a716-446655440000"
        }
      },
      "ValidationErrorResponse": {
        "properties": {
          "error": {
            "type": "string",
            "title": "Error",
            "description": "Error class name (e.g. 'NotFoundError')"
          },
          "error_id": {
            "type": "string",
            "title": "Error Id",
            "description": "Short unique ID for support reference"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "Error category",
            "examples": [
              "validation",
              "authentication",
              "not_found",
              "internal",
              "agent_error"
            ]
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable error message"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "UTC timestamp of the error"
          },
          "suggested_action": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggested Action",
            "description": "Actionable guidance for resolving the error"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Validation details including schema_errors list"
          }
        },
        "type": "object",
        "required": [
          "error",
          "error_id",
          "category",
          "message",
          "timestamp"
        ],
        "title": "ValidationErrorResponse",
        "description": "Structured error returned when request validation fails (HTTP 422).",
        "example": {
          "category": "validation",
          "details": {
            "schema_errors": [
              {
                "field": "body.treatment_var",
                "message": "Field required",
                "type": "missing"
              }
            ]
          },
          "error": "SchemaValidationError",
          "error_id": "e5f6g7h8",
          "message": "Request validation failed",
          "suggested_action": "Review the schema errors and correct your request.",
          "timestamp": "2026-02-06T12:00:00Z"
        }
      },
      "WithdrawRequest": {
        "properties": {
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for withdrawal"
          }
        },
        "type": "object",
        "required": [
          "reason"
        ],
        "title": "WithdrawRequest",
        "description": "Request to withdraw a unit from an experiment.",
        "example": {
          "reason": "Subject requested withdrawal from study"
        }
      },
      "WorkflowSummaryResponse": {
        "properties": {
          "workflow_id": {
            "type": "string",
            "format": "uuid",
            "title": "Workflow Id"
          },
          "total_entries": {
            "type": "integer",
            "title": "Total Entries"
          },
          "first_entry_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "First Entry At"
          },
          "last_entry_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Entry At"
          },
          "agents_involved": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Agents Involved"
          },
          "tiers_involved": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Tiers Involved"
          },
          "chain_verified": {
            "type": "boolean",
            "title": "Chain Verified"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "total_duration_ms": {
            "type": "integer",
            "title": "Total Duration Ms",
            "default": 0
          },
          "avg_confidence_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Confidence Score"
          },
          "validation_passed_count": {
            "type": "integer",
            "title": "Validation Passed Count",
            "default": 0
          },
          "validation_failed_count": {
            "type": "integer",
            "title": "Validation Failed Count",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "workflow_id",
          "total_entries",
          "agents_involved",
          "tiers_involved",
          "chain_verified"
        ],
        "title": "WorkflowSummaryResponse",
        "description": "Response model for workflow summary."
      },
      "WorkstreamInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Workstream identifier"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Human-readable workstream name"
          },
          "kpi_count": {
            "type": "integer",
            "title": "Kpi Count",
            "description": "Number of KPIs in this workstream"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Workstream description"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "kpi_count"
        ],
        "title": "WorkstreamInfo",
        "description": "Information about a workstream.",
        "example": {
          "description": "Data quality and completeness metrics",
          "id": "ws1_data_quality",
          "kpi_count": 8,
          "name": "WS1 Data Quality"
        }
      },
      "WorkstreamListResponse": {
        "properties": {
          "workstreams": {
            "items": {
              "$ref": "#/components/schemas/WorkstreamInfo"
            },
            "type": "array",
            "title": "Workstreams",
            "description": "List of workstreams"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of workstreams"
          }
        },
        "type": "object",
        "required": [
          "total"
        ],
        "title": "WorkstreamListResponse",
        "description": "Response schema for listing workstreams.",
        "example": {
          "total": 6
        }
      },
      "src__api__routes__gaps__AnalysisStatus": {
        "type": "string",
        "enum": [
          "pending",
          "detecting",
          "calculating",
          "prioritizing",
          "completed",
          "failed"
        ],
        "title": "AnalysisStatus",
        "description": "Status of a gap analysis."
      },
      "src__api__routes__predictions__ModelHealthResponse": {
        "properties": {
          "model_name": {
            "type": "string",
            "title": "Model Name",
            "description": "Name of the model"
          },
          "status": {
            "type": "string",
            "pattern": "^(healthy|unhealthy|unknown)$",
            "title": "Status",
            "description": "Health status"
          },
          "endpoint": {
            "type": "string",
            "title": "Endpoint",
            "description": "Model endpoint URL"
          },
          "last_check": {
            "type": "string",
            "title": "Last Check",
            "description": "Last health check timestamp"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if unhealthy"
          }
        },
        "type": "object",
        "required": [
          "model_name",
          "status",
          "endpoint",
          "last_check"
        ],
        "title": "ModelHealthResponse",
        "description": "Response schema for model health check."
      },
      "src__api__routes__rag__GraphNode": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Node identifier"
          },
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Display label"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Node type (brand/kpi/region/agent)"
          },
          "properties": {
            "additionalProperties": true,
            "type": "object",
            "title": "Properties",
            "description": "Node properties"
          }
        },
        "type": "object",
        "required": [
          "id",
          "label",
          "type"
        ],
        "title": "GraphNode",
        "description": "Node in the causal graph."
      },
      "src__api__schemas__causal__AnalysisStatus": {
        "type": "string",
        "enum": [
          "pending",
          "running",
          "completed",
          "failed"
        ],
        "title": "AnalysisStatus",
        "description": "Analysis status."
      },
      "src__api__schemas__causal__QuestionType": {
        "type": "string",
        "enum": [
          "causal_effect",
          "effect_heterogeneity",
          "targeting",
          "system_dependencies",
          "comprehensive"
        ],
        "title": "QuestionType",
        "description": "Types of causal questions for routing."
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  },
  "tags": [
    {
      "name": "Root",
      "description": "Service discovery and API version information."
    },
    {
      "name": "Health",
      "description": "Liveness, readiness, and dependency health probes for orchestration."
    },
    {
      "name": "Agent Orchestration",
      "description": "Manage the 18-agent architecture: status, dispatch, and tier information."
    },
    {
      "name": "Analytics",
      "description": "Cross-agent analytics dashboards, trend summaries, and aggregated insights."
    },
    {
      "name": "Audit Chain",
      "description": "Immutable audit trail for every causal decision and agent action."
    },
    {
      "name": "Causal Inference",
      "description": "Multi-library causal analysis: hierarchical CATE, cross-validation, and pipelines across DoWhy, EconML, CausalML, and NetworkX."
    },
    {
      "name": "Cognitive Workflow",
      "description": "Multi-step cognitive workflows combining causal reasoning with domain knowledge."
    },
    {
      "name": "copilotkit",
      "description": "CopilotKit AI chat integration for conversational analytics."
    },
    {
      "name": "Digital Twin",
      "description": "Patient and HCP digital-twin pre-screening simulations."
    },
    {
      "name": "A/B Testing",
      "description": "Experiment design, execution, and Bayesian analysis for A/B and multi-arm tests."
    },
    {
      "name": "Model Interpretability",
      "description": "SHAP, LIME, and counterfactual explanations for ML model predictions."
    },
    {
      "name": "Feedback Learning",
      "description": "Capture user feedback, compute reward signals, and trigger model retraining."
    },
    {
      "name": "Gap Analysis",
      "description": "Identify care gaps, ROI opportunities, and unmet-need hotspots."
    },
    {
      "name": "Knowledge Graph",
      "description": "FalkorDB-backed knowledge graph: nodes, relationships, causal chains, and openCypher queries."
    },
    {
      "name": "Health Score",
      "description": "Composite health scores for brands, territories, and HCPs."
    },
    {
      "name": "Memory System",
      "description": "Tri-memory (episodic, semantic, procedural) read/write operations."
    },
    {
      "name": "Metrics",
      "description": "Prometheus-compatible `/metrics` endpoint for platform observability."
    },
    {
      "name": "Model Monitoring",
      "description": "Data-drift detection, model performance tracking, and alerting."
    },
    {
      "name": "Hybrid RAG",
      "description": "Retrieval-augmented generation combining vector search with knowledge-graph context."
    },
    {
      "name": "Resource Optimization",
      "description": "Optimal resource allocation across territories, brands, and channels."
    },
    {
      "name": "Segment Analysis",
      "description": "Heterogeneous treatment effect segmentation and targeting optimization."
    },
    {
      "name": "KPIs",
      "description": "Causal KPI calculation, caching, and threshold monitoring across workstreams."
    },
    {
      "name": "Model Predictions",
      "description": "Churn, conversion, and custom model inference via BentoML serving layer."
    }
  ],
  "servers": [
    {
      "url": "https://eznomics.site",
      "description": "Production"
    },
    {
      "url": "http://localhost:8000",
      "description": "Local development"
    }
  ],
  "x-tagGroups": [
    {
      "name": "Core Analytics",
      "tags": [
        "Causal Inference",
        "KPIs",
        "Model Predictions",
        "Model Interpretability",
        "Analytics"
      ]
    },
    {
      "name": "ML Operations",
      "tags": [
        "A/B Testing",
        "Model Monitoring",
        "Feedback Learning"
      ]
    },
    {
      "name": "Intelligence",
      "tags": [
        "Knowledge Graph",
        "Hybrid RAG",
        "Memory System",
        "Cognitive Workflow",
        "Digital Twin",
        "Gap Analysis",
        "Health Score",
        "Segment Analysis",
        "Resource Optimization"
      ]
    },
    {
      "name": "Platform",
      "tags": [
        "copilotkit",
        "Agent Orchestration",
        "Audit Chain"
      ]
    },
    {
      "name": "Operations",
      "tags": [
        "Root",
        "Health",
        "Metrics"
      ]
    }
  ]
}