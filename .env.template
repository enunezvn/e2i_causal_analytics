# E2I Causal Analytics - Environment Configuration Template
# Copy this file to .env.dev (local) or .env.prod (production) and fill in actual values
# NEVER commit .env.dev or .env.prod to version control

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_ENV=development
APP_NAME=E2I Causal Analytics
APP_VERSION=1.0.0
DEBUG=true
LOG_LEVEL=DEBUG

# ============================================================================
# DATABASE CONFIGURATION (SUPABASE)
# ============================================================================
# Full PostgreSQL connection string
DATABASE_URL=postgresql://postgres.xxxxx:password@aws-0-us-west-1.pooler.supabase.com:6543/postgres

# Supabase-specific settings
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx

# Database pool settings (optional, for optimization)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ============================================================================
# CLAUDE API CONFIGURATION
# ============================================================================
CLAUDE_API_KEY=sk-ant-api03-xxxxx
CLAUDE_MODEL=claude-3-5-sonnet-20241022
CLAUDE_MAX_TOKENS=4096
CLAUDE_TEMPERATURE=0.7

# ============================================================================
# MLFLOW CONFIGURATION
# ============================================================================
# MLflow tracking server URL (internal Docker network)
MLFLOW_TRACKING_URI=http://mlflow:5000

# Artifact storage (local for dev, DO Spaces for prod)
MLFLOW_ARTIFACT_ROOT=./mlflow-artifacts

# MLflow experiment name
MLFLOW_EXPERIMENT_NAME=e2i-causal-analytics

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://:devpassword@redis:6379/0
REDIS_PASSWORD=devpassword

# Redis cache settings
REDIS_CACHE_TTL=3600
REDIS_MAX_CONNECTIONS=50

# ============================================================================
# SECURITY SETTINGS
# ============================================================================
# Secret key for JWT token generation (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here-generate-with-openssl-rand-hex-32
JWT_SECRET_KEY=your-jwt-secret-key-here-generate-with-openssl-rand-hex-32
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Development: Allow localhost origins
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000

# Production: Set to your actual domain
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
# API URL for React app
REACT_APP_API_URL=http://localhost:8000
REACT_APP_MLFLOW_URL=http://localhost:5000

# ============================================================================
# DIGITAL OCEAN SPACES (PRODUCTION ONLY)
# ============================================================================
# S3-compatible object storage for MLflow artifacts
DO_SPACES_KEY=your-do-spaces-access-key
DO_SPACES_SECRET=your-do-spaces-secret-key
DO_SPACES_ENDPOINT=nyc3.digitaloceanspaces.com
DO_SPACES_BUCKET=e2i-mlflow-artifacts
DO_SPACES_REGION=nyc3

# ============================================================================
# AGENT CONFIGURATION
# ============================================================================
# Agent worker settings
AGENT_WORKER_CONCURRENCY=4
AGENT_WORKER_MAX_RETRIES=3
AGENT_WORKER_RETRY_DELAY=5

# Agent timeouts (seconds)
AGENT_TIMEOUT_DEFAULT=300
AGENT_TIMEOUT_CAUSAL=600
AGENT_TIMEOUT_ML=900

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# Log settings
LOG_FORMAT=json
LOG_FILE=/var/log/e2i/app.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# MONITORING & ALERTING (OPTIONAL)
# ============================================================================
# Slack webhook for notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxxxx

# Email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
ALERT_EMAIL_TO=alerts@yourcompany.com

# ============================================================================
# FEATURE FLAGS (OPTIONAL)
# ============================================================================
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_DETAILED_LOGGING=false
ENABLE_PERFORMANCE_PROFILING=false

# ============================================================================
# CAUSAL ENGINE SETTINGS
# ============================================================================
# DoWhy/EconML configuration
CAUSAL_MIN_SAMPLES=100
CAUSAL_CONFIDENCE_LEVEL=0.95
CAUSAL_MAX_ITERATIONS=1000

# ============================================================================
# RAG CONFIGURATION
# ============================================================================
# Vector database settings (if using separate vector DB)
VECTOR_DB_TYPE=pgvector
VECTOR_DIMENSION=1536
VECTOR_SIMILARITY_THRESHOLD=0.7

# RAG retrieval settings
RAG_TOP_K=5
RAG_RERANK_ENABLED=true
RAG_HYBRID_SEARCH=true

# ============================================================================
# DEVELOPMENT TOOLS (DEV ONLY)
# ============================================================================
# Enable development tools
ENABLE_SWAGGER_UI=true
ENABLE_REDOC=true
ENABLE_PROFILER=false

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
# API worker settings (production)
UVICORN_WORKERS=4
UVICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
UVICORN_TIMEOUT_KEEP_ALIVE=5

# Connection pool settings
API_MAX_CONCURRENT_REQUESTS=100
API_REQUEST_TIMEOUT=60

# ============================================================================
# BRAND-SPECIFIC SETTINGS (E2I)
# ============================================================================
# Supported brands
SUPPORTED_BRANDS=remibrutinib,fabhalta,kisqali

# Default brand for analysis
DEFAULT_BRAND=remibrutinib

# ============================================================================
# BACKUP CONFIGURATION (PRODUCTION)
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=s3://e2i-backups/

# ============================================================================
# DOCKER-SPECIFIC SETTINGS
# ============================================================================
# Set to production for optimized builds
NODE_ENV=development
PYTHONUNBUFFERED=1
