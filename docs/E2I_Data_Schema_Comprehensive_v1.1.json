{
  "schema_version": "1.1",
  "created_date": "2025-12-13",
  "last_updated": "2025-12-13",
  "purpose": "Comprehensive Data Schema for E2I Causal Analytics Dashboard",
  "total_tables": 28,
  "total_records_expected": 1500000,
  
  "version_history": {
    "1.1": {
      "date": "2025-12-13",
      "changes": [
        "Added causal_validations entity for DoWhy refutation tests",
        "Added expert_reviews entity for DAG approval tracking",
        "Updated agent_activity to 18-agent architecture",
        "Added 4 validation ENUMs: refutation_test_type, validation_status, gate_decision, expert_review_type",
        "Added validation_thresholds configuration",
        "Table count: 26 â†’ 28"
      ]
    },
    "1.0": {
      "date": "2025-11-14",
      "changes": ["Initial schema with 7 core entities"]
    }
  },
  
  "core_entities": {
    
    "patient_journey": {
      "description": "Core patient journey data tracking healthcare interactions",
      "primary_key": "patient_journey_id",
      "fields": {
        "patient_journey_id": "string",
        "patient_id": "string",
        "patient_hash": "string",
        "journey_start_date": "date",
        "journey_end_date": "date",
        "journey_duration_days": "integer",
        "journey_stage": "string",
        "journey_status": "string",
        "primary_diagnosis_code": "string",
        "primary_diagnosis_desc": "string",
        "secondary_diagnosis_codes": "array<string>",
        "age_group": "string",
        "gender": "string",
        "geographic_region": "enum[northeast, south, midwest, west]",
        "state": "string",
        "zip_code": "string",
        "insurance_type": "string",
        "insurance_coverage_flag": "boolean",
        "ethnicity": "string",
        "socioeconomic_index": "float",
        "comorbidity_count": "integer",
        "comorbidities": "array<string>",
        "risk_score": "float",
        "journey_complexity_score": "float",
        "data_source": "enum[IQVIA_APLD, IQVIA_LAAD, HealthVerity, Komodo, Veeva]",
        "data_ingestion_timestamp": "timestamp",
        "data_lag_days": "integer",
        "data_quality_score": "float",
        "data_split": "enum[train, validation, test, holdout, unassigned]"
      }
    },
    
    "hcp_profile": {
      "description": "Healthcare Professional master data",
      "primary_key": "hcp_id",
      "fields": {
        "hcp_id": "string",
        "npi": "string",
        "first_name": "string",
        "last_name": "string",
        "specialty": "string",
        "sub_specialty": "string",
        "practice_type": "string",
        "practice_size": "string",
        "geographic_region": "enum[northeast, south, midwest, west]",
        "state": "string",
        "city": "string",
        "zip_code": "string",
        "priority_tier": "enum[1, 2, 3, 4, 5]",
        "decile": "integer",
        "total_patient_volume": "integer",
        "target_patient_volume": "integer",
        "prescribing_volume": "integer",
        "years_experience": "integer",
        "affiliation_primary": "string",
        "affiliation_secondary": "array<string>",
        "digital_engagement_score": "float",
        "preferred_channel": "string",
        "last_interaction_date": "date",
        "interaction_frequency": "float",
        "influence_network_size": "integer",
        "peer_influence_score": "float",
        "adoption_category": "enum[early_adopter, mainstream, late_adopter]",
        "coverage_status": "boolean",
        "territory_id": "string",
        "sales_rep_id": "string"
      }
    },
    
    "treatment_event": {
      "description": "Individual treatment events within patient journeys",
      "primary_key": "treatment_event_id",
      "fields": {
        "treatment_event_id": "string",
        "patient_journey_id": "string",
        "patient_id": "string",
        "hcp_id": "string",
        "event_date": "date",
        "event_type": "enum[diagnosis, prescription, lab_test, procedure, consultation, hospitalization]",
        "event_subtype": "string",
        "brand": "enum[Remibrutinib, Fabhalta, Kisqali, competitor, other]",
        "drug_ndc": "string",
        "drug_name": "string",
        "drug_class": "string",
        "dosage": "string",
        "duration_days": "integer",
        "icd_codes": "array<string>",
        "cpt_codes": "array<string>",
        "loinc_codes": "array<string>",
        "lab_values": "json",
        "location_type": "string",
        "facility_id": "string",
        "cost": "float",
        "outcome_indicator": "string",
        "adverse_event_flag": "boolean",
        "discontinuation_flag": "boolean",
        "discontinuation_reason": "string",
        "sequence_number": "integer",
        "days_from_diagnosis": "integer",
        "previous_treatment": "string",
        "next_treatment": "string",
        "data_split": "enum[train, validation, test, holdout, unassigned]"
      }
    },
    
    "ml_model_output": {
      "description": "Machine Learning model predictions and scores",
      "primary_key": "prediction_id",
      "fields": {
        "prediction_id": "string",
        "model_version": "string",
        "model_type": "string",
        "prediction_timestamp": "timestamp",
        "patient_id": "string",
        "hcp_id": "string",
        "prediction_type": "enum[trigger, propensity, risk, churn, next_best_action]",
        "prediction_value": "float",
        "prediction_class": "string",
        "confidence_score": "float",
        "probability_scores": "json",
        "feature_importance": "json",
        "shap_values": "json",
        "top_features": "array<json>",
        "model_auc": "float",
        "model_precision": "float",
        "model_recall": "float",
        "calibration_score": "float",
        "fairness_metrics": "json",
        "explanation_text": "string",
        "treatment_effect_estimate": "float",
        "heterogeneous_effect": "float",
        "segment_assignment": "string",
        "causal_confidence": "float",
        "counterfactual_outcome": "float",
        "data_split": "enum[train, validation, test, holdout, unassigned]"
      }
    },
    
    "trigger_event": {
      "description": "HCP engagement triggers generated by the system",
      "primary_key": "trigger_id",
      "fields": {
        "trigger_id": "string",
        "trigger_timestamp": "timestamp",
        "hcp_id": "string",
        "patient_id": "string",
        "trigger_type": "enum[alert, recommendation, insight, next_best_action]",
        "trigger_category": "string",
        "trigger_priority": "enum[critical, high, medium, low]",
        "trigger_content": "json",
        "trigger_reason": "string",
        "lead_time_days": "integer",
        "expiration_date": "date",
        "precision_score": "float",
        "expected_impact": "float",
        "causal_chain": "json",
        "supporting_evidence": "json",
        "recommended_action": "string",
        "channel": "enum[email, app, crm, phone, in_person]",
        "delivery_status": "enum[pending, delivered, viewed, accepted, rejected, expired]",
        "delivery_timestamp": "timestamp",
        "acceptance_flag": "boolean",
        "acceptance_timestamp": "timestamp",
        "action_taken_flag": "boolean",
        "action_timestamp": "timestamp",
        "action_type": "string",
        "action_outcome": "string",
        "false_positive_flag": "boolean",
        "feedback_score": "integer",
        "feedback_text": "string",
        "data_split": "enum[train, validation, test, holdout, unassigned]"
      }
    },
    
    "agent_activity": {
      "description": "AI Agent processing and decision logs (V4: 18-agent architecture)",
      "primary_key": "activity_id",
      "fields": {
        "activity_id": "string",
        "agent_name": "enum[scope_definer, data_preparer, model_selector, model_trainer, feature_analyzer, model_deployer, observability_connector, orchestrator, causal_impact, gap_analyzer, heterogeneous_optimizer, drift_monitor, experiment_designer, health_score, prediction_synthesizer, resource_optimizer, explainer, feedback_learner]",
        "agent_tier": "enum[ml_foundation, coordination, causal_analytics, monitoring, ml_predictions, self_improvement]",
        "activity_timestamp": "timestamp",
        "activity_type": "enum[analysis, recommendation, action, alert, experiment, validation]",
        "workstream": "enum[WS1, WS2, WS3]",
        "processing_duration_ms": "integer",
        "input_data": "json",
        "analysis_results": "json",
        "causal_paths_analyzed": "integer",
        "confidence_level": "float",
        "recommendations": "array<json>",
        "actions_initiated": "array<json>",
        "impact_estimate": "float",
        "roi_estimate": "float",
        "status": "enum[completed, failed, pending]",
        "error_message": "string",
        "resource_usage": "json",
        "data_split": "enum[train, validation, test, holdout, unassigned]"
      }
    },
    
    "business_metrics": {
      "description": "Business impact and value metrics",
      "primary_key": "metric_id",
      "fields": {
        "metric_id": "string",
        "metric_date": "date",
        "metric_type": "enum[revenue, cost, efficiency, adoption, engagement]",
        "metric_name": "string",
        "brand": "enum[Remibrutinib, Fabhalta, Kisqali, all]",
        "region": "enum[northeast, south, midwest, west, national]",
        "metric_value": "float",
        "baseline_value": "float",
        "target_value": "float",
        "uplift_absolute": "float",
        "uplift_percentage": "float",
        "roi": "float",
        "attribution_method": "string",
        "confidence_interval_lower": "float",
        "confidence_interval_upper": "float",
        "statistical_significance": "float",
        "causal_contribution": "json",
        "time_to_impact_days": "integer",
        "data_split": "enum[train, validation, test, holdout, unassigned]"
      }
    }
  },
  
  "causal_validation_entities": {
    "_comment": "V1.1 NEW: Causal validation infrastructure for DoWhy refutation tests",
    
    "causal_validations": {
      "description": "DoWhy refutation test results for validating causal estimates",
      "primary_key": "validation_id",
      "introduced_version": "1.1",
      "integration_point": "Causal Impact agent Node 3 (Refutation)",
      "fields": {
        "validation_id": "uuid",
        "estimate_id": "uuid",
        "estimate_source": "enum[causal_paths, ml_experiments]",
        "test_type": "enum[placebo_treatment, random_common_cause, data_subset, bootstrap, sensitivity_e_value]",
        "status": "enum[passed, failed, warning, skipped]",
        "original_effect": "decimal(12,6)",
        "refuted_effect": "decimal(12,6)",
        "p_value": "decimal(6,5)",
        "delta_percent": "decimal(8,4)",
        "confidence_score": "decimal(4,3)",
        "gate_decision": "enum[proceed, review, block]",
        "test_config": "json",
        "details_json": "json",
        "agent_activity_id": "uuid",
        "brand": "string",
        "analysis_context": "text",
        "treatment_variable": "string",
        "outcome_variable": "string",
        "data_split": "enum[train, validation, test, holdout, unassigned]",
        "created_at": "timestamp",
        "updated_at": "timestamp"
      },
      "foreign_keys": {
        "agent_activity_id": "agent_activities.activity_id"
      },
      "indexes": [
        "estimate_id",
        "status",
        "gate_decision",
        "test_type",
        "created_at DESC",
        "brand",
        "treatment_variable",
        ["estimate_id", "gate_decision"],
        ["estimate_id", "estimate_source"]
      ]
    },
    
    "expert_reviews": {
      "description": "Domain expert validation of causal DAGs and methodology",
      "primary_key": "review_id",
      "introduced_version": "1.1",
      "integration_point": "GraphBuilder node expert check",
      "fields": {
        "review_id": "uuid",
        "review_type": "enum[dag_approval, methodology_review, quarterly_audit, ad_hoc_validation]",
        "dag_version_hash": "string(64)",
        "reviewer_id": "string",
        "reviewer_name": "string",
        "reviewer_role": "string",
        "reviewer_email": "string",
        "approval_status": "enum[pending, approved, rejected, expired]",
        "checklist_json": "json",
        "comments_json": "json",
        "concerns_raised": "array<string>",
        "conditions": "text",
        "brand": "string",
        "analysis_context": "text",
        "treatment_variable": "string",
        "outcome_variable": "string",
        "valid_from": "date",
        "valid_until": "date",
        "created_at": "timestamp",
        "updated_at": "timestamp",
        "approved_at": "timestamp",
        "related_validation_ids": "array<uuid>",
        "supersedes_review_id": "uuid"
      },
      "indexes": [
        "dag_version_hash",
        "approval_status",
        "reviewer_id",
        "review_type",
        "brand",
        "valid_until",
        "treatment_variable"
      ]
    }
  },
  
  "causal_validation_views": {
    "_comment": "V1.1 NEW: Views for validation queries",
    
    "v_validation_summary": {
      "description": "Aggregated validation results per causal estimate with final gate decision",
      "columns": [
        "estimate_id",
        "estimate_source",
        "brand",
        "treatment_variable",
        "outcome_variable",
        "total_tests",
        "passed_count",
        "failed_count",
        "warning_count",
        "skipped_count",
        "avg_confidence",
        "min_confidence",
        "max_confidence",
        "final_gate",
        "last_validation_at",
        "first_validation_at",
        "failed_tests"
      ]
    },
    
    "v_active_expert_approvals": {
      "description": "Currently active expert approvals with expiration tracking",
      "columns": [
        "review_id",
        "review_type",
        "dag_version_hash",
        "reviewer_id",
        "reviewer_name",
        "reviewer_role",
        "brand",
        "treatment_variable",
        "outcome_variable",
        "analysis_context",
        "approved_at",
        "valid_until",
        "validity_status",
        "days_until_expiry",
        "checklist_json",
        "conditions"
      ]
    },
    
    "v_blocked_estimates": {
      "description": "Causal estimates that failed validation and should not be used",
      "columns": [
        "estimate_id",
        "estimate_source",
        "brand",
        "treatment_variable",
        "outcome_variable",
        "analysis_context",
        "failed_tests",
        "min_confidence",
        "blocked_at",
        "failed_test_count"
      ]
    },
    
    "v_pending_expert_reviews": {
      "description": "Expert reviews awaiting approval, ordered by age",
      "columns": [
        "review_id",
        "review_type",
        "dag_version_hash",
        "brand",
        "treatment_variable",
        "outcome_variable",
        "analysis_context",
        "created_at",
        "days_pending"
      ]
    }
  },
  
  "causal_validation_functions": {
    "_comment": "V1.1 NEW: Utility functions for validation logic",
    
    "is_dag_approved": {
      "description": "Check if a DAG (by hash) has an active expert approval",
      "parameters": ["p_dag_hash VARCHAR(64)", "p_brand VARCHAR(50) DEFAULT NULL"],
      "returns": "BOOLEAN"
    },
    
    "get_validation_gate": {
      "description": "Get the aggregate gate decision for a causal estimate",
      "parameters": ["p_estimate_id UUID"],
      "returns": "gate_decision"
    },
    
    "get_validation_confidence": {
      "description": "Get the average validation confidence for a causal estimate",
      "parameters": ["p_estimate_id UUID"],
      "returns": "DECIMAL(4,3)"
    },
    
    "can_use_estimate": {
      "description": "Check if a causal estimate can be used (combines gate + expert approval)",
      "parameters": ["p_estimate_id UUID", "p_dag_hash VARCHAR(64) DEFAULT NULL"],
      "returns": "BOOLEAN"
    }
  },
  
  "operational_metrics": {
    
    "data_quality_metrics": {
      "description": "WS1 Data Quality KPIs",
      "fields": {
        "measurement_date": "date",
        "patient_coverage_percentage": "float",
        "hcp_coverage_percentage": "float",
        "geographic_consistency_gap": "float",
        "data_lag_median_days": "integer",
        "freshness_score": "float",
        "completeness_score": "float",
        "validity_score": "float",
        "cross_source_match_rate": "float"
      }
    },
    
    "model_performance_metrics": {
      "description": "WS1 Model Performance KPIs",
      "fields": {
        "measurement_date": "date",
        "model_version": "string",
        "auc_score": "float",
        "precision_at_top_decile": "float",
        "recall_at_top_decile": "float",
        "calibration_error": "float",
        "psi_score": "float",
        "drift_indicator": "string",
        "feature_drift_flags": "json"
      }
    },
    
    "trigger_performance_metrics": {
      "description": "WS2 Trigger Performance KPIs",
      "fields": {
        "measurement_date": "date",
        "triggers_generated": "integer",
        "precision_score": "float",
        "acceptance_rate": "float",
        "action_rate": "float",
        "lift_over_baseline": "float",
        "avg_lead_time_days": "float",
        "false_positive_rate": "float"
      }
    },
    
    "business_impact_metrics": {
      "description": "WS3 Business Impact KPIs",
      "fields": {
        "measurement_date": "date",
        "incremental_scripts": "integer",
        "incremental_revenue": "float",
        "cost_per_trigger": "float",
        "roi": "float",
        "causal_attribution_confidence": "float",
        "time_to_impact_days": "integer"
      }
    }
  },
  
  "brand_specific_metrics": {
    
    "remibrutinib_metrics": {
      "description": "Remibrutinib-specific KPIs",
      "fields": {
        "measurement_date": "date",
        "ah_uncontrolled_patients_identified_pct": "float",
        "csu_patients_on_therapy_pct": "float",
        "intent_to_prescribe_delta_pp": "float",
        "prescription_conversion_rate": "float",
        "therapy_persistence_days": "integer",
        "discontinuation_rate": "float",
        "patient_satisfaction_score": "float",
        "hcp_education_completion_rate": "float",
        "competitive_share": "float"
      }
    },
    
    "fabhalta_metrics": {
      "description": "Fabhalta-specific KPIs",
      "fields": {
        "measurement_date": "date",
        "suspected_pnh_patients_tested_pct": "float",
        "flow_cytometry_completion_rate": "float",
        "diagnosis_to_treatment_days": "integer",
        "specialist_referral_rate": "float",
        "treatment_initiation_rate": "float",
        "complement_inhibitor_naive_pct": "float",
        "switching_rate_from_competitor": "float"
      }
    },
    
    "kisqali_metrics": {
      "description": "Kisqali-specific KPIs",
      "fields": {
        "measurement_date": "date",
        "priority_oncologists_reached_pct": "float",
        "oncotype_dx_guided_adoption_pp": "float",
        "hr_positive_her2_negative_coverage": "float",
        "combination_therapy_rate": "float",
        "progression_free_survival_months": "float",
        "quality_of_life_score": "float",
        "clinical_trial_enrollment_rate": "float"
      }
    }
  },
  
  "causal_analysis_data": {
    
    "causal_paths": {
      "description": "Identified causal relationships and chains",
      "fields": {
        "path_id": "string",
        "discovery_date": "date",
        "causal_chain": "array<json>",
        "start_node": "string",
        "end_node": "string",
        "intermediate_nodes": "array<string>",
        "path_length": "integer",
        "causal_effect_size": "float",
        "confidence_level": "float",
        "method_used": "string",
        "confounders_controlled": "array<string>",
        "mediators_identified": "array<string>",
        "interaction_effects": "json",
        "time_lag_days": "integer",
        "validation_status": "string",
        "business_impact_estimate": "float",
        "validation_gate": "enum[proceed, review, block]",
        "validation_confidence": "float",
        "data_split": "enum[train, validation, test, holdout, unassigned]"
      }
    },
    
    "treatment_effects": {
      "description": "Heterogeneous treatment effects by segment",
      "fields": {
        "effect_id": "string",
        "analysis_date": "date",
        "treatment": "string",
        "outcome": "string",
        "segment": "string",
        "ate": "float",
        "cate": "float",
        "confidence_interval": "json",
        "sample_size": "integer",
        "covariate_balance": "json",
        "propensity_overlap": "float",
        "method": "enum[causal_forest, double_ml, meta_learner, bart]",
        "feature_importance": "json",
        "validation_gate": "enum[proceed, review, block]",
        "data_split": "enum[train, validation, test, holdout, unassigned]"
      }
    },
    
    "experiments": {
      "description": "A/B tests and causal experiments",
      "fields": {
        "experiment_id": "string",
        "start_date": "date",
        "end_date": "date",
        "hypothesis": "string",
        "treatment_groups": "array<json>",
        "randomization_method": "string",
        "sample_size_per_group": "json",
        "primary_outcome": "string",
        "secondary_outcomes": "array<string>",
        "results": "json",
        "statistical_power": "float",
        "p_value": "float",
        "effect_size": "float",
        "decision": "string",
        "rollout_recommendation": "string"
      }
    }
  },
  
  "system_configuration": {
    
    "filter_parameters": {
      "date_range": {
        "start_date": "2025-09-01",
        "end_date": "2025-12-13"
      },
      "brands": ["all", "Remibrutinib", "Fabhalta", "Kisqali"],
      "regions": ["all", "northeast", "south", "midwest", "west"],
      "refresh_interval_seconds": 300
    },
    
    "thresholds": {
      "psi_alert_threshold": 0.25,
      "psi_warning_threshold": 0.18,
      "model_performance_min_auc": 0.75,
      "precision_target": 0.45,
      "acceptance_rate_target": 0.75,
      "fairness_gap_max": 0.15,
      "data_lag_max_days": 14,
      "coverage_min_percentage": 0.80
    },
    
    "validation_thresholds": {
      "_comment": "V1.1 NEW: Causal validation pass criteria",
      "placebo_treatment": {
        "max_effect_retention": 0.10,
        "p_value_threshold": 0.05
      },
      "random_common_cause": {
        "max_delta_percent": 15.0
      },
      "data_subset": {
        "max_variance": 0.20,
        "min_subsets": 5
      },
      "bootstrap": {
        "ci_coverage": 0.95,
        "max_cv": 0.30
      },
      "sensitivity_e_value": {
        "min_e_value": 1.5
      },
      "gate_thresholds": {
        "proceed_min_confidence": 0.70,
        "block_max_confidence": 0.40,
        "required_tests": ["placebo_treatment", "random_common_cause"]
      }
    },
    
    "agent_configuration": {
      "_comment": "V1.1: Updated to 18-agent 6-tier architecture",
      
      "tier_0_ml_foundation": {
        "scope_definer": {
          "sla_seconds": 5,
          "outputs": ["ScopeSpec", "SuccessCriteria", "BaselineExpectations"]
        },
        "data_preparer": {
          "sla_seconds": 60,
          "outputs": ["QCReport", "BaselineMetrics", "DataReadiness"]
        },
        "model_selector": {
          "sla_seconds": 120,
          "outputs": ["ModelComparison", "SelectionRationale", "RecommendedModel"]
        },
        "model_trainer": {
          "sla_seconds": null,
          "outputs": ["TrainedModel", "ValidationMetrics", "TrainingMetadata"]
        },
        "feature_analyzer": {
          "type": "hybrid",
          "sla_seconds": 120,
          "outputs": ["SHAPAnalysis", "FeatureImpacts", "InterpretabilityReport"]
        },
        "model_deployer": {
          "sla_seconds": 30,
          "outputs": ["DeploymentManifest", "VersionRecord", "RollbackPlan"]
        },
        "observability_connector": {
          "sla_seconds": 0.1,
          "outputs": ["ObservabilityContext", "QualityMetrics", "LatencySummary"]
        }
      },
      
      "tier_1_coordination": {
        "orchestrator_agent": {
          "analysis_frequency_minutes": 60,
          "synthesis_lookback_hours": 24,
          "confidence_threshold": 0.85,
          "sla_seconds": 2
        }
      },
      
      "tier_2_causal_analytics": {
        "causal_impact_agent": {
          "type": "hybrid",
          "min_paths_to_analyze": 100,
          "max_chain_length": 5,
          "effect_size_threshold": 0.05,
          "sla_seconds": 30,
          "workflow_nodes": ["GraphBuilder", "Estimation", "Refutation", "Sensitivity", "Interpretation"],
          "validation_enabled": true,
          "outputs": ["CausalChain", "TreatmentEffect", "CounterfactualOutcome", "ValidationSuite", "GateDecision"]
        },
        "gap_analyzer_agent": {
          "roi_calculation_method": "conservative",
          "effort_scoring_model": "fibonacci",
          "priority_threshold": 2.0,
          "sla_seconds": 15
        },
        "heterogeneous_optimizer_agent": {
          "min_segment_size": 100,
          "max_segments": 10,
          "optimization_metric": "cate",
          "sla_seconds": 20
        }
      },
      
      "tier_3_monitoring": {
        "drift_monitor_agent": {
          "forecast_horizon_days": 14,
          "confidence_level": 0.92,
          "detection_methods": ["psi", "ks_test", "chi_square", "jensen_shannon"],
          "sla_seconds": 10
        },
        "experiment_designer_agent": {
          "type": "hybrid",
          "min_sample_size": 1000,
          "statistical_power_target": 0.80,
          "alpha": 0.05,
          "sla_seconds": 30
        },
        "health_score_agent": {
          "sla_seconds": 5,
          "outputs": ["HealthScore", "ComponentStatus", "ParetoAnalysis"]
        }
      },
      
      "tier_4_ml_predictions": {
        "prediction_synthesizer_agent": {
          "ensemble_methods": ["voting", "stacking", "bayesian"],
          "confidence_aggregation": "weighted_average",
          "sla_seconds": 10
        },
        "resource_optimizer_agent": {
          "optimization_method": "linear_programming",
          "sla_seconds": 15,
          "outputs": ["AllocationPlan", "BudgetOptimization", "CapacityAnalysis"]
        }
      },
      
      "tier_5_self_improvement": {
        "explainer_agent": {
          "type": "deep",
          "sla_seconds": 60,
          "outputs": ["Narrative", "VisualizationExplanation", "CausalStory"]
        },
        "feedback_learner_agent": {
          "type": "deep",
          "sla_seconds": 120,
          "outputs": ["LearningSignal", "PromptOptimization", "PatternDiscovery"]
        }
      }
    }
  },
  
  "data_sources": {
    "primary_sources": [
      {
        "name": "IQVIA_APLD",
        "type": "claims",
        "coverage_percentage": 82,
        "update_frequency": "weekly",
        "lag_days": 12
      },
      {
        "name": "IQVIA_LAAD",
        "type": "claims",
        "coverage_percentage": 78,
        "update_frequency": "weekly",
        "lag_days": 14
      },
      {
        "name": "HealthVerity",
        "type": "lab_emr",
        "coverage_percentage": 65,
        "update_frequency": "daily",
        "lag_days": 7
      },
      {
        "name": "Komodo",
        "type": "integrated",
        "coverage_percentage": 70,
        "update_frequency": "weekly",
        "lag_days": 10
      },
      {
        "name": "Veeva",
        "type": "crm",
        "coverage_percentage": 95,
        "update_frequency": "real_time",
        "lag_days": 0
      }
    ]
  },
  
  "enum_definitions": {
    "_comment": "V1.1: Complete ENUM reference",
    
    "core_enums": {
      "brand_type": ["Remibrutinib", "Fabhalta", "Kisqali", "competitor", "other"],
      "region_type": ["northeast", "south", "midwest", "west"],
      "data_split_type": ["train", "validation", "test", "holdout", "unassigned"],
      "priority_type": ["critical", "high", "medium", "low"],
      "event_type": ["diagnosis", "prescription", "lab_test", "procedure", "consultation", "hospitalization"],
      "prediction_type": ["trigger", "propensity", "risk", "churn", "next_best_action"],
      "workstream_type": ["WS1", "WS2", "WS3"]
    },
    
    "agent_enums": {
      "agent_name_type": [
        "scope_definer", "data_preparer", "model_selector", "model_trainer",
        "feature_analyzer", "model_deployer", "observability_connector",
        "orchestrator", "causal_impact", "gap_analyzer", "heterogeneous_optimizer",
        "drift_monitor", "experiment_designer", "health_score",
        "prediction_synthesizer", "resource_optimizer", "explainer", "feedback_learner"
      ],
      "agent_tier_type": [
        "ml_foundation", "coordination", "causal_analytics",
        "monitoring", "ml_predictions", "self_improvement"
      ]
    },
    
    "ml_enums": {
      "model_stage_type": ["development", "staging", "shadow", "production", "archived", "deprecated"],
      "dq_status_type": ["passed", "failed", "warning", "skipped"],
      "deployment_status_type": ["pending", "deploying", "active", "draining", "rolled_back", "failed"]
    },
    
    "validation_enums": {
      "_comment": "V1.1 NEW",
      "refutation_test_type": ["placebo_treatment", "random_common_cause", "data_subset", "bootstrap", "sensitivity_e_value"],
      "validation_status": ["passed", "failed", "warning", "skipped"],
      "gate_decision": ["proceed", "review", "block"],
      "expert_review_type": ["dag_approval", "methodology_review", "quarterly_audit", "ad_hoc_validation"]
    }
  },
  
  "indexing_strategy": {
    "primary_indexes": [
      "patient_id",
      "hcp_id",
      "trigger_id",
      "prediction_id",
      "validation_id",
      "review_id"
    ],
    "composite_indexes": [
      ["patient_id", "event_date"],
      ["hcp_id", "trigger_timestamp"],
      ["brand", "region", "measurement_date"],
      ["model_version", "prediction_timestamp"],
      ["estimate_id", "gate_decision"],
      ["dag_version_hash", "approval_status"]
    ],
    "time_series_partitioning": {
      "partition_key": "event_date",
      "partition_interval": "monthly",
      "retention_months": 36
    }
  }
}
