# =============================================================================
# E2I Causal Analytics — Environment Variables
# =============================================================================
# Copy to .env and fill in real values:
#   cp .env.example .env && chmod 600 .env
#
# Required vars are marked [REQUIRED]. Compose will refuse to start without them.
# Symlink: docker/.env -> ../.env (so compose resolves ${VAR} references)
# =============================================================================

# -----------------------------------------------------------------------------
# 1. CORE INFRASTRUCTURE — Memory Systems [REQUIRED]
# -----------------------------------------------------------------------------
REDIS_PASSWORD=changeme                   # [REQUIRED] Redis auth (working memory + Celery broker)
FALKORDB_PASSWORD=changeme                # [REQUIRED] FalkorDB auth (semantic memory graph)

# -----------------------------------------------------------------------------
# 2. SUPABASE — Database + Auth [REQUIRED]
# -----------------------------------------------------------------------------
SUPABASE_URL=http://localhost:54321       # [REQUIRED] Supabase project URL
SUPABASE_KEY=your-anon-key-here           # [REQUIRED] Supabase anon/public key
SUPABASE_ANON_KEY=your-anon-key-here      # Alias (some code reads this; set same as SUPABASE_KEY)
SUPABASE_SERVICE_KEY=your-service-key     # [REQUIRED] Supabase service role key (admin)
SUPABASE_JWT_SECRET=your-jwt-secret       # [REQUIRED] JWT signature verification secret
SUPABASE_DB_URL=postgresql://postgres:password@localhost:54322/postgres  # [REQUIRED] Direct PG (monitoring + migrations)

# -----------------------------------------------------------------------------
# 3. LLM PROVIDERS [REQUIRED]
# -----------------------------------------------------------------------------
ANTHROPIC_API_KEY=sk-ant-...              # [REQUIRED] Anthropic Claude API key
# OPENAI_API_KEY=sk-...                   # Optional: OpenAI (alternative provider)
# LLM_PROVIDER=anthropic                  # anthropic (default) or openai

# -----------------------------------------------------------------------------
# 4. OPIK — LLM Observability [REQUIRED for Opik services]
# -----------------------------------------------------------------------------
# WARNING: Opik credentials bake into Docker volumes at first startup.
# If you change passwords after volumes exist, wipe volumes first:
#   docker volume rm $(docker volume ls -q | grep opik)
#
OPIK_MYSQL_ROOT_PASSWORD=changeme         # [REQUIRED] MySQL root password
OPIK_MYSQL_PASSWORD=changeme              # [REQUIRED] MySQL 'opik' user password
OPIK_CLICKHOUSE_PASSWORD=changeme         # [REQUIRED] ClickHouse 'opik' user password
OPIK_REDIS_PASSWORD=changeme              # [REQUIRED] Opik Redis password
OPIK_MINIO_ROOT_USER=opik-admin           # [REQUIRED] MinIO root username
OPIK_MINIO_ROOT_PASSWORD=changeme123      # [REQUIRED] MinIO root password (>= 8 chars!)
# OPIK_VERSION=1.10.8                     # Opik image tag (pinned in compose)
# OPIK_ENABLED=false                      # Enable Opik tracking in API

# -----------------------------------------------------------------------------
# 5. OBSERVABILITY — Grafana [REQUIRED]
# -----------------------------------------------------------------------------
GRAFANA_ADMIN_PASSWORD=changeme           # [REQUIRED] Grafana admin password
# SENTRY_DSN=                             # Optional: Sentry error tracking DSN

# -----------------------------------------------------------------------------
# 6. DEV TOOLS — Flower & Redis Commander [REQUIRED in dev overlay]
# -----------------------------------------------------------------------------
FLOWER_USER=admin                         # [REQUIRED] Flower web UI username
FLOWER_PASSWORD=changeme                  # [REQUIRED] Flower web UI password

# -----------------------------------------------------------------------------
# 7. API CONFIGURATION
# -----------------------------------------------------------------------------
ENVIRONMENT=development                   # development | production | test
LOG_LEVEL=INFO                            # DEBUG | INFO | WARNING | ERROR
# CORS_ORIGINS=http://localhost:3002      # Comma-separated allowed origins
# ENABLE_HSTS=false                       # Set true in production (default: true)
# DISABLE_RATE_LIMITING=false             # Ignored when ENVIRONMENT=production

# -----------------------------------------------------------------------------
# 8. GITHUB / DEPLOYMENT
# -----------------------------------------------------------------------------
GITHUB_PAT=ghp_...                        # GitHub PAT (for git operations)
# DEPLOY_HOST=                            # SSH host (CI/CD only)
# DEPLOY_USER=                            # SSH user (CI/CD only)

# -----------------------------------------------------------------------------
# 9. FRONTEND (Vite — set in docker-compose.dev.yml, override here if needed)
# -----------------------------------------------------------------------------
# VITE_API_URL=/api
# VITE_WS_URL=wss://eznomics.site
# VITE_COPILOT_ENABLED=true
