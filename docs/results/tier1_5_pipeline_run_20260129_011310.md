# Tier 1-5 Agent Test Results

**Generated**: 2026-01-29T01:13:10.463801

## Test Configuration

- **Tiers Tested**: 2
- **Agents Tested**: heterogeneous_optimizer
- **Tier0 Cache**: auto-generated
- **Observability**: enabled
- **Timeout**: 30.0s per agent

## Results

```

======================================================================
TIER 1-5 AGENT TESTING FRAMEWORK
======================================================================
  Running tier0 pipeline to generate synthetic data...

======================================================================
TIER 0 MLOPS WORKFLOW TEST
======================================================================
  Experiment ID: tier0_e2e_262ca0c6
  Brand: Kisqali
  Target: discontinuation_flag
  Problem Type: binary_classification
  MLflow Enabled: True
  MLflow Tracking URI: http://localhost:5000
  BentoML Serving: Disabled
  Started: 2026-01-29T01:12:42.019569

  Generating sample patient data...
  Generated 600 patient records

======================================================================
STEP 1: SCOPE DEFINER
======================================================================

  ğŸ“¥ Input Summary:
    â€¢ problem_description: Predict patient discontinuation risk for Kisqali
    â€¢ business_objective: Identify high-risk patients early for intervention
    â€¢ target_outcome: discontinuation_flag
    â€¢ problem_type_hint: binary_classification
    â€¢ brand: Kisqali

  âš™ï¸  Processing:
    âœ… Creating ScopeDefinerAgent
    âœ… Agent initialized
    âœ… Scope definition executed

  ğŸ” Validation Checks:
    â€¢ Problem type defined: âœ… PASS
        Expected: problem_type present
        Actual:   binary_classification
    â€¢ Prediction target set: âœ… PASS
        Expected: prediction_target present
        Actual:   discontinuation_flag
    â€¢ Minimum samples specified: âœ… PASS
        Expected: minimum_samples > 0
        Actual:   500
    â€¢ Scope validation: âœ… PASS
        Expected: validation_passed = True
        Actual:   validation_passed = True

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    experiment_id             exp_kisq_al_20260129011250_40f0f1 -               -         
    problem_type              binary_classification -               -         
    prediction_target         discontinuation_flag -               -         
    minimum_samples           500             -               -         

  ğŸ’¡ Scope Analysis:
    â€¢ Binary classification scope defined for patient risk prediction
    â€¢ Target outcome: discontinuation_flag
    â€¢ Sample requirement (500) appropriate for ML

  ------------------------------------------------------------
  âœ… RESULT: PASS - Scope definition complete (3.9s)
  ------------------------------------------------------------

======================================================================
STEP 2: DATA PREPARER
======================================================================

  ğŸ“¥ Input Summary:
    â€¢ data_source: patient_journeys
    â€¢ brand: Kisqali
    â€¢ sample_size: 600
    â€¢ features: 11 available

  âš™ï¸  Processing:
    âœ… Creating DataPreparerAgent
    âœ… Agent initialized
    âœ… Data preparation executed
    âœ… QC analysis complete (warning)

  ğŸ” Validation Checks:
    â€¢ QC Gate: âœ… PASS
        Expected: gate_passed = True
        Actual:   gate_passed = True
    â€¢ Overall QC Score: âœ… PASS
        Expected: >= 0.70
        Actual:   0.99
    â€¢ Training samples: âœ… PASS
        Expected: >= 100
        Actual:   157
    â€¢ Validation samples: âœ… PASS
        Expected: >= 30
        Actual:   156

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    overall_score             0.9867          >= 0.70         âœ…         
    completeness              0.9468          >= 0.90         âœ…         
    validity                  1.0000          >= 0.90         âœ…         
    consistency               1.0000          >= 0.90         âœ…         
    uniqueness                1.0000          >= 0.95         âœ…         
    timeliness                1.0000          >= 0.80         âœ…         
    train_samples             157             >= 100          âœ…         
    validation_samples        156             >= 30           âœ…         

  ğŸ’¡ Data Quality Analysis:
    â€¢ Data split: 157 train (50%), 156 validation
    â€¢ All QC dimensions meet quality thresholds

  ------------------------------------------------------------
  âœ… RESULT: PASS - QC Gate PASSED - Training can proceed (1.2s)
  ------------------------------------------------------------

======================================================================
STEP 3: COHORT CONSTRUCTOR
======================================================================

  ğŸ“¥ Input Summary:
    â€¢ input_patients: 600
    â€¢ brand: Kisqali
    â€¢ inclusion_criteria: data_quality_score >= 0.5
    â€¢ exclusion_criteria: None (maximize sample size)

  âš™ï¸  Processing:
    âœ… Creating CohortConstructorAgent
    âœ… Agent initialized
    âœ… Cohort config created (data_quality_score >= 0.5)
    âœ… Cohort construction executed (600 eligible)

  ğŸ” Validation Checks:
    â€¢ Minimum cohort size: âœ… PASS
        Expected: >= 30
        Actual:   600
    â€¢ Retention rate: âœ… PASS
        Expected: >= 50%
        Actual:   100.0%
    â€¢ Cohort status: âœ… PASS
        Expected: completed
        Actual:   completed

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    input_patients            600             -               -         
    eligible_patients         600             >= 30           âœ…         
    excluded_patients         0               -               -         
    retention_rate            1.0000          >= 0.50         âœ…         
    cohort_id                 cohort_kisqali_test_v100-test_20260129 -               -         

  ğŸ’¡ Cohort Analysis:
    â€¢ Patient flow: 600 â†’ 600 (100.0% retention)
    â€¢ Excluded 0 patients based on eligibility criteria
    â€¢ Cohort size (600) sufficient for ML training
    â€¢ Target class distribution: {0: np.int64(521), 1: np.int64(79)}
    â€¢ âš ï¸  Class imbalance detected (13.2% minority)

  ------------------------------------------------------------
  âœ… RESULT: PASS - Cohort constructed (600 patients, 0.1s)
  ------------------------------------------------------------

======================================================================
STEP 4: MODEL SELECTOR
======================================================================

  ğŸ“¥ Input Summary:
    â€¢ problem_type: binary_classification
    â€¢ qc_passed: True
    â€¢ skip_benchmarks: False
ğŸƒ View run model_selection_LogisticRegression at: http://localhost:5000/#/experiments/221/runs/cff53008bc0244ea9523dd270d252acf
ğŸ§ª View experiment at: http://localhost:5000/#/experiments/221

  âš™ï¸  Processing:
    âœ… Creating ModelSelectorAgent
    âœ… Agent initialized
    âœ… Model selection executed (LogisticRegression)
    âœ… Alternatives evaluated (3 candidates)

  ğŸ” Validation Checks:
    â€¢ Model candidate selected: âœ… PASS
        Expected: candidate present
        Actual:   LogisticRegression
    â€¢ Selection rationale provided: âœ… PASS
        Expected: rationale present
        Actual:   Highly interpretable baseline model for binary_cla
    â€¢ Alternatives evaluated: âœ… PASS
        Expected: > 0 alternatives
        Actual:   3 evaluated
    â€¢ No selection errors: âœ… PASS
        Expected: no errors
        Actual:   none

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    algorithm                 LogisticRegression -               -         
    selection_score           0.758           > 0.5           âœ…         
    interpretability_score    1.00            -               -         
    hyperparameters           4 default params -               -         
    alternatives_evaluated    3               > 0             âœ…         

  ğŸ“‹ Candidates Evaluated:
    ------------------------------------------------------------
    Rank  Algorithm                Score       Status         
    ------------------------------------------------------------
    1     LogisticRegression       0.758       âœ… SELECTED     
    2     LightGBM                 0.715       Not selected   
    3     XGBoost                  0.713       Not selected   
    4     RandomForest             0.655       Not selected   
    ------------------------------------------------------------

  ğŸ’¡ Model Selection Analysis:
    â€¢ Selected: LogisticRegression (score: 0.758)
    â€¢ Primary reason: Highly interpretable baseline model for binary_classification
    â€¢ Supporting factors: Fast training and inference, Well-established baseline approach, Numerically stable
    â€¢ HPO will tune: C, penalty, solver, max_iter
    â€¢ LogisticRegression: Interpretable, fast, good baseline

  ------------------------------------------------------------
  âœ… RESULT: PASS - Model selected: LogisticRegression (0.7s)
  ------------------------------------------------------------

======================================================================
STEP 5: MODEL TRAINER
======================================================================

  ğŸ“¥ Input Summary:
    â€¢ algorithm: LogisticRegression
    â€¢ total_samples: 600
    â€¢ train_samples: 360 (60%)
    â€¢ validation_samples: 120 (20%)
    â€¢ test_samples: 90 (15%)
    â€¢ holdout_samples: 30 (5%)
    â€¢ hpo_trials: 10
    â€¢ enable_mlflow: True
ğŸƒ View run LogisticRegression_20260129_011300 at: http://localhost:5000/#/experiments/222/runs/1c1d6df8045e4faf810890938be3726e
ğŸ§ª View experiment at: http://localhost:5000/#/experiments/222

  âš™ï¸  Processing:
    âœ… Creating ModelTrainerAgent
    âœ… Agent initialized
    âœ… HPO optimization (10 trials)
    âœ… Class imbalance detected (severe)
    âœ… Remediation applied (smote)
    âœ… Model training complete (AUC=0.8012820512820512)
    âœ… MLflow artifact logged (model_uri available)

  ğŸ” Validation Checks:
    â€¢ Model trained successfully: âœ… PASS
        Expected: trained_model present
        Actual:   present
    â€¢ AUC-ROC threshold: âœ… PASS
        Expected: >= 0.55
        Actual:   0.801
    â€¢ Minority recall threshold: âœ… PASS
        Expected: >= 10%
        Actual:   63.64%
    â€¢ Minority precision threshold: âœ… PASS
        Expected: >= 5%
        Actual:   16.67%
    â€¢ Positive predictions made: âœ… PASS
        Expected: > 0
        Actual:   42

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    auc_roc                   0.8013          >= 0.55         âœ…         
    accuracy                  0.6750          -               -         
    precision                 0.1667          >= 5%           âœ…         
    recall                    0.6364          >= 10%          âœ…         
    f1_score                  0.2642          -               -         
    optimal_threshold         0.5063          -               -         
    positive_predictions      42              > 0             âœ…         
    hpo_trials_run            10              -               -         

  Validation Confusion Matrix:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           Predicted                 â”‚
    â”‚         Neg        Pos              â”‚
    â”‚  Actual â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
    â”‚    Neg   TN=  74    FP=  35          â”‚
    â”‚    Pos   FN=   4    TP=   7          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Derived Metrics:
      â€¢ Accuracy:    0.6750 (81/120 correct)
      â€¢ Precision:   0.1667 (of predicted pos, 7/42 correct)
      â€¢ Recall/TPR:  0.6364 (of actual pos, 7/11 found)
      â€¢ Specificity: 0.6789 (of actual neg, 74/109 found)
      â€¢ F1 Score:    0.2642
      â€¢ NPV:         0.9487 (of predicted neg, 74/78 correct)
      â€¢ FPR:         0.3211 (false alarm rate)
      â€¢ FNR:         0.3636 (miss rate)

  Probability Distribution (class 1):
    Min: 0.1616, Max: 0.7948
    Mean: 0.4476, Median: 0.4550
    Percentiles: P10=0.217, P25=0.314, P50=0.455, P75=0.584, P90=0.666, P95=0.706, P99=0.774

  Threshold Analysis:
    Threshold    Precision    Recall       F1           Pred Pos    
    --------------------------------------------------------
    0.05         0.0917       1.0000       0.1679       120         
    0.10         0.0917       1.0000       0.1679       120         
    0.15         0.0917       1.0000       0.1679       120         
    0.20         0.0982       1.0000       0.1789       112         
    0.25         0.1100       1.0000       0.1982       100         
    0.30         0.1209       1.0000       0.2157       91          
    0.40         0.1429       1.0000       0.2500       77          
    0.50         0.1591       0.6364       0.2545       44           â—„â”€â”€ default
    0.60         0.2692       0.6364       0.3784       26          
    0.70         0.5714       0.3636       0.4444       7           

  ğŸ’¡ Model Training Analysis:
    â€¢ AUC-ROC (0.801) indicates good discrimination ability
    â€¢ Recall (63.64%) meets threshold (10%)
    â€¢ Precision (16.67%) acceptable
    â€¢ Class imbalance detected: 14.2% minority class
    â€¢ Severity: SEVERE
    â€¢ Applied remediation: smote
    â€¢ Overall accuracy: 67.5% (81/120 correct)
    â€¢ Minority class: 7/11 detected (63.6% recall)
    â€¢ Of 42 predicted positives, 7 correct (16.7% precision)

  ------------------------------------------------------------
  âœ… RESULT: PASS - Model trained successfully - usefulness validated (12.6s)
  ------------------------------------------------------------

======================================================================
STEP 6: FEATURE ANALYZER
======================================================================

  ğŸ“¥ Input Summary:
    â€¢ sample_size: 50
    â€¢ features: ['days_on_therapy', 'hcp_visits', 'prior_treatments']
    â€¢ max_samples: 50
    â€¢ model_uri: models:/m-26152fbb9b054c0ca248ca13bf76238c

  âš™ï¸  Processing:
    âœ… Creating FeatureAnalyzerAgent
    âœ… Agent initialized
    âŒ SHAP analysis executed (Feature analysis failed: shap_computation_error: S)

  ğŸ” Validation Checks:
    â€¢ Feature importance computed: âŒ FAIL
        Expected: feature_importance present
        Actual:   missing
    â€¢ Samples analyzed: âŒ FAIL
        Expected: > 0
        Actual:   0

  ğŸ’¡ Feature Analysis:
    â€¢ âš ï¸  Feature importance analysis failed or skipped
    â€¢     Error: Feature analysis failed: shap_computation_error: SHAP computation failed: [Errno 32] Broken pipe

    Recommendations:
      1. Verify model is compatible with SHAP explainer
      2. Check if model_uri is valid and accessible

  ------------------------------------------------------------
  âš ï¸  RESULT: WARNING - Feature analysis failed (optional step) (0.1s)
  ------------------------------------------------------------

======================================================================
STEP 7: MODEL DEPLOYER
======================================================================

  ğŸ“¥ Input Summary:
    â€¢ deployment_name: kisqali_discontinuation_tier0_e2
    â€¢ model_uri: models:/m-26152fbb9b054c0ca248ca13bf76238c
    â€¢ success_criteria_met: True
    â€¢ deployment_action: register
    â€¢ include_bentoml: False

  âš™ï¸  Processing:
    âœ… Creating ModelDeployerAgent
    âœ… Agent initialized
    âœ… Model registration (completed)

  ğŸ” Validation Checks:
    â€¢ Deployment successful: âœ… PASS
        Expected: deployment_successful = True
        Actual:   completed
    â€¢ Deployment manifest: âœ… PASS
        Expected: manifest present
        Actual:   present
    â€¢ Success criteria met: âœ… PASS
        Expected: success_criteria_met = True
        Actual:   True

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    deployment_id             deploy_58a0cc08d0f1 -               -         
    environment               staging         -               -         
    status                    healthy         -               -         
    model_version             N/A             -               -         

  ğŸ’¡ Deployment Analysis:
    â€¢ Model registered with deployment ID: deploy_58a0cc08d0f1
    â€¢ Environment: staging

  ------------------------------------------------------------
  âœ… RESULT: PASS - Model deployed successfully (4.9s)
  ------------------------------------------------------------

======================================================================
STEP 8: OBSERVABILITY CONNECTOR
======================================================================

  ğŸ“¥ Input Summary:
    â€¢ events_to_log: 1
    â€¢ event_type: pipeline_completed
    â€¢ experiment_id: tier0_e2e_262ca0c6
    â€¢ stages_completed: 8
    â€¢ time_window: 1h

  âš™ï¸  Processing:
    âœ… Creating ObservabilityConnectorAgent
    âœ… Agent initialized
    âœ… Event emission (1 events)

  ğŸ” Validation Checks:
    â€¢ Emission successful: âœ… PASS
        Expected: emission_successful = True
        Actual:   True
    â€¢ Events logged: âœ… PASS
        Expected: > 0
        Actual:   1

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    emission_successful       True            -               -         
    events_logged             1               > 0             âœ…         
    quality_score             0.6905          -               -         

  ğŸ’¡ Observability Analysis:
    â€¢ Pipeline completion event logged to observability system
    â€¢ Experiment tier0_e2e_262ca0c6 with 8 stages recorded
    â€¢ Event quality score: 0.6905

  ------------------------------------------------------------
  âœ… RESULT: PASS - Observability logging complete (0.0s)
  ------------------------------------------------------------

======================================================================
DETAILED STEP RESULTS
======================================================================

----------------------------------------------------------------------
STEP 1: SCOPE DEFINER [âœ… SUCCESS]
----------------------------------------------------------------------
  Duration: 3.88s

  ğŸ“¥ Input Summary:
    â€¢ problem_description: Predict patient discontinuation risk
    â€¢ business_objective: Identify high-risk patients
    â€¢ target_outcome: discontinuation_flag
    â€¢ problem_type_hint: binary_classification
    â€¢ brand: Kisqali

  ğŸ” Validation Checks:
    â€¢ Problem type defined: âœ… PASS
        Expected: problem_type present
        Actual:   binary_classification
    â€¢ Prediction target set: âœ… PASS
        Expected: prediction_target present
        Actual:   discontinuation_flag
    â€¢ Minimum samples specified: âœ… PASS
        Expected: minimum_samples > 0
        Actual:   500
    â€¢ Scope validation: âœ… PASS
        Expected: validation_passed = True
        Actual:   validation_passed = True

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    experiment_id             exp_kisq_al_20260129011250_40f0f1 -               -         
    problem_type              binary_classification -               -         
    prediction_target         discontinuation_flag -               -         
    minimum_samples           500             -               -         

  ğŸ’¡ SCOPE DEFINER Analysis:
    â€¢ Binary classification scope defined for patient risk prediction
    â€¢ Target outcome: discontinuation_flag
    â€¢ Sample requirement (500) appropriate for ML

  ------------------------------------------------------------
  âœ… RESULT: PASS - Scope definition complete (3.9s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 2: DATA PREPARER [âœ… SUCCESS]
----------------------------------------------------------------------
  Duration: 1.20s

  ğŸ“¥ Input Summary:
    â€¢ experiment_id: tier0_e2e_262ca0c6
    â€¢ scope_spec_problem_type: binary_classification
    â€¢ input_samples: 600

  ğŸ” Validation Checks:
    â€¢ QC gate passed: âœ… PASS
        Expected: gate_passed = True
        Actual:   gate_passed = True
    â€¢ Overall score acceptable: âœ… PASS
        Expected: â‰¥ 0.70
        Actual:   0.99
    â€¢ Training samples sufficient: âœ… PASS
        Expected: â‰¥ 50
        Actual:   157
    â€¢ Validation samples present: âœ… PASS
        Expected: > 0
        Actual:   156

  ğŸ“Š Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    overall_score             0.99            â‰¥ 0.70          âœ…         
    completeness_score        0.95            -               -         
    validity_score            1.00            -               -         
    consistency_score         1.00            -               -         
    train_samples             157             â‰¥ 50            âœ…         
    validation_samples        156             > 0             âœ…         

  ğŸ’¡ DATA PREPARER Analysis:
    â€¢ Data quality score: 0.99
    â€¢ Training set: 157 samples, validation set: 156 samples
    â€¢ QC gate PASSED - data ready for modeling

  ------------------------------------------------------------
  âœ… RESULT: PASS - Data preparation complete (1.2s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 3: COHORT CONSTRUCTOR [âœ… SUCCESS]
----------------------------------------------------------------------
  Duration: 0.05s

  ğŸ“¥ Input Summary:
    â€¢ input_patients: 600
    â€¢ brand: Kisqali
    â€¢ min_eligible_required: 30

  ğŸ” Validation Checks:
    â€¢ Sufficient eligible patients: âœ… PASS
        Expected: â‰¥ 30
        Actual:   600
    â€¢ Exclusion rate reasonable: âœ… PASS
  âŒ Pipeline failed: [Errno 32] Broken pipe
```
