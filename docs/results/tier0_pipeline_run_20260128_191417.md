# Tier 0 Pipeline Run Results

**Generated**: 2026-01-28T19:14:17.332985

```

======================================================================
TIER 0 MLOPS WORKFLOW TEST
======================================================================
  Experiment ID: tier0_e2e_dd799015
  Brand: Kisqali
  Target: discontinuation_flag
  Problem Type: binary_classification
  MLflow Enabled: True
  MLflow Tracking URI: http://localhost:5000
  BentoML Serving: Disabled
  Started: 2026-01-28T19:13:31.690501

  Generating sample patient data...
  Generated 600 patient records

======================================================================
STEP 1: SCOPE DEFINER
======================================================================

  üì• Input Summary:
    ‚Ä¢ problem_description: Predict patient discontinuation risk for Kisqali
    ‚Ä¢ business_objective: Identify high-risk patients early for intervention
    ‚Ä¢ target_outcome: discontinuation_flag
    ‚Ä¢ problem_type_hint: binary_classification
    ‚Ä¢ brand: Kisqali

  ‚öôÔ∏è  Processing:
    ‚úÖ Creating ScopeDefinerAgent
    ‚úÖ Agent initialized
    ‚úÖ Scope definition executed

  üîç Validation Checks:
    ‚Ä¢ Problem type defined: ‚úÖ PASS
        Expected: problem_type present
        Actual:   binary_classification
    ‚Ä¢ Prediction target set: ‚úÖ PASS
        Expected: prediction_target present
        Actual:   discontinuation_flag
    ‚Ä¢ Minimum samples specified: ‚úÖ PASS
        Expected: minimum_samples > 0
        Actual:   500
    ‚Ä¢ Scope validation: ‚úÖ PASS
        Expected: validation_passed = True
        Actual:   validation_passed = True

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    experiment_id             exp_kisq_al_20260128191339_cd6cf1 -               -         
    problem_type              binary_classification -               -         
    prediction_target         discontinuation_flag -               -         
    minimum_samples           500             -               -         

  üí° Scope Analysis:
    ‚Ä¢ Binary classification scope defined for patient risk prediction
    ‚Ä¢ Target outcome: discontinuation_flag
    ‚Ä¢ Sample requirement (500) appropriate for ML

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Scope definition complete (3.7s)
  ------------------------------------------------------------

======================================================================
STEP 2: DATA PREPARER
======================================================================

  üì• Input Summary:
    ‚Ä¢ data_source: patient_journeys
    ‚Ä¢ brand: Kisqali
    ‚Ä¢ sample_size: 600
    ‚Ä¢ features: 11 available

  ‚öôÔ∏è  Processing:
    ‚úÖ Creating DataPreparerAgent
    ‚úÖ Agent initialized
    ‚úÖ Data preparation executed
    ‚úÖ QC analysis complete (warning)

  üîç Validation Checks:
    ‚Ä¢ QC Gate: ‚úÖ PASS
        Expected: gate_passed = True
        Actual:   gate_passed = True
    ‚Ä¢ Overall QC Score: ‚úÖ PASS
        Expected: >= 0.70
        Actual:   0.99
    ‚Ä¢ Training samples: ‚úÖ PASS
        Expected: >= 100
        Actual:   157
    ‚Ä¢ Validation samples: ‚úÖ PASS
        Expected: >= 30
        Actual:   156

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    overall_score             0.9867          >= 0.70         ‚úÖ         
    completeness              0.9468          >= 0.90         ‚úÖ         
    validity                  1.0000          >= 0.90         ‚úÖ         
    consistency               1.0000          >= 0.90         ‚úÖ         
    uniqueness                1.0000          >= 0.95         ‚úÖ         
    timeliness                1.0000          >= 0.80         ‚úÖ         
    train_samples             157             >= 100          ‚úÖ         
    validation_samples        156             >= 30           ‚úÖ         

  üí° Data Quality Analysis:
    ‚Ä¢ Data split: 157 train (50%), 156 validation
    ‚Ä¢ All QC dimensions meet quality thresholds

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - QC Gate PASSED - Training can proceed (1.0s)
  ------------------------------------------------------------

======================================================================
STEP 3: COHORT CONSTRUCTOR
======================================================================

  üì• Input Summary:
    ‚Ä¢ input_patients: 600
    ‚Ä¢ brand: Kisqali
    ‚Ä¢ inclusion_criteria: data_quality_score >= 0.5
    ‚Ä¢ exclusion_criteria: None (maximize sample size)

  ‚öôÔ∏è  Processing:
    ‚úÖ Creating CohortConstructorAgent
    ‚úÖ Agent initialized
    ‚úÖ Cohort config created (data_quality_score >= 0.5)
    ‚úÖ Cohort construction executed (600 eligible)

  üîç Validation Checks:
    ‚Ä¢ Minimum cohort size: ‚úÖ PASS
        Expected: >= 30
        Actual:   600
    ‚Ä¢ Retention rate: ‚úÖ PASS
        Expected: >= 50%
        Actual:   100.0%
    ‚Ä¢ Cohort status: ‚úÖ PASS
        Expected: completed
        Actual:   completed

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    input_patients            600             -               -         
    eligible_patients         600             >= 30           ‚úÖ         
    excluded_patients         0               -               -         
    retention_rate            1.0000          >= 0.50         ‚úÖ         
    cohort_id                 cohort_kisqali_test_v100-test_20260128 -               -         

  üí° Cohort Analysis:
    ‚Ä¢ Patient flow: 600 ‚Üí 600 (100.0% retention)
    ‚Ä¢ Excluded 0 patients based on eligibility criteria
    ‚Ä¢ Cohort size (600) sufficient for ML training
    ‚Ä¢ Target class distribution: {0: np.int64(521), 1: np.int64(79)}
    ‚Ä¢ ‚ö†Ô∏è  Class imbalance detected (13.2% minority)

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Cohort constructed (600 patients, 0.1s)
  ------------------------------------------------------------

======================================================================
STEP 4: MODEL SELECTOR
======================================================================

  üì• Input Summary:
    ‚Ä¢ problem_type: binary_classification
    ‚Ä¢ qc_passed: True
    ‚Ä¢ skip_benchmarks: False
üèÉ View run model_selection_LogisticRegression at: http://localhost:5000/#/experiments/208/runs/ac769920ba6b426fbefd8a990a71e42c
üß™ View experiment at: http://localhost:5000/#/experiments/208

  ‚öôÔ∏è  Processing:
    ‚úÖ Creating ModelSelectorAgent
    ‚úÖ Agent initialized
    ‚úÖ Model selection executed (LogisticRegression)
    ‚úÖ Alternatives evaluated (3 candidates)

  üîç Validation Checks:
    ‚Ä¢ Model candidate selected: ‚úÖ PASS
        Expected: candidate present
        Actual:   LogisticRegression
    ‚Ä¢ Selection rationale provided: ‚úÖ PASS
        Expected: rationale present
        Actual:   Highly interpretable baseline model for binary_cla
    ‚Ä¢ Alternatives evaluated: ‚úÖ PASS
        Expected: > 0 alternatives
        Actual:   3 evaluated
    ‚Ä¢ No selection errors: ‚úÖ PASS
        Expected: no errors
        Actual:   none

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    algorithm                 LogisticRegression -               -         
    selection_score           0.758           > 0.5           ‚úÖ         
    interpretability_score    1.00            -               -         
    hyperparameters           4 default params -               -         
    alternatives_evaluated    3               > 0             ‚úÖ         

  üìã Candidates Evaluated:
    ------------------------------------------------------------
    Rank  Algorithm                Score       Status         
    ------------------------------------------------------------
    1     LogisticRegression       0.758       ‚úÖ SELECTED     
    2     LightGBM                 0.715       Not selected   
    3     XGBoost                  0.713       Not selected   
    4     RandomForest             0.655       Not selected   
    ------------------------------------------------------------

  üí° Model Selection Analysis:
    ‚Ä¢ Selected: LogisticRegression (score: 0.758)
    ‚Ä¢ Primary reason: Highly interpretable baseline model for binary_classification
    ‚Ä¢ Supporting factors: Fast training and inference, Well-established baseline approach, Numerically stable
    ‚Ä¢ HPO will tune: C, penalty, solver, max_iter
    ‚Ä¢ LogisticRegression: Interpretable, fast, good baseline

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Model selected: LogisticRegression (0.6s)
  ------------------------------------------------------------

======================================================================
STEP 5: MODEL TRAINER
======================================================================

  üì• Input Summary:
    ‚Ä¢ algorithm: LogisticRegression
    ‚Ä¢ total_samples: 600
    ‚Ä¢ train_samples: 360 (60%)
    ‚Ä¢ validation_samples: 120 (20%)
    ‚Ä¢ test_samples: 90 (15%)
    ‚Ä¢ holdout_samples: 30 (5%)
    ‚Ä¢ hpo_trials: 10
    ‚Ä¢ enable_mlflow: True
üèÉ View run LogisticRegression_20260128_191349 at: http://localhost:5000/#/experiments/209/runs/2447ffeaa7dd4474a5f0318433747d4b
üß™ View experiment at: http://localhost:5000/#/experiments/209

  ‚öôÔ∏è  Processing:
    ‚úÖ Creating ModelTrainerAgent
    ‚úÖ Agent initialized
    ‚úÖ HPO optimization (10 trials)
    ‚úÖ Class imbalance detected (severe)
    ‚úÖ Remediation applied (smote)
    ‚úÖ Model training complete (AUC=0.8012820512820512)
    ‚úÖ MLflow artifact logged (model_uri available)

  üîç Validation Checks:
    ‚Ä¢ Model trained successfully: ‚úÖ PASS
        Expected: trained_model present
        Actual:   present
    ‚Ä¢ AUC-ROC threshold: ‚úÖ PASS
        Expected: >= 0.55
        Actual:   0.801
    ‚Ä¢ Minority recall threshold: ‚úÖ PASS
        Expected: >= 10%
        Actual:   63.64%
    ‚Ä¢ Minority precision threshold: ‚úÖ PASS
        Expected: >= 5%
        Actual:   16.67%
    ‚Ä¢ Positive predictions made: ‚úÖ PASS
        Expected: > 0
        Actual:   42

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    auc_roc                   0.8013          >= 0.55         ‚úÖ         
    accuracy                  0.6750          -               -         
    precision                 0.1667          >= 5%           ‚úÖ         
    recall                    0.6364          >= 10%          ‚úÖ         
    f1_score                  0.2642          -               -         
    optimal_threshold         0.5063          -               -         
    positive_predictions      42              > 0             ‚úÖ         
    hpo_trials_run            10              -               -         

  Validation Confusion Matrix:
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ           Predicted                 ‚îÇ
    ‚îÇ         Neg        Pos              ‚îÇ
    ‚îÇ  Actual ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ            ‚îÇ
    ‚îÇ    Neg   TN=  74    FP=  35          ‚îÇ
    ‚îÇ    Pos   FN=   4    TP=   7          ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    Derived Metrics:
      ‚Ä¢ Accuracy:    0.6750 (81/120 correct)
      ‚Ä¢ Precision:   0.1667 (of predicted pos, 7/42 correct)
      ‚Ä¢ Recall/TPR:  0.6364 (of actual pos, 7/11 found)
      ‚Ä¢ Specificity: 0.6789 (of actual neg, 74/109 found)
      ‚Ä¢ F1 Score:    0.2642
      ‚Ä¢ NPV:         0.9487 (of predicted neg, 74/78 correct)
      ‚Ä¢ FPR:         0.3211 (false alarm rate)
      ‚Ä¢ FNR:         0.3636 (miss rate)

  Probability Distribution (class 1):
    Min: 0.1616, Max: 0.7948
    Mean: 0.4476, Median: 0.4550
    Percentiles: P10=0.217, P25=0.314, P50=0.455, P75=0.584, P90=0.666, P95=0.706, P99=0.774

  Threshold Analysis:
    Threshold    Precision    Recall       F1           Pred Pos    
    --------------------------------------------------------
    0.05         0.0917       1.0000       0.1679       120         
    0.10         0.0917       1.0000       0.1679       120         
    0.15         0.0917       1.0000       0.1679       120         
    0.20         0.0982       1.0000       0.1789       112         
    0.25         0.1100       1.0000       0.1982       100         
    0.30         0.1209       1.0000       0.2157       91          
    0.40         0.1429       1.0000       0.2500       77          
    0.50         0.1591       0.6364       0.2545       44           ‚óÑ‚îÄ‚îÄ default
    0.60         0.2692       0.6364       0.3784       26          
    0.70         0.5714       0.3636       0.4444       7           

  üí° Model Training Analysis:
    ‚Ä¢ AUC-ROC (0.801) indicates good discrimination ability
    ‚Ä¢ Recall (63.64%) meets threshold (10%)
    ‚Ä¢ Precision (16.67%) acceptable
    ‚Ä¢ Class imbalance detected: 14.2% minority class
    ‚Ä¢ Severity: SEVERE
    ‚Ä¢ Applied remediation: smote
    ‚Ä¢ Overall accuracy: 67.5% (81/120 correct)
    ‚Ä¢ Minority class: 7/11 detected (63.6% recall)
    ‚Ä¢ Of 42 predicted positives, 7 correct (16.7% precision)

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Model trained successfully - usefulness validated (11.2s)
  ------------------------------------------------------------

======================================================================
STEP 6: FEATURE ANALYZER
======================================================================

  üì• Input Summary:
    ‚Ä¢ sample_size: 50
    ‚Ä¢ features: ['days_on_therapy', 'hcp_visits', 'prior_treatments']
    ‚Ä¢ max_samples: 50
    ‚Ä¢ model_uri: models:/m-73964a06b8d345358bce3613a1d94c5c

  ‚öôÔ∏è  Processing:
    ‚úÖ Creating FeatureAnalyzerAgent
    ‚úÖ Agent initialized
    ‚úÖ SHAP analysis executed

  üîç Validation Checks:
    ‚Ä¢ Feature importance computed: ‚úÖ PASS
        Expected: feature_importance present
        Actual:   present
    ‚Ä¢ Samples analyzed: ‚úÖ PASS
        Expected: > 0
        Actual:   50

  üìä Feature Importance (SHAP):
    Feature                   Importance      Rank      
    --------------------------------------------------
    days_on_therapy           38.7846         #1         
    hcp_visits                1.1235          #2         
    prior_treatments          0.5255          #3         

  üí° Feature Analysis:
    ‚Ä¢ Top predictive features: days_on_therapy, hcp_visits, prior_treatments
    ‚Ä¢   ‚Ä¢ Duration on therapy (38.785) is a strong predictor
    ‚Ä¢   ‚Ä¢ HCP engagement (1.123) influences discontinuation
    ‚Ä¢   ‚Ä¢ Treatment history (0.526) affects outcomes
    ‚Ä¢ Analysis based on 50 samples using SHAP explainer

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Feature importance computed (19.6s)
  ------------------------------------------------------------

======================================================================
STEP 7: MODEL DEPLOYER
======================================================================

  üì• Input Summary:
    ‚Ä¢ deployment_name: kisqali_discontinuation_tier0_e2
    ‚Ä¢ model_uri: models:/m-73964a06b8d345358bce3613a1d94c5c
    ‚Ä¢ success_criteria_met: True
    ‚Ä¢ deployment_action: register
    ‚Ä¢ include_bentoml: False

  ‚öôÔ∏è  Processing:
    ‚úÖ Creating ModelDeployerAgent
    ‚úÖ Agent initialized
    ‚úÖ Model registration (completed)

  üîç Validation Checks:
    ‚Ä¢ Deployment successful: ‚úÖ PASS
        Expected: deployment_successful = True
        Actual:   completed
    ‚Ä¢ Deployment manifest: ‚úÖ PASS
        Expected: manifest present
        Actual:   present
    ‚Ä¢ Success criteria met: ‚úÖ PASS
        Expected: success_criteria_met = True
        Actual:   True

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    deployment_id             deploy_97e467d5b6fa -               -         
    environment               staging         -               -         
    status                    healthy         -               -         
    model_version             N/A             -               -         

  üí° Deployment Analysis:
    ‚Ä¢ Model registered with deployment ID: deploy_97e467d5b6fa
    ‚Ä¢ Environment: staging

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Model deployed successfully (4.4s)
  ------------------------------------------------------------

======================================================================
STEP 8: OBSERVABILITY CONNECTOR
======================================================================

  üì• Input Summary:
    ‚Ä¢ events_to_log: 1
    ‚Ä¢ event_type: pipeline_completed
    ‚Ä¢ experiment_id: tier0_e2e_dd799015
    ‚Ä¢ stages_completed: 8
    ‚Ä¢ time_window: 1h

  ‚öôÔ∏è  Processing:
    ‚úÖ Creating ObservabilityConnectorAgent
    ‚úÖ Agent initialized
    ‚úÖ Event emission (1 events)

  üîç Validation Checks:
    ‚Ä¢ Emission successful: ‚úÖ PASS
        Expected: emission_successful = True
        Actual:   True
    ‚Ä¢ Events logged: ‚úÖ PASS
        Expected: > 0
        Actual:   1

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    emission_successful       True            -               -         
    events_logged             1               > 0             ‚úÖ         
    quality_score             0.6905          -               -         

  üí° Observability Analysis:
    ‚Ä¢ Pipeline completion event logged to observability system
    ‚Ä¢ Experiment tier0_e2e_dd799015 with 8 stages recorded
    ‚Ä¢ Event quality score: 0.6905

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Observability logging complete (0.0s)
  ------------------------------------------------------------

======================================================================
DETAILED STEP RESULTS
======================================================================

----------------------------------------------------------------------
STEP 1: SCOPE DEFINER [‚úÖ SUCCESS]
----------------------------------------------------------------------
  Duration: 3.72s

  üì• Input Summary:
    ‚Ä¢ problem_description: Predict patient discontinuation risk
    ‚Ä¢ business_objective: Identify high-risk patients
    ‚Ä¢ target_outcome: discontinuation_flag
    ‚Ä¢ problem_type_hint: binary_classification
    ‚Ä¢ brand: Kisqali

  üîç Validation Checks:
    ‚Ä¢ Problem type defined: ‚úÖ PASS
        Expected: problem_type present
        Actual:   binary_classification
    ‚Ä¢ Prediction target set: ‚úÖ PASS
        Expected: prediction_target present
        Actual:   discontinuation_flag
    ‚Ä¢ Minimum samples specified: ‚úÖ PASS
        Expected: minimum_samples > 0
        Actual:   500
    ‚Ä¢ Scope validation: ‚úÖ PASS
        Expected: validation_passed = True
        Actual:   validation_passed = True

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    experiment_id             exp_kisq_al_20260128191339_cd6cf1 -               -         
    problem_type              binary_classification -               -         
    prediction_target         discontinuation_flag -               -         
    minimum_samples           500             -               -         

  üí° SCOPE DEFINER Analysis:
    ‚Ä¢ Binary classification scope defined for patient risk prediction
    ‚Ä¢ Target outcome: discontinuation_flag
    ‚Ä¢ Sample requirement (500) appropriate for ML

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Scope definition complete (3.7s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 2: DATA PREPARER [‚úÖ SUCCESS]
----------------------------------------------------------------------
  Duration: 1.04s

  üì• Input Summary:
    ‚Ä¢ experiment_id: tier0_e2e_dd799015
    ‚Ä¢ scope_spec_problem_type: binary_classification
    ‚Ä¢ input_samples: 600

  üîç Validation Checks:
    ‚Ä¢ QC gate passed: ‚úÖ PASS
        Expected: gate_passed = True
        Actual:   gate_passed = True
    ‚Ä¢ Overall score acceptable: ‚úÖ PASS
        Expected: ‚â• 0.70
        Actual:   0.99
    ‚Ä¢ Training samples sufficient: ‚úÖ PASS
        Expected: ‚â• 50
        Actual:   157
    ‚Ä¢ Validation samples present: ‚úÖ PASS
        Expected: > 0
        Actual:   156

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    overall_score             0.99            ‚â• 0.70          ‚úÖ         
    completeness_score        0.95            -               -         
    validity_score            1.00            -               -         
    consistency_score         1.00            -               -         
    train_samples             157             ‚â• 50            ‚úÖ         
    validation_samples        156             > 0             ‚úÖ         

  üí° DATA PREPARER Analysis:
    ‚Ä¢ Data quality score: 0.99
    ‚Ä¢ Training set: 157 samples, validation set: 156 samples
    ‚Ä¢ QC gate PASSED - data ready for modeling

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Data preparation complete (1.0s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 3: COHORT CONSTRUCTOR [‚úÖ SUCCESS]
----------------------------------------------------------------------
  Duration: 0.06s

  üì• Input Summary:
    ‚Ä¢ input_patients: 600
    ‚Ä¢ brand: Kisqali
    ‚Ä¢ min_eligible_required: 30

  üîç Validation Checks:
    ‚Ä¢ Sufficient eligible patients: ‚úÖ PASS
        Expected: ‚â• 30
        Actual:   600
    ‚Ä¢ Exclusion rate reasonable: ‚úÖ PASS
        Expected: ‚â§ 50%
        Actual:   0.0%
    ‚Ä¢ Cohort ID generated: ‚úÖ PASS
        Expected: cohort_id present
        Actual:   cohort_kisqali_test_v100-test_20260128
    ‚Ä¢ Cohort status valid: ‚úÖ PASS
        Expected: completed/success
        Actual:   completed

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    input_patients            600             -               -         
    eligible_patients         600             ‚â• 30            ‚úÖ         
    excluded_patients         0               -               -         
    exclusion_rate            0.0%            ‚â§ 50%           ‚úÖ         

  üí° COHORT CONSTRUCTOR Analysis:
    ‚Ä¢ Cohort constructed with 600 eligible patients from 600 total
    ‚Ä¢ Exclusion rate: 0.0% (0 patients excluded)
    ‚Ä¢ Cohort size meets minimum threshold of 30

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Cohort 'cohort_kisqali_test_v100-test_20260128' constructed with 600 patients (0.1s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 4: MODEL SELECTOR [‚úÖ SUCCESS]
----------------------------------------------------------------------
  Duration: 0.56s

  üì• Input Summary:
    ‚Ä¢ experiment_id: tier0_e2e_dd799015
    ‚Ä¢ problem_type: binary_classification
    ‚Ä¢ qc_gate_passed: True

  üîç Validation Checks:
    ‚Ä¢ Algorithm selected: ‚úÖ PASS
        Expected: candidate present
        Actual:   LogisticRegression
    ‚Ä¢ Selection score computed: ‚úÖ PASS
        Expected: > 0
        Actual:   0.758
    ‚Ä¢ Rationale provided: ‚úÖ PASS
        Expected: reason present
        Actual:   Highly interpretable baseline 
    ‚Ä¢ Alternatives evaluated: ‚úÖ PASS
        Expected: > 0
        Actual:   3 candidates

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    algorithm                 LogisticRegression -               -         
    selection_score           0.758           > 0.5           ‚úÖ         
    interpretability          1.00            -               -         
    default_hyperparameters   4               -               -         
    alternatives_evaluated    3               > 0             ‚úÖ         

  üí° MODEL SELECTOR Analysis:
    ‚Ä¢ Selected LogisticRegression (score: 0.758)
    ‚Ä¢ Reason: Highly interpretable baseline model for binary_classification
    ‚Ä¢ Evaluated 3 alternatives: {'family': 'gradient_boosting', 'framework': 'lightgbm', 'problem_types': ['binary_classification', 'multiclass_classification', 'regression'], 'strengths': ['speed', 'large_datasets', 'memory_efficient'], 'inference_latency_ms': 15, 'memory_gb': 1.5, 'interpretability_score': 0.6, 'scalability_score': 0.95, 'hyperparameter_space': {'n_estimators': {'type': 'int', 'low': 100, 'high': 500, 'step': 50}, 'max_depth': {'type': 'int', 'low': 3, 'high': 10}, 'learning_rate': {'type': 'float', 'low': 0.01, 'high': 0.3, 'log': True}, 'num_leaves': {'type': 'int', 'low': 20, 'high': 150}}, 'default_hyperparameters': {'n_estimators': 300, 'max_depth': 6, 'learning_rate': 0.1, 'num_leaves': 31}, 'name': 'LightGBM', 'selection_score': 0.7149375000000001}, {'family': 'gradient_boosting', 'framework': 'xgboost', 'problem_types': ['binary_classification', 'multiclass_classification', 'regression'], 'strengths': ['accuracy', 'feature_importance', 'robust'], 'inference_latency_ms': 20, 'memory_gb': 2.0, 'interpretability_score': 0.6, 'scalability_score': 0.8, 'hyperparameter_space': {'n_estimators': {'type': 'int', 'low': 100, 'high': 500, 'step': 50}, 'max_depth': {'type': 'int', 'low': 3, 'high': 10}, 'learning_rate': {'type': 'float', 'low': 0.01, 'high': 0.3, 'log': True}, 'subsample': {'type': 'float', 'low': 0.6, 'high': 1.0, 'step': 0.1}}, 'default_hyperparameters': {'n_estimators': 300, 'max_depth': 6, 'learning_rate': 0.1, 'subsample': 0.8}, 'name': 'XGBoost', 'selection_score': 0.71325}, {'family': 'ensemble', 'framework': 'sklearn', 'problem_types': ['binary_classification', 'multiclass_classification', 'regression'], 'strengths': ['robust', 'feature_importance', 'no_scaling_required'], 'inference_latency_ms': 30, 'memory_gb': 3.0, 'interpretability_score': 0.5, 'scalability_score': 0.7, 'hyperparameter_space': {'n_estimators': {'type': 'int', 'low': 100, 'high': 500, 'step': 50}, 'max_depth': {'type': 'int', 'low': 5, 'high': 20}, 'min_samples_split': {'type': 'int', 'low': 2, 'high': 20}, 'min_samples_leaf': {'type': 'int', 'low': 1, 'high': 10}}, 'default_hyperparameters': {'n_estimators': 200, 'max_depth': 10, 'min_samples_split': 5, 'min_samples_leaf': 2}, 'name': 'RandomForest', 'selection_score': 0.6548749999999999}
    ‚Ä¢ HPO will tune 4 hyperparameters in Step 5

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Model selection complete: LogisticRegression (score=0.758) (0.6s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 5: MODEL TRAINER [‚úÖ SUCCESS]
----------------------------------------------------------------------
  Duration: 11.17s

  üì• Input Summary:
    ‚Ä¢ experiment_id: tier0_e2e_dd799015
    ‚Ä¢ algorithm: LogisticRegression
    ‚Ä¢ training_samples: 600
    ‚Ä¢ features: ['days_on_therapy', 'hcp_visits', 'prior_treatments']
    ‚Ä¢ target: discontinuation_flag

  üîç Validation Checks:
    ‚Ä¢ AUC-ROC above threshold: ‚úÖ PASS
        Expected: ‚â• 0.60
        Actual:   0.801
    ‚Ä¢ Model not useless: ‚úÖ PASS
        Expected: not useless
        Actual:   acceptable
    ‚Ä¢ Success criteria met: ‚úÖ PASS
        Expected: True
        Actual:   True
    ‚Ä¢ Both classes predicted: ‚úÖ PASS
        Expected: multi-class output
        Actual:   acceptable

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    auc_roc                   0.801           ‚â• 0.60          ‚úÖ         
    precision                 0.344           -               -         
    recall                    0.917           -               -         
    f1_score                  0.500           -               -         
    model_usefulness          acceptable      good/acceptable ‚úÖ         
    imbalance_detected        True            -               -         
    resampling_applied        True            -               -         

  üí° MODEL TRAINER Analysis:
    ‚Ä¢ Model trained with AUC-ROC: 0.801
    ‚Ä¢ Model usefulness: acceptable
    ‚Ä¢ Class imbalance detected and remediated via smote
    ‚Ä¢ Success criteria MET

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Training complete: acceptable model with AUC=0.801 (11.2s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 6: FEATURE ANALYZER [‚úÖ SUCCESS]
----------------------------------------------------------------------
  Duration: 19.64s

  üì• Input Summary:
    ‚Ä¢ experiment_id: tier0_e2e_dd799015
    ‚Ä¢ model_uri: models:/m-73964a06b8d345358bce3613a1d94c5c
    ‚Ä¢ samples_for_analysis: 50
    ‚Ä¢ features_analyzed: ['days_on_therapy', 'hcp_visits', 'prior_treatments']

  üîç Validation Checks:
    ‚Ä¢ Feature importance computed: ‚úÖ PASS
        Expected: importance present
        Actual:   Yes
    ‚Ä¢ Sufficient samples analyzed: ‚úÖ PASS
        Expected: ‚â• 10
        Actual:   50
    ‚Ä¢ Computation completed: ‚úÖ PASS
        Expected: compute_time > 0
        Actual:   18.85s

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    samples_analyzed          50              ‚â• 10            ‚úÖ         
    computation_time          18.85s          -               -         
    explainer_type            LinearExplainer -               -         
    top_feature               days_on_therapy -               -         
    top_importance            38.785          -               -         

  üí° FEATURE ANALYZER Analysis:
    ‚Ä¢ SHAP analysis completed on 50 samples in 18.85s
    ‚Ä¢ Top driver: days_on_therapy (importance: 38.785)
    ‚Ä¢ Feature ranking: days_on_therapy, hcp_visits, prior_treatments

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Feature analysis complete: days_on_therapy is top predictor (19.6s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 7: MODEL DEPLOYER [‚úÖ SUCCESS]
----------------------------------------------------------------------
  Duration: 4.43s

  üì• Input Summary:
    ‚Ä¢ experiment_id: tier0_e2e_dd799015
    ‚Ä¢ model_uri: models:/m-73964a06b8d345358bce3613a1d94c5c
    ‚Ä¢ validation_metrics: {13 keys}
    ‚Ä¢ success_criteria_met: True
    ‚Ä¢ include_bentoml: False

  üîç Validation Checks:
    ‚Ä¢ Deployment successful: ‚úÖ PASS
        Expected: True
        Actual:   True
    ‚Ä¢ Deployment ID assigned: ‚úÖ PASS
        Expected: ID present
        Actual:   deploy_97e467d5b6fa
    ‚Ä¢ Environment set: ‚úÖ PASS
        Expected: env specified
        Actual:   staging
    ‚Ä¢ BentoML verified: ‚úÖ PASS
        Expected: True
        Actual:   N/A (not enabled)

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    deployment_id             deploy_97e467d5b6fa -               -         
    environment               staging         -               -         
    status                    healthy         deployed        ‚ùå         
    bentoml_verified          N/A             -               -         
    latency_ms                N/A             -               -         

  üí° MODEL DEPLOYER Analysis:
    ‚Ä¢ Model deployed to staging environment
    ‚Ä¢ Deployment ID: deploy_97e467d5b6fa
    ‚Ä¢ BentoML serving not enabled

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Deployment complete: deploy_97e467d5b6fa to staging (4.4s)
  ------------------------------------------------------------

----------------------------------------------------------------------
STEP 8: OBSERVABILITY CONNECTOR [‚úÖ SUCCESS]
----------------------------------------------------------------------
  Duration: 0.02s

  üì• Input Summary:
    ‚Ä¢ experiment_id: tier0_e2e_dd799015
    ‚Ä¢ total_steps: 8
    ‚Ä¢ pipeline_complete: True

  üîç Validation Checks:
    ‚Ä¢ Metrics emitted: ‚úÖ PASS
        Expected: True
        Actual:   True
    ‚Ä¢ Events logged: ‚úÖ PASS
        Expected: > 0
        Actual:   1
    ‚Ä¢ Quality score computed: ‚úÖ PASS
        Expected: present
        Actual:   0.69

  üìä Key Metrics:
    Metric                    Value           Threshold       Status    
    -----------------------------------------------------------------
    emission_successful       True            True            ‚úÖ         
    events_logged             1               > 0             ‚úÖ         
    quality_score             0.69            -               -         

  üí° OBSERVABILITY CONNECTOR Analysis:
    ‚Ä¢ Observability metrics successfully emitted to monitoring systems
    ‚Ä¢ 1 events logged for pipeline tracking
    ‚Ä¢ Overall pipeline quality score: 0.69

  ------------------------------------------------------------
  ‚úÖ RESULT: PASS - Observability complete: 1 events logged (0.0s)
  ------------------------------------------------------------

======================================================================
COHORT CONSTRUCTION ANALYSIS
======================================================================

  üìä Patient Flow:
    ‚Ä¢ Input Patients:    600
    ‚Ä¢ Eligible Patients: 600
    ‚Ä¢ Excluded Patients: 0
    ‚Ä¢ Retention Rate:    100.0%

  üìã Eligibility Statistics:
    ‚Ä¢ total_input_patients: 600
    ‚Ä¢ eligible_patient_count: 600
    ‚Ä¢ excluded_patient_count: 0
    ‚Ä¢ exclusion_rate: 0.0000
    ‚Ä¢ eligibility_log: [{'criterion_name': 'data_quality_score', 'criterion_type': 'inclusion', 'criterion_order': 1, 'operator': '>=', 'value': 0.5, 'removed_count': np.int64(0), 'remaining_count': np.int64(600), 'description': 'Minimum data quality score', 'clinical_rationale': 'Ensure data quality for reliable ML predictions', 'applied_at': '2026-01-28T19:13:41.451926'}]
    ‚Ä¢ temporal_validation: {'lookback_exclusions': 0, 'followup_exclusions': 0, 'total_temporal_exclusions': 0}

  üîç Applied Criteria:
    ‚Ä¢ Cohort ID: cohort_kisqali_test_v100-test_20260128
    ‚Ä¢ Execution ID: exec_23556ce7f3fe
    ‚Ä¢ Status: completed

======================================================================
CLASS IMBALANCE REMEDIATION
======================================================================

  üìä Imbalance Analysis:
    ‚Ä¢ Imbalance Detected: Yes
    ‚Ä¢ Severity: SEVERE
    ‚Ä¢ Minority Ratio: 14.17%
    ‚Ä¢ Imbalance Ratio: 6.1:1

  üìà Class Distribution:
    ‚Ä¢ Class 0: 309 samples
    ‚Ä¢ Class 1: 51 samples

  üîß Remediation Applied:
    ‚Ä¢ Strategy: smote
    ‚Ä¢ Rationale: With 51 minority samples (well above the k_neighbors requirement) and severe 6.1:1 imbalance, SMOTE will effectively generate synthetic minority samples to balance the dataset for the LogisticRegression model.

  üìä Resampling Results:
    ‚Ä¢ Original Samples: 360
    ‚Ä¢ Resampled Samples: 618
    ‚Ä¢ New Minority Ratio: 50.00%

  üìà Resampled Class Distribution:
    ‚Ä¢ Class 0: 309 samples
    ‚Ä¢ Class 1: 309 samples

======================================================================
FEATURE IMPORTANCE (SHAP)
======================================================================

  Top Features:
    1. days_on_therapy: 38.7846
    2. hcp_visits: 1.1235
    3. prior_treatments: 0.5255

======================================================================
FINAL MODEL PERFORMANCE
======================================================================

  Primary Metrics:
    ‚Ä¢ roc_auc: 0.7819
    ‚Ä¢ accuracy: 0.6583
    ‚Ä¢ precision: 0.1591
    ‚Ä¢ recall: 0.6364
    ‚Ä¢ f1_score: 0.2545
    ‚Ä¢ pr_auc: 0.3803
    ‚Ä¢ brier_score: 0.2071

  Per-Class Metrics:
    ‚Ä¢ precision_class_0: 0.9474
    ‚Ä¢ precision_class_1: 0.1591
    ‚Ä¢ recall_class_0: 0.6606
    ‚Ä¢ recall_class_1: 0.6364

======================================================================
ENHANCED ACCURACY ANALYSIS
======================================================================

  Validation Set Confusion Matrix:
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ           Predicted                 ‚îÇ
    ‚îÇ         Neg        Pos              ‚îÇ
    ‚îÇ  Actual ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ            ‚îÇ
    ‚îÇ    Neg   TN=  74    FP=  35          ‚îÇ
    ‚îÇ    Pos   FN=   4    TP=   7          ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    Derived Metrics:
      ‚Ä¢ Accuracy:    0.6750 (81/120 correct)
      ‚Ä¢ Precision:   0.1667 (of predicted pos, 7/42 correct)
      ‚Ä¢ Recall/TPR:  0.6364 (of actual pos, 7/11 found)
      ‚Ä¢ Specificity: 0.6789 (of actual neg, 74/109 found)
      ‚Ä¢ F1 Score:    0.2642
      ‚Ä¢ NPV:         0.9487 (of predicted neg, 74/78 correct)
      ‚Ä¢ FPR:         0.3211 (false alarm rate)
      ‚Ä¢ FNR:         0.3636 (miss rate)

  Classification Report (per-class):
                           precision    recall  f1-score   support
    
    Class 0 (No Discont.)       0.95      0.68      0.79       109
       Class 1 (Discont.)       0.17      0.64      0.26        11
    
                 accuracy                           0.68       120
                macro avg       0.56      0.66      0.53       120
             weighted avg       0.88      0.68      0.74       120
    

  Probability Distribution (class 1):
    Min: 0.1616, Max: 0.7948
    Mean: 0.4476, Median: 0.4550
    Percentiles: P10=0.217, P25=0.314, P50=0.455, P75=0.584, P90=0.666, P95=0.706, P99=0.774

  Threshold Analysis:
    Threshold    Precision    Recall       F1           Pred Pos    
    --------------------------------------------------------
    0.05         0.0917       1.0000       0.1679       120         
    0.10         0.0917       1.0000       0.1679       120         
    0.15         0.0917       1.0000       0.1679       120         
    0.20         0.0982       1.0000       0.1789       112         
    0.25         0.1100       1.0000       0.1982       100         
    0.30         0.1209       1.0000       0.2157       91          
    0.40         0.1429       1.0000       0.2500       77          
    0.50         0.1591       0.6364       0.2545       44           ‚óÑ‚îÄ‚îÄ default
    0.60         0.2692       0.6364       0.3784       26          
    0.70         0.5714       0.3636       0.4444       7           

  Model Coefficients/Weights:
    Intercept: -0.2207
    Feature Coefficients:
      ‚Üì days_on_therapy: -0.4861
      ‚Üë prior_treatments: +0.4639
      ‚Üì hcp_visits: -0.2348

  Data Distribution Analysis:

    Training Set (n=360):
      Class 0:  309 ( 85.8%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
      Class 1:   51 ( 14.2%) ‚ñà‚ñà

    Validation Set (n=120):
      Class 0:  109 ( 90.8%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
      Class 1:   11 (  9.2%) ‚ñà

    Test Set (n=90):
      Class 0:   78 ( 86.7%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
      Class 1:   12 ( 13.3%) ‚ñà‚ñà

  Overfitting Analysis (Train vs Validation):
    Metric          Train        Validation   Delta        Status         
    ------------------------------------------------------------
    accuracy        0.8583       0.6750       0.1833++++++ ‚ö†Ô∏è Overfitting 
    precision       0.0000       0.1667       -0.1667+++++ ‚ùì Unusual      
    recall          0.0000       0.6364       -0.6364+++++ ‚ùì Unusual      
    f1              0.0000       0.2642       -0.2642+++++ ‚ùì Unusual      
    roc_auc         0.6601       0.7819       -0.1218+++++ ‚ùì Unusual      

======================================================================
‚ö†Ô∏è  MODEL USEFULNESS VERDICT
======================================================================

======================================================================
DEPLOYMENT STATUS
======================================================================

  ‚Ä¢ Deployment ID: deploy_97e467d5b6fa
  ‚Ä¢ Environment: staging
  ‚Ä¢ Status: healthy
  ‚Ä¢ Endpoint: https://api.e2i.com/v1/kisqali_discontinuation_tier0_e2-staging/predict

======================================================================

======================================================================
PIPELINE SUMMARY
======================================================================
  Experiment ID: tier0_e2e_dd799015
  Steps Completed: 8
  Total Duration: 45.6s
  QC Gate: PASSED
  Cohort Size: 600
  Validation Metrics: {'accuracy': 0.6583333333333333, 'precision': 0.1590909090909091, 'recall': 0.6363636363636364, 'f1_score': 0.2545454545454545, 'f1_macro': 0.5164619164619164, 'f1_weighted': 0.7303603603603604, 'precision_class_0': 0.9473684210526315, 'precision_class_1': 0.1590909090909091, 'recall_class_0': 0.6605504587155964, 'recall_class_1': 0.6363636363636364, 'roc_auc': 0.7819015846538782, 'pr_auc': 0.38026013132495085, 'brier_score': 0.20713971223894884}
  Completed: 2026-01-28T19:14:17.332083

  Step Status: 8 success, 0 warnings, 0 failed

  ‚úÖ Pipeline completed successfully!
```
